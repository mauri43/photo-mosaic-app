(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var Td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Iu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mu={exports:{}},ls={},Fu={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vn=Symbol.for("react.element"),Sd=Symbol.for("react.portal"),Ed=Symbol.for("react.fragment"),Cd=Symbol.for("react.strict_mode"),Pd=Symbol.for("react.profiler"),Rd=Symbol.for("react.provider"),_d=Symbol.for("react.context"),kd=Symbol.for("react.forward_ref"),Nd=Symbol.for("react.suspense"),Dd=Symbol.for("react.memo"),bd=Symbol.for("react.lazy"),sa=Symbol.iterator;function Od(e){return e===null||typeof e!="object"?null:(e=sa&&e[sa]||e["@@iterator"],typeof e=="function"?e:null)}var Au={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hu=Object.assign,ju={};function Ji(e,i,t){this.props=e,this.context=i,this.refs=ju,this.updater=t||Au}Ji.prototype.isReactComponent={};Ji.prototype.setState=function(e,i){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,i,"setState")};Ji.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bu(){}Bu.prototype=Ji.prototype;function rl(e,i,t){this.props=e,this.context=i,this.refs=ju,this.updater=t||Au}var sl=rl.prototype=new Bu;sl.constructor=rl;Hu(sl,Ji.prototype);sl.isPureReactComponent=!0;var oa=Array.isArray,Uu=Object.prototype.hasOwnProperty,ol={current:null},Wu={key:!0,ref:!0,__self:!0,__source:!0};function Vu(e,i,t){var n,r={},s=null,a=null;if(i!=null)for(n in i.ref!==void 0&&(a=i.ref),i.key!==void 0&&(s=""+i.key),i)Uu.call(i,n)&&!Wu.hasOwnProperty(n)&&(r[n]=i[n]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)r[n]===void 0&&(r[n]=o[n]);return{$$typeof:Vn,type:e,key:s,ref:a,props:r,_owner:ol.current}}function Ld(e,i){return{$$typeof:Vn,type:e.type,key:i,ref:e.ref,props:e.props,_owner:e._owner}}function ll(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vn}function zd(e){var i={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(t){return i[t]})}var la=/\/+/g;function bs(e,i){return typeof e=="object"&&e!==null&&e.key!=null?zd(""+e.key):i.toString(36)}function Tr(e,i,t,n,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Vn:case Sd:a=!0}}if(a)return a=e,r=r(a),e=n===""?"."+bs(a,0):n,oa(r)?(t="",e!=null&&(t=e.replace(la,"$&/")+"/"),Tr(r,i,t,"",function(u){return u})):r!=null&&(ll(r)&&(r=Ld(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(la,"$&/")+"/")+e)),i.push(r)),1;if(a=0,n=n===""?".":n+":",oa(e))for(var o=0;o<e.length;o++){s=e[o];var l=n+bs(s,o);a+=Tr(s,i,t,l,r)}else if(l=Od(e),typeof l=="function")for(e=l.call(e),o=0;!(s=e.next()).done;)s=s.value,l=n+bs(s,o++),a+=Tr(s,i,t,l,r);else if(s==="object")throw i=String(e),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return a}function nr(e,i,t){if(e==null)return e;var n=[],r=0;return Tr(e,n,"","",function(s){return i.call(t,s,r++)}),n}function Id(e){if(e._status===-1){var i=e._result;i=i(),i.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=i)}if(e._status===1)return e._result.default;throw e._result}var We={current:null},Sr={transition:null},Md={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:Sr,ReactCurrentOwner:ol};function Gu(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:nr,forEach:function(e,i,t){nr(e,function(){i.apply(this,arguments)},t)},count:function(e){var i=0;return nr(e,function(){i++}),i},toArray:function(e){return nr(e,function(i){return i})||[]},only:function(e){if(!ll(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=Ji;ee.Fragment=Ed;ee.Profiler=Pd;ee.PureComponent=rl;ee.StrictMode=Cd;ee.Suspense=Nd;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Md;ee.act=Gu;ee.cloneElement=function(e,i,t){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Hu({},e.props),r=e.key,s=e.ref,a=e._owner;if(i!=null){if(i.ref!==void 0&&(s=i.ref,a=ol.current),i.key!==void 0&&(r=""+i.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in i)Uu.call(i,l)&&!Wu.hasOwnProperty(l)&&(n[l]=i[l]===void 0&&o!==void 0?o[l]:i[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Vn,type:e.type,key:r,ref:s,props:n,_owner:a}};ee.createContext=function(e){return e={$$typeof:_d,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Rd,_context:e},e.Consumer=e};ee.createElement=Vu;ee.createFactory=function(e){var i=Vu.bind(null,e);return i.type=e,i};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:kd,render:e}};ee.isValidElement=ll;ee.lazy=function(e){return{$$typeof:bd,_payload:{_status:-1,_result:e},_init:Id}};ee.memo=function(e,i){return{$$typeof:Dd,type:e,compare:i===void 0?null:i}};ee.startTransition=function(e){var i=Sr.transition;Sr.transition={};try{e()}finally{Sr.transition=i}};ee.unstable_act=Gu;ee.useCallback=function(e,i){return We.current.useCallback(e,i)};ee.useContext=function(e){return We.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return We.current.useDeferredValue(e)};ee.useEffect=function(e,i){return We.current.useEffect(e,i)};ee.useId=function(){return We.current.useId()};ee.useImperativeHandle=function(e,i,t){return We.current.useImperativeHandle(e,i,t)};ee.useInsertionEffect=function(e,i){return We.current.useInsertionEffect(e,i)};ee.useLayoutEffect=function(e,i){return We.current.useLayoutEffect(e,i)};ee.useMemo=function(e,i){return We.current.useMemo(e,i)};ee.useReducer=function(e,i,t){return We.current.useReducer(e,i,t)};ee.useRef=function(e){return We.current.useRef(e)};ee.useState=function(e){return We.current.useState(e)};ee.useSyncExternalStore=function(e,i,t){return We.current.useSyncExternalStore(e,i,t)};ee.useTransition=function(){return We.current.useTransition()};ee.version="18.3.1";Fu.exports=ee;var X=Fu.exports;const Fd=Iu(X);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ad=X,Hd=Symbol.for("react.element"),jd=Symbol.for("react.fragment"),Bd=Object.prototype.hasOwnProperty,Ud=Ad.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wd={key:!0,ref:!0,__self:!0,__source:!0};function Zu(e,i,t){var n,r={},s=null,a=null;t!==void 0&&(s=""+t),i.key!==void 0&&(s=""+i.key),i.ref!==void 0&&(a=i.ref);for(n in i)Bd.call(i,n)&&!Wd.hasOwnProperty(n)&&(r[n]=i[n]);if(e&&e.defaultProps)for(n in i=e.defaultProps,i)r[n]===void 0&&(r[n]=i[n]);return{$$typeof:Hd,type:e,key:s,ref:a,props:r,_owner:Ud.current}}ls.Fragment=jd;ls.jsx=Zu;ls.jsxs=Zu;Mu.exports=ls;var P=Mu.exports,oo={},qu={exports:{}},nt={},Xu={exports:{}},Ku={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function i(L,V){var q=L.length;L.push(V);e:for(;0<q;){var $=q-1>>>1,re=L[$];if(0<r(re,V))L[$]=V,L[q]=re,q=$;else break e}}function t(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var V=L[0],q=L.pop();if(q!==V){L[0]=q;e:for(var $=0,re=L.length,K=re>>>1;$<K;){var Oe=2*($+1)-1,ft=L[Oe],ot=Oe+1,pt=L[ot];if(0>r(ft,q))ot<re&&0>r(pt,ft)?(L[$]=pt,L[ot]=q,$=ot):(L[$]=ft,L[Oe]=q,$=Oe);else if(ot<re&&0>r(pt,q))L[$]=pt,L[ot]=q,$=ot;else break e}}return V}function r(L,V){var q=L.sortIndex-V.sortIndex;return q!==0?q:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,d=3,w=!1,v=!1,T=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var V=t(u);V!==null;){if(V.callback===null)n(u);else if(V.startTime<=L)n(u),V.sortIndex=V.expirationTime,i(l,V);else break;V=t(u)}}function _(L){if(T=!1,S(L),!v)if(t(l)!==null)v=!0,ce(b);else{var V=t(u);V!==null&&ke(_,V.startTime-L)}}function b(L,V){v=!1,T&&(T=!1,m(M),M=-1),w=!0;var q=d;try{for(S(V),h=t(l);h!==null&&(!(h.expirationTime>V)||L&&!te());){var $=h.callback;if(typeof $=="function"){h.callback=null,d=h.priorityLevel;var re=$(h.expirationTime<=V);V=e.unstable_now(),typeof re=="function"?h.callback=re:h===t(l)&&n(l),S(V)}else n(l);h=t(l)}if(h!==null)var K=!0;else{var Oe=t(u);Oe!==null&&ke(_,Oe.startTime-V),K=!1}return K}finally{h=null,d=q,w=!1}}var O=!1,z=null,M=-1,U=5,W=-1;function te(){return!(e.unstable_now()-W<U)}function ne(){if(z!==null){var L=e.unstable_now();W=L;var V=!0;try{V=z(!0,L)}finally{V?de():(O=!1,z=null)}}else O=!1}var de;if(typeof y=="function")de=function(){y(ne)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,st=Te.port2;Te.port1.onmessage=ne,de=function(){st.postMessage(null)}}else de=function(){x(ne,0)};function ce(L){z=L,O||(O=!0,de())}function ke(L,V){M=x(function(){L(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){v||w||(v=!0,ce(b))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return t(l)},e.unstable_next=function(L){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var q=d;d=V;try{return L()}finally{d=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var q=d;d=L;try{return V()}finally{d=q}},e.unstable_scheduleCallback=function(L,V,q){var $=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?$+q:$):q=$,L){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=q+re,L={id:c++,callback:V,priorityLevel:L,startTime:q,expirationTime:re,sortIndex:-1},q>$?(L.sortIndex=q,i(u,L),t(l)===null&&L===t(u)&&(T?(m(M),M=-1):T=!0,ke(_,q-$))):(L.sortIndex=re,i(l,L),v||w||(v=!0,ce(b))),L},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(L){var V=d;return function(){var q=d;d=V;try{return L.apply(this,arguments)}finally{d=q}}}})(Ku);Xu.exports=Ku;var Vd=Xu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gd=X,it=Vd;function F(e){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)i+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qu=new Set,_n={};function Ti(e,i){Vi(e,i),Vi(e+"Capture",i)}function Vi(e,i){for(_n[e]=i,e=0;e<i.length;e++)Qu.add(i[e])}var It=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lo=Object.prototype.hasOwnProperty,Zd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aa={},ua={};function qd(e){return lo.call(ua,e)?!0:lo.call(aa,e)?!1:Zd.test(e)?ua[e]=!0:(aa[e]=!0,!1)}function Xd(e,i,t,n){if(t!==null&&t.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kd(e,i,t,n){if(i===null||typeof i>"u"||Xd(e,i,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function Ve(e,i,t,n,r,s,a){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=e,this.type=i,this.sanitizeURL=s,this.removeEmptyString=a}var Ie={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ie[e]=new Ve(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var i=e[0];Ie[i]=new Ve(i,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ie[e]=new Ve(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ie[e]=new Ve(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ie[e]=new Ve(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ie[e]=new Ve(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ie[e]=new Ve(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ie[e]=new Ve(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ie[e]=new Ve(e,5,!1,e.toLowerCase(),null,!1,!1)});var al=/[\-:]([a-z])/g;function ul(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var i=e.replace(al,ul);Ie[i]=new Ve(i,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var i=e.replace(al,ul);Ie[i]=new Ve(i,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var i=e.replace(al,ul);Ie[i]=new Ve(i,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ie[e]=new Ve(e,1,!1,e.toLowerCase(),null,!1,!1)});Ie.xlinkHref=new Ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ie[e]=new Ve(e,1,!1,e.toLowerCase(),null,!0,!0)});function cl(e,i,t,n){var r=Ie.hasOwnProperty(i)?Ie[i]:null;(r!==null?r.type!==0:n||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(Kd(i,t,r,n)&&(t=null),n||r===null?qd(i)&&(t===null?e.removeAttribute(i):e.setAttribute(i,""+t)):r.mustUseProperty?e[r.propertyName]=t===null?r.type===3?!1:"":t:(i=r.attributeName,n=r.attributeNamespace,t===null?e.removeAttribute(i):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,n?e.setAttributeNS(n,i,t):e.setAttribute(i,t))))}var Ht=Gd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rr=Symbol.for("react.element"),Ri=Symbol.for("react.portal"),_i=Symbol.for("react.fragment"),hl=Symbol.for("react.strict_mode"),ao=Symbol.for("react.profiler"),Yu=Symbol.for("react.provider"),Ju=Symbol.for("react.context"),dl=Symbol.for("react.forward_ref"),uo=Symbol.for("react.suspense"),co=Symbol.for("react.suspense_list"),fl=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy"),$u=Symbol.for("react.offscreen"),ca=Symbol.iterator;function sn(e){return e===null||typeof e!="object"?null:(e=ca&&e[ca]||e["@@iterator"],typeof e=="function"?e:null)}var xe=Object.assign,Os;function pn(e){if(Os===void 0)try{throw Error()}catch(t){var i=t.stack.trim().match(/\n( *(at )?)/);Os=i&&i[1]||""}return`
`+Os+e}var Ls=!1;function zs(e,i){if(!e||Ls)return"";Ls=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(u){var n=u}Reflect.construct(e,[],i)}else{try{i.call()}catch(u){n=u}e.call(i.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=n.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=a&&0<=o);break}}}finally{Ls=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?pn(e):""}function Qd(e){switch(e.tag){case 5:return pn(e.type);case 16:return pn("Lazy");case 13:return pn("Suspense");case 19:return pn("SuspenseList");case 0:case 2:case 15:return e=zs(e.type,!1),e;case 11:return e=zs(e.type.render,!1),e;case 1:return e=zs(e.type,!0),e;default:return""}}function ho(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _i:return"Fragment";case Ri:return"Portal";case ao:return"Profiler";case hl:return"StrictMode";case uo:return"Suspense";case co:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ju:return(e.displayName||"Context")+".Consumer";case Yu:return(e._context.displayName||"Context")+".Provider";case dl:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fl:return i=e.displayName||null,i!==null?i:ho(e.type)||"Memo";case Bt:i=e._payload,e=e._init;try{return ho(e(i))}catch{}}return null}function Yd(e){var i=e.type;switch(e.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=i.render,e=e.displayName||e.name||"",i.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ho(i);case 8:return i===hl?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ti(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ec(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Jd(e){var i=ec(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,i),n=""+e[i];if(!e.hasOwnProperty(i)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(e,i,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function sr(e){e._valueTracker||(e._valueTracker=Jd(e))}function tc(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var t=i.getValue(),n="";return e&&(n=ec(e)?e.checked?"true":"false":e.value),e=n,e!==t?(i.setValue(e),!0):!1}function Mr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fo(e,i){var t=i.checked;return xe({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??e._wrapperState.initialChecked})}function ha(e,i){var t=i.defaultValue==null?"":i.defaultValue,n=i.checked!=null?i.checked:i.defaultChecked;t=ti(i.value!=null?i.value:t),e._wrapperState={initialChecked:n,initialValue:t,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ic(e,i){i=i.checked,i!=null&&cl(e,"checked",i,!1)}function po(e,i){ic(e,i);var t=ti(i.value),n=i.type;if(t!=null)n==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}i.hasOwnProperty("value")?mo(e,i.type,t):i.hasOwnProperty("defaultValue")&&mo(e,i.type,ti(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(e.defaultChecked=!!i.defaultChecked)}function da(e,i,t){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var n=i.type;if(!(n!=="submit"&&n!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+e._wrapperState.initialValue,t||i===e.value||(e.value=i),e.defaultValue=i}t=e.name,t!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,t!==""&&(e.name=t)}function mo(e,i,t){(i!=="number"||Mr(e.ownerDocument)!==e)&&(t==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var mn=Array.isArray;function Ai(e,i,t,n){if(e=e.options,i){i={};for(var r=0;r<t.length;r++)i["$"+t[r]]=!0;for(t=0;t<e.length;t++)r=i.hasOwnProperty("$"+e[t].value),e[t].selected!==r&&(e[t].selected=r),r&&n&&(e[t].defaultSelected=!0)}else{for(t=""+ti(t),i=null,r=0;r<e.length;r++){if(e[r].value===t){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}i!==null||e[r].disabled||(i=e[r])}i!==null&&(i.selected=!0)}}function go(e,i){if(i.dangerouslySetInnerHTML!=null)throw Error(F(91));return xe({},i,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fa(e,i){var t=i.value;if(t==null){if(t=i.children,i=i.defaultValue,t!=null){if(i!=null)throw Error(F(92));if(mn(t)){if(1<t.length)throw Error(F(93));t=t[0]}i=t}i==null&&(i=""),t=i}e._wrapperState={initialValue:ti(t)}}function nc(e,i){var t=ti(i.value),n=ti(i.defaultValue);t!=null&&(t=""+t,t!==e.value&&(e.value=t),i.defaultValue==null&&e.defaultValue!==t&&(e.defaultValue=t)),n!=null&&(e.defaultValue=""+n)}function pa(e){var i=e.textContent;i===e._wrapperState.initialValue&&i!==""&&i!==null&&(e.value=i)}function rc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vo(e,i){return e==null||e==="http://www.w3.org/1999/xhtml"?rc(i):e==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var or,sc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,t,n,r){MSApp.execUnsafeLocalFunction(function(){return e(i,t,n,r)})}:e}(function(e,i){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=i;else{for(or=or||document.createElement("div"),or.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=or.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;i.firstChild;)e.appendChild(i.firstChild)}});function kn(e,i){if(i){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=i;return}}e.textContent=i}var yn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$d=["Webkit","ms","Moz","O"];Object.keys(yn).forEach(function(e){$d.forEach(function(i){i=i+e.charAt(0).toUpperCase()+e.substring(1),yn[i]=yn[e]})});function oc(e,i,t){return i==null||typeof i=="boolean"||i===""?"":t||typeof i!="number"||i===0||yn.hasOwnProperty(e)&&yn[e]?(""+i).trim():i+"px"}function lc(e,i){e=e.style;for(var t in i)if(i.hasOwnProperty(t)){var n=t.indexOf("--")===0,r=oc(t,i[t],n);t==="float"&&(t="cssFloat"),n?e.setProperty(t,r):e[t]=r}}var ef=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yo(e,i){if(i){if(ef[e]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(F(137,e));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(F(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(F(61))}if(i.style!=null&&typeof i.style!="object")throw Error(F(62))}}function wo(e,i){if(e.indexOf("-")===-1)return typeof i.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xo=null;function pl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var To=null,Hi=null,ji=null;function ma(e){if(e=qn(e)){if(typeof To!="function")throw Error(F(280));var i=e.stateNode;i&&(i=ds(i),To(e.stateNode,e.type,i))}}function ac(e){Hi?ji?ji.push(e):ji=[e]:Hi=e}function uc(){if(Hi){var e=Hi,i=ji;if(ji=Hi=null,ma(e),i)for(e=0;e<i.length;e++)ma(i[e])}}function cc(e,i){return e(i)}function hc(){}var Is=!1;function dc(e,i,t){if(Is)return e(i,t);Is=!0;try{return cc(e,i,t)}finally{Is=!1,(Hi!==null||ji!==null)&&(hc(),uc())}}function Nn(e,i){var t=e.stateNode;if(t===null)return null;var n=ds(t);if(n===null)return null;t=n[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(F(231,i,typeof t));return t}var So=!1;if(It)try{var on={};Object.defineProperty(on,"passive",{get:function(){So=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{So=!1}function tf(e,i,t,n,r,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{i.apply(t,u)}catch(c){this.onError(c)}}var wn=!1,Fr=null,Ar=!1,Eo=null,nf={onError:function(e){wn=!0,Fr=e}};function rf(e,i,t,n,r,s,a,o,l){wn=!1,Fr=null,tf.apply(nf,arguments)}function sf(e,i,t,n,r,s,a,o,l){if(rf.apply(this,arguments),wn){if(wn){var u=Fr;wn=!1,Fr=null}else throw Error(F(198));Ar||(Ar=!0,Eo=u)}}function Si(e){var i=e,t=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,i.flags&4098&&(t=i.return),e=i.return;while(e)}return i.tag===3?t:null}function fc(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function ga(e){if(Si(e)!==e)throw Error(F(188))}function of(e){var i=e.alternate;if(!i){if(i=Si(e),i===null)throw Error(F(188));return i!==e?null:e}for(var t=e,n=i;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){t=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return ga(r),e;if(s===n)return ga(r),i;s=s.sibling}throw Error(F(188))}if(t.return!==n.return)t=r,n=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,n=s;break}if(o===n){a=!0,n=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,n=r;break}if(o===n){a=!0,n=s,t=r;break}o=o.sibling}if(!a)throw Error(F(189))}}if(t.alternate!==n)throw Error(F(190))}if(t.tag!==3)throw Error(F(188));return t.stateNode.current===t?e:i}function pc(e){return e=of(e),e!==null?mc(e):null}function mc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var i=mc(e);if(i!==null)return i;e=e.sibling}return null}var gc=it.unstable_scheduleCallback,va=it.unstable_cancelCallback,lf=it.unstable_shouldYield,af=it.unstable_requestPaint,Ce=it.unstable_now,uf=it.unstable_getCurrentPriorityLevel,ml=it.unstable_ImmediatePriority,vc=it.unstable_UserBlockingPriority,Hr=it.unstable_NormalPriority,cf=it.unstable_LowPriority,yc=it.unstable_IdlePriority,as=null,_t=null;function hf(e){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(as,e,void 0,(e.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:pf,df=Math.log,ff=Math.LN2;function pf(e){return e>>>=0,e===0?32:31-(df(e)/ff|0)|0}var lr=64,ar=4194304;function gn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function jr(e,i){var t=e.pendingLanes;if(t===0)return 0;var n=0,r=e.suspendedLanes,s=e.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?n=gn(o):(s&=a,s!==0&&(n=gn(s)))}else a=t&~r,a!==0?n=gn(a):s!==0&&(n=gn(s));if(n===0)return 0;if(i!==0&&i!==n&&!(i&r)&&(r=n&-n,s=i&-i,r>=s||r===16&&(s&4194240)!==0))return i;if(n&4&&(n|=t&16),i=e.entangledLanes,i!==0)for(e=e.entanglements,i&=n;0<i;)t=31-wt(i),r=1<<t,n|=e[t],i&=~r;return n}function mf(e,i){switch(e){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gf(e,i){for(var t=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-wt(s),o=1<<a,l=r[a];l===-1?(!(o&t)||o&n)&&(r[a]=mf(o,i)):l<=i&&(e.expiredLanes|=o),s&=~o}}function Co(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wc(){var e=lr;return lr<<=1,!(lr&4194240)&&(lr=64),e}function Ms(e){for(var i=[],t=0;31>t;t++)i.push(e);return i}function Gn(e,i,t){e.pendingLanes|=i,i!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,i=31-wt(i),e[i]=t}function vf(e,i){var t=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<t;){var r=31-wt(t),s=1<<r;i[r]=0,n[r]=-1,e[r]=-1,t&=~s}}function gl(e,i){var t=e.entangledLanes|=i;for(e=e.entanglements;t;){var n=31-wt(t),r=1<<n;r&i|e[n]&i&&(e[n]|=i),t&=~r}}var ae=0;function xc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Tc,vl,Sc,Ec,Cc,Po=!1,ur=[],qt=null,Xt=null,Kt=null,Dn=new Map,bn=new Map,Wt=[],yf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ya(e,i){switch(e){case"focusin":case"focusout":qt=null;break;case"dragenter":case"dragleave":Xt=null;break;case"mouseover":case"mouseout":Kt=null;break;case"pointerover":case"pointerout":Dn.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":bn.delete(i.pointerId)}}function ln(e,i,t,n,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:i,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},i!==null&&(i=qn(i),i!==null&&vl(i)),e):(e.eventSystemFlags|=n,i=e.targetContainers,r!==null&&i.indexOf(r)===-1&&i.push(r),e)}function wf(e,i,t,n,r){switch(i){case"focusin":return qt=ln(qt,e,i,t,n,r),!0;case"dragenter":return Xt=ln(Xt,e,i,t,n,r),!0;case"mouseover":return Kt=ln(Kt,e,i,t,n,r),!0;case"pointerover":var s=r.pointerId;return Dn.set(s,ln(Dn.get(s)||null,e,i,t,n,r)),!0;case"gotpointercapture":return s=r.pointerId,bn.set(s,ln(bn.get(s)||null,e,i,t,n,r)),!0}return!1}function Pc(e){var i=ai(e.target);if(i!==null){var t=Si(i);if(t!==null){if(i=t.tag,i===13){if(i=fc(t),i!==null){e.blockedOn=i,Cc(e.priority,function(){Sc(t)});return}}else if(i===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Er(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var t=Ro(e.domEventName,e.eventSystemFlags,i[0],e.nativeEvent);if(t===null){t=e.nativeEvent;var n=new t.constructor(t.type,t);xo=n,t.target.dispatchEvent(n),xo=null}else return i=qn(t),i!==null&&vl(i),e.blockedOn=t,!1;i.shift()}return!0}function wa(e,i,t){Er(e)&&t.delete(i)}function xf(){Po=!1,qt!==null&&Er(qt)&&(qt=null),Xt!==null&&Er(Xt)&&(Xt=null),Kt!==null&&Er(Kt)&&(Kt=null),Dn.forEach(wa),bn.forEach(wa)}function an(e,i){e.blockedOn===i&&(e.blockedOn=null,Po||(Po=!0,it.unstable_scheduleCallback(it.unstable_NormalPriority,xf)))}function On(e){function i(r){return an(r,e)}if(0<ur.length){an(ur[0],e);for(var t=1;t<ur.length;t++){var n=ur[t];n.blockedOn===e&&(n.blockedOn=null)}}for(qt!==null&&an(qt,e),Xt!==null&&an(Xt,e),Kt!==null&&an(Kt,e),Dn.forEach(i),bn.forEach(i),t=0;t<Wt.length;t++)n=Wt[t],n.blockedOn===e&&(n.blockedOn=null);for(;0<Wt.length&&(t=Wt[0],t.blockedOn===null);)Pc(t),t.blockedOn===null&&Wt.shift()}var Bi=Ht.ReactCurrentBatchConfig,Br=!0;function Tf(e,i,t,n){var r=ae,s=Bi.transition;Bi.transition=null;try{ae=1,yl(e,i,t,n)}finally{ae=r,Bi.transition=s}}function Sf(e,i,t,n){var r=ae,s=Bi.transition;Bi.transition=null;try{ae=4,yl(e,i,t,n)}finally{ae=r,Bi.transition=s}}function yl(e,i,t,n){if(Br){var r=Ro(e,i,t,n);if(r===null)Zs(e,i,n,Ur,t),ya(e,n);else if(wf(r,e,i,t,n))n.stopPropagation();else if(ya(e,n),i&4&&-1<yf.indexOf(e)){for(;r!==null;){var s=qn(r);if(s!==null&&Tc(s),s=Ro(e,i,t,n),s===null&&Zs(e,i,n,Ur,t),s===r)break;r=s}r!==null&&n.stopPropagation()}else Zs(e,i,n,null,t)}}var Ur=null;function Ro(e,i,t,n){if(Ur=null,e=pl(n),e=ai(e),e!==null)if(i=Si(e),i===null)e=null;else if(t=i.tag,t===13){if(e=fc(i),e!==null)return e;e=null}else if(t===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null);return Ur=e,null}function Rc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uf()){case ml:return 1;case vc:return 4;case Hr:case cf:return 16;case yc:return 536870912;default:return 16}default:return 16}}var Gt=null,wl=null,Cr=null;function _c(){if(Cr)return Cr;var e,i=wl,t=i.length,n,r="value"in Gt?Gt.value:Gt.textContent,s=r.length;for(e=0;e<t&&i[e]===r[e];e++);var a=t-e;for(n=1;n<=a&&i[t-n]===r[s-n];n++);return Cr=r.slice(e,1<n?1-n:void 0)}function Pr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function cr(){return!0}function xa(){return!1}function rt(e){function i(t,n,r,s,a){this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cr:xa,this.isPropagationStopped=xa,this}return xe(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=cr)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=cr)},persist:function(){},isPersistent:cr}),i}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=rt($i),Zn=xe({},$i,{view:0,detail:0}),Ef=rt(Zn),Fs,As,un,us=xe({},Zn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&e.type==="mousemove"?(Fs=e.screenX-un.screenX,As=e.screenY-un.screenY):As=Fs=0,un=e),Fs)},movementY:function(e){return"movementY"in e?e.movementY:As}}),Ta=rt(us),Cf=xe({},us,{dataTransfer:0}),Pf=rt(Cf),Rf=xe({},Zn,{relatedTarget:0}),Hs=rt(Rf),_f=xe({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),kf=rt(_f),Nf=xe({},$i,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Df=rt(Nf),bf=xe({},$i,{data:0}),Sa=rt(bf),Of={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function If(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=zf[e])?!!i[e]:!1}function Tl(){return If}var Mf=xe({},Zn,{key:function(e){if(e.key){var i=Of[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Pr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tl,charCode:function(e){return e.type==="keypress"?Pr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ff=rt(Mf),Af=xe({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ea=rt(Af),Hf=xe({},Zn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tl}),jf=rt(Hf),Bf=xe({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),Uf=rt(Bf),Wf=xe({},us,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Vf=rt(Wf),Gf=[9,13,27,32],Sl=It&&"CompositionEvent"in window,xn=null;It&&"documentMode"in document&&(xn=document.documentMode);var Zf=It&&"TextEvent"in window&&!xn,kc=It&&(!Sl||xn&&8<xn&&11>=xn),Ca=" ",Pa=!1;function Nc(e,i){switch(e){case"keyup":return Gf.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ki=!1;function qf(e,i){switch(e){case"compositionend":return Dc(i);case"keypress":return i.which!==32?null:(Pa=!0,Ca);case"textInput":return e=i.data,e===Ca&&Pa?null:e;default:return null}}function Xf(e,i){if(ki)return e==="compositionend"||!Sl&&Nc(e,i)?(e=_c(),Cr=wl=Gt=null,ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return kc&&i.locale!=="ko"?null:i.data;default:return null}}var Kf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ra(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!Kf[e.type]:i==="textarea"}function bc(e,i,t,n){ac(n),i=Wr(i,"onChange"),0<i.length&&(t=new xl("onChange","change",null,t,n),e.push({event:t,listeners:i}))}var Tn=null,Ln=null;function Qf(e){Uc(e,0)}function cs(e){var i=bi(e);if(tc(i))return e}function Yf(e,i){if(e==="change")return i}var Oc=!1;if(It){var js;if(It){var Bs="oninput"in document;if(!Bs){var _a=document.createElement("div");_a.setAttribute("oninput","return;"),Bs=typeof _a.oninput=="function"}js=Bs}else js=!1;Oc=js&&(!document.documentMode||9<document.documentMode)}function ka(){Tn&&(Tn.detachEvent("onpropertychange",Lc),Ln=Tn=null)}function Lc(e){if(e.propertyName==="value"&&cs(Ln)){var i=[];bc(i,Ln,e,pl(e)),dc(Qf,i)}}function Jf(e,i,t){e==="focusin"?(ka(),Tn=i,Ln=t,Tn.attachEvent("onpropertychange",Lc)):e==="focusout"&&ka()}function $f(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cs(Ln)}function ep(e,i){if(e==="click")return cs(i)}function tp(e,i){if(e==="input"||e==="change")return cs(i)}function ip(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Tt=typeof Object.is=="function"?Object.is:ip;function zn(e,i){if(Tt(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var t=Object.keys(e),n=Object.keys(i);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!lo.call(i,r)||!Tt(e[r],i[r]))return!1}return!0}function Na(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Da(e,i){var t=Na(e);e=0;for(var n;t;){if(t.nodeType===3){if(n=e+t.textContent.length,e<=i&&n>=i)return{node:t,offset:i-e};e=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=Na(t)}}function zc(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?zc(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Ic(){for(var e=window,i=Mr();i instanceof e.HTMLIFrameElement;){try{var t=typeof i.contentWindow.location.href=="string"}catch{t=!1}if(t)e=i.contentWindow;else break;i=Mr(e.document)}return i}function El(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}function np(e){var i=Ic(),t=e.focusedElem,n=e.selectionRange;if(i!==t&&t&&t.ownerDocument&&zc(t.ownerDocument.documentElement,t)){if(n!==null&&El(t)){if(i=n.start,e=n.end,e===void 0&&(e=i),"selectionStart"in t)t.selectionStart=i,t.selectionEnd=Math.min(e,t.value.length);else if(e=(i=t.ownerDocument||document)&&i.defaultView||window,e.getSelection){e=e.getSelection();var r=t.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!e.extend&&s>n&&(r=n,n=s,s=r),r=Da(t,s);var a=Da(t,n);r&&a&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(i=i.createRange(),i.setStart(r.node,r.offset),e.removeAllRanges(),s>n?(e.addRange(i),e.extend(a.node,a.offset)):(i.setEnd(a.node,a.offset),e.addRange(i)))}}for(i=[],e=t;e=e.parentNode;)e.nodeType===1&&i.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<i.length;t++)e=i[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rp=It&&"documentMode"in document&&11>=document.documentMode,Ni=null,_o=null,Sn=null,ko=!1;function ba(e,i,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;ko||Ni==null||Ni!==Mr(n)||(n=Ni,"selectionStart"in n&&El(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Sn&&zn(Sn,n)||(Sn=n,n=Wr(_o,"onSelect"),0<n.length&&(i=new xl("onSelect","select",null,i,t),e.push({event:i,listeners:n}),i.target=Ni)))}function hr(e,i){var t={};return t[e.toLowerCase()]=i.toLowerCase(),t["Webkit"+e]="webkit"+i,t["Moz"+e]="moz"+i,t}var Di={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionend:hr("Transition","TransitionEnd")},Us={},Mc={};It&&(Mc=document.createElement("div").style,"AnimationEvent"in window||(delete Di.animationend.animation,delete Di.animationiteration.animation,delete Di.animationstart.animation),"TransitionEvent"in window||delete Di.transitionend.transition);function hs(e){if(Us[e])return Us[e];if(!Di[e])return e;var i=Di[e],t;for(t in i)if(i.hasOwnProperty(t)&&t in Mc)return Us[e]=i[t];return e}var Fc=hs("animationend"),Ac=hs("animationiteration"),Hc=hs("animationstart"),jc=hs("transitionend"),Bc=new Map,Oa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ni(e,i){Bc.set(e,i),Ti(i,[e])}for(var Ws=0;Ws<Oa.length;Ws++){var Vs=Oa[Ws],sp=Vs.toLowerCase(),op=Vs[0].toUpperCase()+Vs.slice(1);ni(sp,"on"+op)}ni(Fc,"onAnimationEnd");ni(Ac,"onAnimationIteration");ni(Hc,"onAnimationStart");ni("dblclick","onDoubleClick");ni("focusin","onFocus");ni("focusout","onBlur");ni(jc,"onTransitionEnd");Vi("onMouseEnter",["mouseout","mouseover"]);Vi("onMouseLeave",["mouseout","mouseover"]);Vi("onPointerEnter",["pointerout","pointerover"]);Vi("onPointerLeave",["pointerout","pointerover"]);Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lp=new Set("cancel close invalid load scroll toggle".split(" ").concat(vn));function La(e,i,t){var n=e.type||"unknown-event";e.currentTarget=t,sf(n,i,void 0,e),e.currentTarget=null}function Uc(e,i){i=(i&4)!==0;for(var t=0;t<e.length;t++){var n=e[t],r=n.event;n=n.listeners;e:{var s=void 0;if(i)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;La(r,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;La(r,o,u),s=l}}}if(Ar)throw e=Eo,Ar=!1,Eo=null,e}function me(e,i){var t=i[Lo];t===void 0&&(t=i[Lo]=new Set);var n=e+"__bubble";t.has(n)||(Wc(i,e,2,!1),t.add(n))}function Gs(e,i,t){var n=0;i&&(n|=4),Wc(t,e,n,i)}var dr="_reactListening"+Math.random().toString(36).slice(2);function In(e){if(!e[dr]){e[dr]=!0,Qu.forEach(function(t){t!=="selectionchange"&&(lp.has(t)||Gs(t,!1,e),Gs(t,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[dr]||(i[dr]=!0,Gs("selectionchange",!1,i))}}function Wc(e,i,t,n){switch(Rc(i)){case 1:var r=Tf;break;case 4:r=Sf;break;default:r=yl}t=r.bind(null,i,t,e),r=void 0,!So||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(r=!0),n?r!==void 0?e.addEventListener(i,t,{capture:!0,passive:r}):e.addEventListener(i,t,!0):r!==void 0?e.addEventListener(i,t,{passive:r}):e.addEventListener(i,t,!1)}function Zs(e,i,t,n,r){var s=n;if(!(i&1)&&!(i&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=ai(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}dc(function(){var u=s,c=pl(t),h=[];e:{var d=Bc.get(e);if(d!==void 0){var w=xl,v=e;switch(e){case"keypress":if(Pr(t)===0)break e;case"keydown":case"keyup":w=Ff;break;case"focusin":v="focus",w=Hs;break;case"focusout":v="blur",w=Hs;break;case"beforeblur":case"afterblur":w=Hs;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Ta;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Pf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=jf;break;case Fc:case Ac:case Hc:w=kf;break;case jc:w=Uf;break;case"scroll":w=Ef;break;case"wheel":w=Vf;break;case"copy":case"cut":case"paste":w=Df;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Ea}var T=(i&4)!==0,x=!T&&e==="scroll",m=T?d!==null?d+"Capture":null:d;T=[];for(var y=u,S;y!==null;){S=y;var _=S.stateNode;if(S.tag===5&&_!==null&&(S=_,m!==null&&(_=Nn(y,m),_!=null&&T.push(Mn(y,_,S)))),x)break;y=y.return}0<T.length&&(d=new w(d,v,null,t,c),h.push({event:d,listeners:T}))}}if(!(i&7)){e:{if(d=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",d&&t!==xo&&(v=t.relatedTarget||t.fromElement)&&(ai(v)||v[Mt]))break e;if((w||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,w?(v=t.relatedTarget||t.toElement,w=u,v=v?ai(v):null,v!==null&&(x=Si(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(w=null,v=u),w!==v)){if(T=Ta,_="onMouseLeave",m="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(T=Ea,_="onPointerLeave",m="onPointerEnter",y="pointer"),x=w==null?d:bi(w),S=v==null?d:bi(v),d=new T(_,y+"leave",w,t,c),d.target=x,d.relatedTarget=S,_=null,ai(c)===u&&(T=new T(m,y+"enter",v,t,c),T.target=S,T.relatedTarget=x,_=T),x=_,w&&v)t:{for(T=w,m=v,y=0,S=T;S;S=Pi(S))y++;for(S=0,_=m;_;_=Pi(_))S++;for(;0<y-S;)T=Pi(T),y--;for(;0<S-y;)m=Pi(m),S--;for(;y--;){if(T===m||m!==null&&T===m.alternate)break t;T=Pi(T),m=Pi(m)}T=null}else T=null;w!==null&&za(h,d,w,T,!1),v!==null&&x!==null&&za(h,x,v,T,!0)}}e:{if(d=u?bi(u):window,w=d.nodeName&&d.nodeName.toLowerCase(),w==="select"||w==="input"&&d.type==="file")var b=Yf;else if(Ra(d))if(Oc)b=tp;else{b=$f;var O=Jf}else(w=d.nodeName)&&w.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=ep);if(b&&(b=b(e,u))){bc(h,b,t,c);break e}O&&O(e,d,u),e==="focusout"&&(O=d._wrapperState)&&O.controlled&&d.type==="number"&&mo(d,"number",d.value)}switch(O=u?bi(u):window,e){case"focusin":(Ra(O)||O.contentEditable==="true")&&(Ni=O,_o=u,Sn=null);break;case"focusout":Sn=_o=Ni=null;break;case"mousedown":ko=!0;break;case"contextmenu":case"mouseup":case"dragend":ko=!1,ba(h,t,c);break;case"selectionchange":if(rp)break;case"keydown":case"keyup":ba(h,t,c)}var z;if(Sl)e:{switch(e){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else ki?Nc(e,t)&&(M="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(M="onCompositionStart");M&&(kc&&t.locale!=="ko"&&(ki||M!=="onCompositionStart"?M==="onCompositionEnd"&&ki&&(z=_c()):(Gt=c,wl="value"in Gt?Gt.value:Gt.textContent,ki=!0)),O=Wr(u,M),0<O.length&&(M=new Sa(M,e,null,t,c),h.push({event:M,listeners:O}),z?M.data=z:(z=Dc(t),z!==null&&(M.data=z)))),(z=Zf?qf(e,t):Xf(e,t))&&(u=Wr(u,"onBeforeInput"),0<u.length&&(c=new Sa("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=z))}Uc(h,i)})}function Mn(e,i,t){return{instance:e,listener:i,currentTarget:t}}function Wr(e,i){for(var t=i+"Capture",n=[];e!==null;){var r=e,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Nn(e,t),s!=null&&n.unshift(Mn(e,s,r)),s=Nn(e,i),s!=null&&n.push(Mn(e,s,r))),e=e.return}return n}function Pi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function za(e,i,t,n,r){for(var s=i._reactName,a=[];t!==null&&t!==n;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,r?(l=Nn(t,s),l!=null&&a.unshift(Mn(t,l,o))):r||(l=Nn(t,s),l!=null&&a.push(Mn(t,l,o)))),t=t.return}a.length!==0&&e.push({event:i,listeners:a})}var ap=/\r\n?/g,up=/\u0000|\uFFFD/g;function Ia(e){return(typeof e=="string"?e:""+e).replace(ap,`
`).replace(up,"")}function fr(e,i,t){if(i=Ia(i),Ia(e)!==i&&t)throw Error(F(425))}function Vr(){}var No=null,Do=null;function bo(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Oo=typeof setTimeout=="function"?setTimeout:void 0,cp=typeof clearTimeout=="function"?clearTimeout:void 0,Ma=typeof Promise=="function"?Promise:void 0,hp=typeof queueMicrotask=="function"?queueMicrotask:typeof Ma<"u"?function(e){return Ma.resolve(null).then(e).catch(dp)}:Oo;function dp(e){setTimeout(function(){throw e})}function qs(e,i){var t=i,n=0;do{var r=t.nextSibling;if(e.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(n===0){e.removeChild(r),On(i);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=r}while(t);On(i)}function Qt(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return e}function Fa(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(i===0)return e;i--}else t==="/$"&&i++}e=e.previousSibling}return null}var en=Math.random().toString(36).slice(2),Rt="__reactFiber$"+en,Fn="__reactProps$"+en,Mt="__reactContainer$"+en,Lo="__reactEvents$"+en,fp="__reactListeners$"+en,pp="__reactHandles$"+en;function ai(e){var i=e[Rt];if(i)return i;for(var t=e.parentNode;t;){if(i=t[Mt]||t[Rt]){if(t=i.alternate,i.child!==null||t!==null&&t.child!==null)for(e=Fa(e);e!==null;){if(t=e[Rt])return t;e=Fa(e)}return i}e=t,t=e.parentNode}return null}function qn(e){return e=e[Rt]||e[Mt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function bi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(F(33))}function ds(e){return e[Fn]||null}var zo=[],Oi=-1;function ri(e){return{current:e}}function ge(e){0>Oi||(e.current=zo[Oi],zo[Oi]=null,Oi--)}function fe(e,i){Oi++,zo[Oi]=e.current,e.current=i}var ii={},je=ri(ii),qe=ri(!1),mi=ii;function Gi(e,i){var t=e.type.contextTypes;if(!t)return ii;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===i)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=i[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=r),r}function Xe(e){return e=e.childContextTypes,e!=null}function Gr(){ge(qe),ge(je)}function Aa(e,i,t){if(je.current!==ii)throw Error(F(168));fe(je,i),fe(qe,t)}function Vc(e,i,t){var n=e.stateNode;if(i=i.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var r in n)if(!(r in i))throw Error(F(108,Yd(e)||"Unknown",r));return xe({},t,n)}function Zr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ii,mi=je.current,fe(je,e),fe(qe,qe.current),!0}function Ha(e,i,t){var n=e.stateNode;if(!n)throw Error(F(169));t?(e=Vc(e,i,mi),n.__reactInternalMemoizedMergedChildContext=e,ge(qe),ge(je),fe(je,e)):ge(qe),fe(qe,t)}var bt=null,fs=!1,Xs=!1;function Gc(e){bt===null?bt=[e]:bt.push(e)}function mp(e){fs=!0,Gc(e)}function si(){if(!Xs&&bt!==null){Xs=!0;var e=0,i=ae;try{var t=bt;for(ae=1;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}bt=null,fs=!1}catch(r){throw bt!==null&&(bt=bt.slice(e+1)),gc(ml,si),r}finally{ae=i,Xs=!1}}return null}var Li=[],zi=0,qr=null,Xr=0,lt=[],at=0,gi=null,Ot=1,Lt="";function oi(e,i){Li[zi++]=Xr,Li[zi++]=qr,qr=e,Xr=i}function Zc(e,i,t){lt[at++]=Ot,lt[at++]=Lt,lt[at++]=gi,gi=e;var n=Ot;e=Lt;var r=32-wt(n)-1;n&=~(1<<r),t+=1;var s=32-wt(i)+r;if(30<s){var a=r-r%5;s=(n&(1<<a)-1).toString(32),n>>=a,r-=a,Ot=1<<32-wt(i)+r|t<<r|n,Lt=s+e}else Ot=1<<s|t<<r|n,Lt=e}function Cl(e){e.return!==null&&(oi(e,1),Zc(e,1,0))}function Pl(e){for(;e===qr;)qr=Li[--zi],Li[zi]=null,Xr=Li[--zi],Li[zi]=null;for(;e===gi;)gi=lt[--at],lt[at]=null,Lt=lt[--at],lt[at]=null,Ot=lt[--at],lt[at]=null}var tt=null,et=null,ve=!1,yt=null;function qc(e,i){var t=ut(5,null,null,0);t.elementType="DELETED",t.stateNode=i,t.return=e,i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)}function ja(e,i){switch(e.tag){case 5:var t=e.type;return i=i.nodeType!==1||t.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(e.stateNode=i,tt=e,et=Qt(i.firstChild),!0):!1;case 6:return i=e.pendingProps===""||i.nodeType!==3?null:i,i!==null?(e.stateNode=i,tt=e,et=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(t=gi!==null?{id:Ot,overflow:Lt}:null,e.memoizedState={dehydrated:i,treeContext:t,retryLane:1073741824},t=ut(18,null,null,0),t.stateNode=i,t.return=e,e.child=t,tt=e,et=null,!0):!1;default:return!1}}function Io(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Mo(e){if(ve){var i=et;if(i){var t=i;if(!ja(e,i)){if(Io(e))throw Error(F(418));i=Qt(t.nextSibling);var n=tt;i&&ja(e,i)?qc(n,t):(e.flags=e.flags&-4097|2,ve=!1,tt=e)}}else{if(Io(e))throw Error(F(418));e.flags=e.flags&-4097|2,ve=!1,tt=e}}}function Ba(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;tt=e}function pr(e){if(e!==tt)return!1;if(!ve)return Ba(e),ve=!0,!1;var i;if((i=e.tag!==3)&&!(i=e.tag!==5)&&(i=e.type,i=i!=="head"&&i!=="body"&&!bo(e.type,e.memoizedProps)),i&&(i=et)){if(Io(e))throw Xc(),Error(F(418));for(;i;)qc(e,i),i=Qt(i.nextSibling)}if(Ba(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(F(317));e:{for(e=e.nextSibling,i=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"){if(i===0){et=Qt(e.nextSibling);break e}i--}else t!=="$"&&t!=="$!"&&t!=="$?"||i++}e=e.nextSibling}et=null}}else et=tt?Qt(e.stateNode.nextSibling):null;return!0}function Xc(){for(var e=et;e;)e=Qt(e.nextSibling)}function Zi(){et=tt=null,ve=!1}function Rl(e){yt===null?yt=[e]:yt.push(e)}var gp=Ht.ReactCurrentBatchConfig;function cn(e,i,t){if(e=t.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(F(309));var n=t.stateNode}if(!n)throw Error(F(147,e));var r=n,s=""+e;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===s?i.ref:(i=function(a){var o=r.refs;a===null?delete o[s]:o[s]=a},i._stringRef=s,i)}if(typeof e!="string")throw Error(F(284));if(!t._owner)throw Error(F(290,e))}return e}function mr(e,i){throw e=Object.prototype.toString.call(i),Error(F(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e))}function Ua(e){var i=e._init;return i(e._payload)}function Kc(e){function i(m,y){if(e){var S=m.deletions;S===null?(m.deletions=[y],m.flags|=16):S.push(y)}}function t(m,y){if(!e)return null;for(;y!==null;)i(m,y),y=y.sibling;return null}function n(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function r(m,y){return m=ei(m,y),m.index=0,m.sibling=null,m}function s(m,y,S){return m.index=S,e?(S=m.alternate,S!==null?(S=S.index,S<y?(m.flags|=2,y):S):(m.flags|=2,y)):(m.flags|=1048576,y)}function a(m){return e&&m.alternate===null&&(m.flags|=2),m}function o(m,y,S,_){return y===null||y.tag!==6?(y=to(S,m.mode,_),y.return=m,y):(y=r(y,S),y.return=m,y)}function l(m,y,S,_){var b=S.type;return b===_i?c(m,y,S.props.children,_,S.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Bt&&Ua(b)===y.type)?(_=r(y,S.props),_.ref=cn(m,y,S),_.return=m,_):(_=Or(S.type,S.key,S.props,null,m.mode,_),_.ref=cn(m,y,S),_.return=m,_)}function u(m,y,S,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=io(S,m.mode,_),y.return=m,y):(y=r(y,S.children||[]),y.return=m,y)}function c(m,y,S,_,b){return y===null||y.tag!==7?(y=fi(S,m.mode,_,b),y.return=m,y):(y=r(y,S),y.return=m,y)}function h(m,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=to(""+y,m.mode,S),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case rr:return S=Or(y.type,y.key,y.props,null,m.mode,S),S.ref=cn(m,null,y),S.return=m,S;case Ri:return y=io(y,m.mode,S),y.return=m,y;case Bt:var _=y._init;return h(m,_(y._payload),S)}if(mn(y)||sn(y))return y=fi(y,m.mode,S,null),y.return=m,y;mr(m,y)}return null}function d(m,y,S,_){var b=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return b!==null?null:o(m,y,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case rr:return S.key===b?l(m,y,S,_):null;case Ri:return S.key===b?u(m,y,S,_):null;case Bt:return b=S._init,d(m,y,b(S._payload),_)}if(mn(S)||sn(S))return b!==null?null:c(m,y,S,_,null);mr(m,S)}return null}function w(m,y,S,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(S)||null,o(y,m,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case rr:return m=m.get(_.key===null?S:_.key)||null,l(y,m,_,b);case Ri:return m=m.get(_.key===null?S:_.key)||null,u(y,m,_,b);case Bt:var O=_._init;return w(m,y,S,O(_._payload),b)}if(mn(_)||sn(_))return m=m.get(S)||null,c(y,m,_,b,null);mr(y,_)}return null}function v(m,y,S,_){for(var b=null,O=null,z=y,M=y=0,U=null;z!==null&&M<S.length;M++){z.index>M?(U=z,z=null):U=z.sibling;var W=d(m,z,S[M],_);if(W===null){z===null&&(z=U);break}e&&z&&W.alternate===null&&i(m,z),y=s(W,y,M),O===null?b=W:O.sibling=W,O=W,z=U}if(M===S.length)return t(m,z),ve&&oi(m,M),b;if(z===null){for(;M<S.length;M++)z=h(m,S[M],_),z!==null&&(y=s(z,y,M),O===null?b=z:O.sibling=z,O=z);return ve&&oi(m,M),b}for(z=n(m,z);M<S.length;M++)U=w(z,m,M,S[M],_),U!==null&&(e&&U.alternate!==null&&z.delete(U.key===null?M:U.key),y=s(U,y,M),O===null?b=U:O.sibling=U,O=U);return e&&z.forEach(function(te){return i(m,te)}),ve&&oi(m,M),b}function T(m,y,S,_){var b=sn(S);if(typeof b!="function")throw Error(F(150));if(S=b.call(S),S==null)throw Error(F(151));for(var O=b=null,z=y,M=y=0,U=null,W=S.next();z!==null&&!W.done;M++,W=S.next()){z.index>M?(U=z,z=null):U=z.sibling;var te=d(m,z,W.value,_);if(te===null){z===null&&(z=U);break}e&&z&&te.alternate===null&&i(m,z),y=s(te,y,M),O===null?b=te:O.sibling=te,O=te,z=U}if(W.done)return t(m,z),ve&&oi(m,M),b;if(z===null){for(;!W.done;M++,W=S.next())W=h(m,W.value,_),W!==null&&(y=s(W,y,M),O===null?b=W:O.sibling=W,O=W);return ve&&oi(m,M),b}for(z=n(m,z);!W.done;M++,W=S.next())W=w(z,m,M,W.value,_),W!==null&&(e&&W.alternate!==null&&z.delete(W.key===null?M:W.key),y=s(W,y,M),O===null?b=W:O.sibling=W,O=W);return e&&z.forEach(function(ne){return i(m,ne)}),ve&&oi(m,M),b}function x(m,y,S,_){if(typeof S=="object"&&S!==null&&S.type===_i&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case rr:e:{for(var b=S.key,O=y;O!==null;){if(O.key===b){if(b=S.type,b===_i){if(O.tag===7){t(m,O.sibling),y=r(O,S.props.children),y.return=m,m=y;break e}}else if(O.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Bt&&Ua(b)===O.type){t(m,O.sibling),y=r(O,S.props),y.ref=cn(m,O,S),y.return=m,m=y;break e}t(m,O);break}else i(m,O);O=O.sibling}S.type===_i?(y=fi(S.props.children,m.mode,_,S.key),y.return=m,m=y):(_=Or(S.type,S.key,S.props,null,m.mode,_),_.ref=cn(m,y,S),_.return=m,m=_)}return a(m);case Ri:e:{for(O=S.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){t(m,y.sibling),y=r(y,S.children||[]),y.return=m,m=y;break e}else{t(m,y);break}else i(m,y);y=y.sibling}y=io(S,m.mode,_),y.return=m,m=y}return a(m);case Bt:return O=S._init,x(m,y,O(S._payload),_)}if(mn(S))return v(m,y,S,_);if(sn(S))return T(m,y,S,_);mr(m,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(t(m,y.sibling),y=r(y,S),y.return=m,m=y):(t(m,y),y=to(S,m.mode,_),y.return=m,m=y),a(m)):t(m,y)}return x}var qi=Kc(!0),Qc=Kc(!1),Kr=ri(null),Qr=null,Ii=null,_l=null;function kl(){_l=Ii=Qr=null}function Nl(e){var i=Kr.current;ge(Kr),e._currentValue=i}function Fo(e,i,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,n!==null&&(n.childLanes|=i)):n!==null&&(n.childLanes&i)!==i&&(n.childLanes|=i),e===t)break;e=e.return}}function Ui(e,i){Qr=e,_l=Ii=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&i&&(Ze=!0),e.firstContext=null)}function ht(e){var i=e._currentValue;if(_l!==e)if(e={context:e,memoizedValue:i,next:null},Ii===null){if(Qr===null)throw Error(F(308));Ii=e,Qr.dependencies={lanes:0,firstContext:e}}else Ii=Ii.next=e;return i}var ui=null;function Dl(e){ui===null?ui=[e]:ui.push(e)}function Yc(e,i,t,n){var r=i.interleaved;return r===null?(t.next=t,Dl(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ft(e,n)}function Ft(e,i){e.lanes|=i;var t=e.alternate;for(t!==null&&(t.lanes|=i),t=e,e=e.return;e!==null;)e.childLanes|=i,t=e.alternate,t!==null&&(t.childLanes|=i),t=e,e=e.return;return t.tag===3?t.stateNode:null}var Ut=!1;function bl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function zt(e,i){return{eventTime:e,lane:i,tag:0,payload:null,callback:null,next:null}}function Yt(e,i,t){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ie&2){var r=n.pending;return r===null?i.next=i:(i.next=r.next,r.next=i),n.pending=i,Ft(e,t)}return r=n.interleaved,r===null?(i.next=i,Dl(n)):(i.next=r.next,r.next=i),n.interleaved=i,Ft(e,t)}function Rr(e,i,t){if(i=i.updateQueue,i!==null&&(i=i.shared,(t&4194240)!==0)){var n=i.lanes;n&=e.pendingLanes,t|=n,i.lanes=t,gl(e,t)}}function Wa(e,i){var t=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=i:s=s.next=i}else r=s=i;t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=i:e.next=i,t.lastBaseUpdate=i}function Yr(e,i,t,n){var r=e.updateQueue;Ut=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;a=0,c=u=l=null,o=s;do{var d=o.lane,w=o.eventTime;if((n&d)===d){c!==null&&(c=c.next={eventTime:w,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,T=o;switch(d=i,w=t,T.tag){case 1:if(v=T.payload,typeof v=="function"){h=v.call(w,h,d);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=T.payload,d=typeof v=="function"?v.call(w,h,d):v,d==null)break e;h=xe({},h,d);break e;case 2:Ut=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=r.effects,d===null?r.effects=[o]:d.push(o))}else w={eventTime:w,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=w,l=h):c=c.next=w,a|=d;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;d=o,o=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(!0);if(c===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,i=r.shared.interleaved,i!==null){r=i;do a|=r.lane,r=r.next;while(r!==i)}else s===null&&(r.shared.lanes=0);yi|=a,e.lanes=a,e.memoizedState=h}}function Va(e,i,t){if(e=i.effects,i.effects=null,e!==null)for(i=0;i<e.length;i++){var n=e[i],r=n.callback;if(r!==null){if(n.callback=null,n=t,typeof r!="function")throw Error(F(191,r));r.call(n)}}}var Xn={},kt=ri(Xn),An=ri(Xn),Hn=ri(Xn);function ci(e){if(e===Xn)throw Error(F(174));return e}function Ol(e,i){switch(fe(Hn,i),fe(An,e),fe(kt,Xn),e=i.nodeType,e){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:vo(null,"");break;default:e=e===8?i.parentNode:i,i=e.namespaceURI||null,e=e.tagName,i=vo(i,e)}ge(kt),fe(kt,i)}function Xi(){ge(kt),ge(An),ge(Hn)}function $c(e){ci(Hn.current);var i=ci(kt.current),t=vo(i,e.type);i!==t&&(fe(An,e),fe(kt,t))}function Ll(e){An.current===e&&(ge(kt),ge(An))}var ye=ri(0);function Jr(e){for(var i=e;i!==null;){if(i.tag===13){var t=i.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Ks=[];function zl(){for(var e=0;e<Ks.length;e++)Ks[e]._workInProgressVersionPrimary=null;Ks.length=0}var _r=Ht.ReactCurrentDispatcher,Qs=Ht.ReactCurrentBatchConfig,vi=0,we=null,Re=null,De=null,$r=!1,En=!1,jn=0,vp=0;function Me(){throw Error(F(321))}function Il(e,i){if(i===null)return!1;for(var t=0;t<i.length&&t<e.length;t++)if(!Tt(e[t],i[t]))return!1;return!0}function Ml(e,i,t,n,r,s){if(vi=s,we=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,_r.current=e===null||e.memoizedState===null?Tp:Sp,e=t(n,r),En){s=0;do{if(En=!1,jn=0,25<=s)throw Error(F(301));s+=1,De=Re=null,i.updateQueue=null,_r.current=Ep,e=t(n,r)}while(En)}if(_r.current=es,i=Re!==null&&Re.next!==null,vi=0,De=Re=we=null,$r=!1,i)throw Error(F(300));return e}function Fl(){var e=jn!==0;return jn=0,e}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?we.memoizedState=De=e:De=De.next=e,De}function dt(){if(Re===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var i=De===null?we.memoizedState:De.next;if(i!==null)De=i,Re=e;else{if(e===null)throw Error(F(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},De===null?we.memoizedState=De=e:De=De.next=e}return De}function Bn(e,i){return typeof i=="function"?i(e):i}function Ys(e){var i=dt(),t=i.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=e;var n=Re,r=n.baseQueue,s=t.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}n.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,n=n.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((vi&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=n):l=l.next=h,we.lanes|=c,yi|=c}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,Tt(n,i.memoizedState)||(Ze=!0),i.memoizedState=n,i.baseState=a,i.baseQueue=l,t.lastRenderedState=n}if(e=t.interleaved,e!==null){r=e;do s=r.lane,we.lanes|=s,yi|=s,r=r.next;while(r!==e)}else r===null&&(t.lanes=0);return[i.memoizedState,t.dispatch]}function Js(e){var i=dt(),t=i.queue;if(t===null)throw Error(F(311));t.lastRenderedReducer=e;var n=t.dispatch,r=t.pending,s=i.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=e(s,a.action),a=a.next;while(a!==r);Tt(s,i.memoizedState)||(Ze=!0),i.memoizedState=s,i.baseQueue===null&&(i.baseState=s),t.lastRenderedState=s}return[s,n]}function eh(){}function th(e,i){var t=we,n=dt(),r=i(),s=!Tt(n.memoizedState,r);if(s&&(n.memoizedState=r,Ze=!0),n=n.queue,Al(rh.bind(null,t,n,e),[e]),n.getSnapshot!==i||s||De!==null&&De.memoizedState.tag&1){if(t.flags|=2048,Un(9,nh.bind(null,t,n,r,i),void 0,null),be===null)throw Error(F(349));vi&30||ih(t,i,r)}return r}function ih(e,i,t){e.flags|=16384,e={getSnapshot:i,value:t},i=we.updateQueue,i===null?(i={lastEffect:null,stores:null},we.updateQueue=i,i.stores=[e]):(t=i.stores,t===null?i.stores=[e]:t.push(e))}function nh(e,i,t,n){i.value=t,i.getSnapshot=n,sh(i)&&oh(e)}function rh(e,i,t){return t(function(){sh(i)&&oh(e)})}function sh(e){var i=e.getSnapshot;e=e.value;try{var t=i();return!Tt(e,t)}catch{return!0}}function oh(e){var i=Ft(e,1);i!==null&&xt(i,e,1,-1)}function Ga(e){var i=Pt();return typeof e=="function"&&(e=e()),i.memoizedState=i.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bn,lastRenderedState:e},i.queue=e,e=e.dispatch=xp.bind(null,we,e),[i.memoizedState,e]}function Un(e,i,t,n){return e={tag:e,create:i,destroy:t,deps:n,next:null},i=we.updateQueue,i===null?(i={lastEffect:null,stores:null},we.updateQueue=i,i.lastEffect=e.next=e):(t=i.lastEffect,t===null?i.lastEffect=e.next=e:(n=t.next,t.next=e,e.next=n,i.lastEffect=e)),e}function lh(){return dt().memoizedState}function kr(e,i,t,n){var r=Pt();we.flags|=e,r.memoizedState=Un(1|i,t,void 0,n===void 0?null:n)}function ps(e,i,t,n){var r=dt();n=n===void 0?null:n;var s=void 0;if(Re!==null){var a=Re.memoizedState;if(s=a.destroy,n!==null&&Il(n,a.deps)){r.memoizedState=Un(i,t,s,n);return}}we.flags|=e,r.memoizedState=Un(1|i,t,s,n)}function Za(e,i){return kr(8390656,8,e,i)}function Al(e,i){return ps(2048,8,e,i)}function ah(e,i){return ps(4,2,e,i)}function uh(e,i){return ps(4,4,e,i)}function ch(e,i){if(typeof i=="function")return e=e(),i(e),function(){i(null)};if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function hh(e,i,t){return t=t!=null?t.concat([e]):null,ps(4,4,ch.bind(null,i,e),t)}function Hl(){}function dh(e,i){var t=dt();i=i===void 0?null:i;var n=t.memoizedState;return n!==null&&i!==null&&Il(i,n[1])?n[0]:(t.memoizedState=[e,i],e)}function fh(e,i){var t=dt();i=i===void 0?null:i;var n=t.memoizedState;return n!==null&&i!==null&&Il(i,n[1])?n[0]:(e=e(),t.memoizedState=[e,i],e)}function ph(e,i,t){return vi&21?(Tt(t,i)||(t=wc(),we.lanes|=t,yi|=t,e.baseState=!0),i):(e.baseState&&(e.baseState=!1,Ze=!0),e.memoizedState=t)}function yp(e,i){var t=ae;ae=t!==0&&4>t?t:4,e(!0);var n=Qs.transition;Qs.transition={};try{e(!1),i()}finally{ae=t,Qs.transition=n}}function mh(){return dt().memoizedState}function wp(e,i,t){var n=$t(e);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},gh(e))vh(i,t);else if(t=Yc(e,i,t,n),t!==null){var r=Ue();xt(t,e,n,r),yh(t,i,n)}}function xp(e,i,t){var n=$t(e),r={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(gh(e))vh(i,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=i.lastRenderedReducer,s!==null))try{var a=i.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,Tt(o,a)){var l=i.interleaved;l===null?(r.next=r,Dl(i)):(r.next=l.next,l.next=r),i.interleaved=r;return}}catch{}finally{}t=Yc(e,i,r,n),t!==null&&(r=Ue(),xt(t,e,n,r),yh(t,i,n))}}function gh(e){var i=e.alternate;return e===we||i!==null&&i===we}function vh(e,i){En=$r=!0;var t=e.pending;t===null?i.next=i:(i.next=t.next,t.next=i),e.pending=i}function yh(e,i,t){if(t&4194240){var n=i.lanes;n&=e.pendingLanes,t|=n,i.lanes=t,gl(e,t)}}var es={readContext:ht,useCallback:Me,useContext:Me,useEffect:Me,useImperativeHandle:Me,useInsertionEffect:Me,useLayoutEffect:Me,useMemo:Me,useReducer:Me,useRef:Me,useState:Me,useDebugValue:Me,useDeferredValue:Me,useTransition:Me,useMutableSource:Me,useSyncExternalStore:Me,useId:Me,unstable_isNewReconciler:!1},Tp={readContext:ht,useCallback:function(e,i){return Pt().memoizedState=[e,i===void 0?null:i],e},useContext:ht,useEffect:Za,useImperativeHandle:function(e,i,t){return t=t!=null?t.concat([e]):null,kr(4194308,4,ch.bind(null,i,e),t)},useLayoutEffect:function(e,i){return kr(4194308,4,e,i)},useInsertionEffect:function(e,i){return kr(4,2,e,i)},useMemo:function(e,i){var t=Pt();return i=i===void 0?null:i,e=e(),t.memoizedState=[e,i],e},useReducer:function(e,i,t){var n=Pt();return i=t!==void 0?t(i):i,n.memoizedState=n.baseState=i,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},n.queue=e,e=e.dispatch=wp.bind(null,we,e),[n.memoizedState,e]},useRef:function(e){var i=Pt();return e={current:e},i.memoizedState=e},useState:Ga,useDebugValue:Hl,useDeferredValue:function(e){return Pt().memoizedState=e},useTransition:function(){var e=Ga(!1),i=e[0];return e=yp.bind(null,e[1]),Pt().memoizedState=e,[i,e]},useMutableSource:function(){},useSyncExternalStore:function(e,i,t){var n=we,r=Pt();if(ve){if(t===void 0)throw Error(F(407));t=t()}else{if(t=i(),be===null)throw Error(F(349));vi&30||ih(n,i,t)}r.memoizedState=t;var s={value:t,getSnapshot:i};return r.queue=s,Za(rh.bind(null,n,s,e),[e]),n.flags|=2048,Un(9,nh.bind(null,n,s,t,i),void 0,null),t},useId:function(){var e=Pt(),i=be.identifierPrefix;if(ve){var t=Lt,n=Ot;t=(n&~(1<<32-wt(n)-1)).toString(32)+t,i=":"+i+"R"+t,t=jn++,0<t&&(i+="H"+t.toString(32)),i+=":"}else t=vp++,i=":"+i+"r"+t.toString(32)+":";return e.memoizedState=i},unstable_isNewReconciler:!1},Sp={readContext:ht,useCallback:dh,useContext:ht,useEffect:Al,useImperativeHandle:hh,useInsertionEffect:ah,useLayoutEffect:uh,useMemo:fh,useReducer:Ys,useRef:lh,useState:function(){return Ys(Bn)},useDebugValue:Hl,useDeferredValue:function(e){var i=dt();return ph(i,Re.memoizedState,e)},useTransition:function(){var e=Ys(Bn)[0],i=dt().memoizedState;return[e,i]},useMutableSource:eh,useSyncExternalStore:th,useId:mh,unstable_isNewReconciler:!1},Ep={readContext:ht,useCallback:dh,useContext:ht,useEffect:Al,useImperativeHandle:hh,useInsertionEffect:ah,useLayoutEffect:uh,useMemo:fh,useReducer:Js,useRef:lh,useState:function(){return Js(Bn)},useDebugValue:Hl,useDeferredValue:function(e){var i=dt();return Re===null?i.memoizedState=e:ph(i,Re.memoizedState,e)},useTransition:function(){var e=Js(Bn)[0],i=dt().memoizedState;return[e,i]},useMutableSource:eh,useSyncExternalStore:th,useId:mh,unstable_isNewReconciler:!1};function gt(e,i){if(e&&e.defaultProps){i=xe({},i),e=e.defaultProps;for(var t in e)i[t]===void 0&&(i[t]=e[t]);return i}return i}function Ao(e,i,t,n){i=e.memoizedState,t=t(n,i),t=t==null?i:xe({},i,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var ms={isMounted:function(e){return(e=e._reactInternals)?Si(e)===e:!1},enqueueSetState:function(e,i,t){e=e._reactInternals;var n=Ue(),r=$t(e),s=zt(n,r);s.payload=i,t!=null&&(s.callback=t),i=Yt(e,s,r),i!==null&&(xt(i,e,r,n),Rr(i,e,r))},enqueueReplaceState:function(e,i,t){e=e._reactInternals;var n=Ue(),r=$t(e),s=zt(n,r);s.tag=1,s.payload=i,t!=null&&(s.callback=t),i=Yt(e,s,r),i!==null&&(xt(i,e,r,n),Rr(i,e,r))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var t=Ue(),n=$t(e),r=zt(t,n);r.tag=2,i!=null&&(r.callback=i),i=Yt(e,r,n),i!==null&&(xt(i,e,n,t),Rr(i,e,n))}};function qa(e,i,t,n,r,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,a):i.prototype&&i.prototype.isPureReactComponent?!zn(t,n)||!zn(r,s):!0}function wh(e,i,t){var n=!1,r=ii,s=i.contextType;return typeof s=="object"&&s!==null?s=ht(s):(r=Xe(i)?mi:je.current,n=i.contextTypes,s=(n=n!=null)?Gi(e,r):ii),i=new i(t,s),e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=ms,e.stateNode=i,i._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),i}function Xa(e,i,t,n){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(t,n),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(t,n),i.state!==e&&ms.enqueueReplaceState(i,i.state,null)}function Ho(e,i,t,n){var r=e.stateNode;r.props=t,r.state=e.memoizedState,r.refs={},bl(e);var s=i.contextType;typeof s=="object"&&s!==null?r.context=ht(s):(s=Xe(i)?mi:je.current,r.context=Gi(e,s)),r.state=e.memoizedState,s=i.getDerivedStateFromProps,typeof s=="function"&&(Ao(e,i,s,t),r.state=e.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(i=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),i!==r.state&&ms.enqueueReplaceState(r,r.state,null),Yr(e,t,r,n),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function Ki(e,i){try{var t="",n=i;do t+=Qd(n),n=n.return;while(n);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:i,stack:r,digest:null}}function $s(e,i,t){return{value:e,source:null,stack:t??null,digest:i??null}}function jo(e,i){try{console.error(i.value)}catch(t){setTimeout(function(){throw t})}}var Cp=typeof WeakMap=="function"?WeakMap:Map;function xh(e,i,t){t=zt(-1,t),t.tag=3,t.payload={element:null};var n=i.value;return t.callback=function(){is||(is=!0,Qo=n),jo(e,i)},t}function Th(e,i,t){t=zt(-1,t),t.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var r=i.value;t.payload=function(){return n(r)},t.callback=function(){jo(e,i)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){jo(e,i),typeof n!="function"&&(Jt===null?Jt=new Set([this]):Jt.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})}),t}function Ka(e,i,t){var n=e.pingCache;if(n===null){n=e.pingCache=new Cp;var r=new Set;n.set(i,r)}else r=n.get(i),r===void 0&&(r=new Set,n.set(i,r));r.has(t)||(r.add(t),e=Ap.bind(null,e,i,t),i.then(e,e))}function Qa(e){do{var i;if((i=e.tag===13)&&(i=e.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return e;e=e.return}while(e!==null);return null}function Ya(e,i,t,n,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===i?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(i=zt(-1,1),i.tag=2,Yt(t,i,1))),t.lanes|=1),e)}var Pp=Ht.ReactCurrentOwner,Ze=!1;function Be(e,i,t,n){i.child=e===null?Qc(i,null,t,n):qi(i,e.child,t,n)}function Ja(e,i,t,n,r){t=t.render;var s=i.ref;return Ui(i,r),n=Ml(e,i,t,n,s,r),t=Fl(),e!==null&&!Ze?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~r,At(e,i,r)):(ve&&t&&Cl(i),i.flags|=1,Be(e,i,n,r),i.child)}function $a(e,i,t,n,r){if(e===null){var s=t.type;return typeof s=="function"&&!ql(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(i.tag=15,i.type=s,Sh(e,i,s,n,r)):(e=Or(t.type,null,n,i,i.mode,r),e.ref=i.ref,e.return=i,i.child=e)}if(s=e.child,!(e.lanes&r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:zn,t(a,n)&&e.ref===i.ref)return At(e,i,r)}return i.flags|=1,e=ei(s,n),e.ref=i.ref,e.return=i,i.child=e}function Sh(e,i,t,n,r){if(e!==null){var s=e.memoizedProps;if(zn(s,n)&&e.ref===i.ref)if(Ze=!1,i.pendingProps=n=s,(e.lanes&r)!==0)e.flags&131072&&(Ze=!0);else return i.lanes=e.lanes,At(e,i,r)}return Bo(e,i,t,n,r)}function Eh(e,i,t){var n=i.pendingProps,r=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(Fi,$e),$e|=t;else{if(!(t&1073741824))return e=s!==null?s.baseLanes|t:t,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:e,cachePool:null,transitions:null},i.updateQueue=null,fe(Fi,$e),$e|=e,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,fe(Fi,$e),$e|=n}else s!==null?(n=s.baseLanes|t,i.memoizedState=null):n=t,fe(Fi,$e),$e|=n;return Be(e,i,r,t),i.child}function Ch(e,i){var t=i.ref;(e===null&&t!==null||e!==null&&e.ref!==t)&&(i.flags|=512,i.flags|=2097152)}function Bo(e,i,t,n,r){var s=Xe(t)?mi:je.current;return s=Gi(i,s),Ui(i,r),t=Ml(e,i,t,n,s,r),n=Fl(),e!==null&&!Ze?(i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~r,At(e,i,r)):(ve&&n&&Cl(i),i.flags|=1,Be(e,i,t,r),i.child)}function eu(e,i,t,n,r){if(Xe(t)){var s=!0;Zr(i)}else s=!1;if(Ui(i,r),i.stateNode===null)Nr(e,i),wh(i,t,n),Ho(i,t,n,r),n=!0;else if(e===null){var a=i.stateNode,o=i.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=ht(u):(u=Xe(t)?mi:je.current,u=Gi(i,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&Xa(i,a,n,u),Ut=!1;var d=i.memoizedState;a.state=d,Yr(i,n,a,r),l=i.memoizedState,o!==n||d!==l||qe.current||Ut?(typeof c=="function"&&(Ao(i,t,c,n),l=i.memoizedState),(o=Ut||qa(i,t,o,n,d,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(i.flags|=4194308)):(typeof a.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=n,i.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(i.flags|=4194308),n=!1)}else{a=i.stateNode,Jc(e,i),o=i.memoizedProps,u=i.type===i.elementType?o:gt(i.type,o),a.props=u,h=i.pendingProps,d=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=ht(l):(l=Xe(t)?mi:je.current,l=Gi(i,l));var w=t.getDerivedStateFromProps;(c=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||d!==l)&&Xa(i,a,n,l),Ut=!1,d=i.memoizedState,a.state=d,Yr(i,n,a,r);var v=i.memoizedState;o!==h||d!==v||qe.current||Ut?(typeof w=="function"&&(Ao(i,t,w,n),v=i.memoizedState),(u=Ut||qa(i,t,u,n,d,v,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,l)),typeof a.componentDidUpdate=="function"&&(i.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(i.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(i.flags|=1024),i.memoizedProps=n,i.memoizedState=v),a.props=n,a.state=v,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(i.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(i.flags|=1024),n=!1)}return Uo(e,i,t,n,s,r)}function Uo(e,i,t,n,r,s){Ch(e,i);var a=(i.flags&128)!==0;if(!n&&!a)return r&&Ha(i,t,!1),At(e,i,s);n=i.stateNode,Pp.current=i;var o=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return i.flags|=1,e!==null&&a?(i.child=qi(i,e.child,null,s),i.child=qi(i,null,o,s)):Be(e,i,o,s),i.memoizedState=n.state,r&&Ha(i,t,!0),i.child}function Ph(e){var i=e.stateNode;i.pendingContext?Aa(e,i.pendingContext,i.pendingContext!==i.context):i.context&&Aa(e,i.context,!1),Ol(e,i.containerInfo)}function tu(e,i,t,n,r){return Zi(),Rl(r),i.flags|=256,Be(e,i,t,n),i.child}var Wo={dehydrated:null,treeContext:null,retryLane:0};function Vo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Rh(e,i,t){var n=i.pendingProps,r=ye.current,s=!1,a=(i.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(r&2)!==0),o?(s=!0,i.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),fe(ye,r&1),e===null)return Mo(i),e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(i.mode&1?e.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(a=n.children,e=n.fallback,s?(n=i.mode,s=i.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=ys(a,n,0,null),e=fi(e,n,t,null),s.return=i,e.return=i,s.sibling=e,i.child=s,i.child.memoizedState=Vo(t),i.memoizedState=Wo,e):jl(i,a));if(r=e.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return Rp(e,i,a,n,o,r,t);if(s){s=n.fallback,a=i.mode,r=e.child,o=r.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&i.child!==r?(n=i.child,n.childLanes=0,n.pendingProps=l,i.deletions=null):(n=ei(r,l),n.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=ei(o,s):(s=fi(s,a,t,null),s.flags|=2),s.return=i,n.return=i,n.sibling=s,i.child=n,n=s,s=i.child,a=e.child.memoizedState,a=a===null?Vo(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~t,i.memoizedState=Wo,n}return s=e.child,e=s.sibling,n=ei(s,{mode:"visible",children:n.children}),!(i.mode&1)&&(n.lanes=t),n.return=i,n.sibling=null,e!==null&&(t=i.deletions,t===null?(i.deletions=[e],i.flags|=16):t.push(e)),i.child=n,i.memoizedState=null,n}function jl(e,i){return i=ys({mode:"visible",children:i},e.mode,0,null),i.return=e,e.child=i}function gr(e,i,t,n){return n!==null&&Rl(n),qi(i,e.child,null,t),e=jl(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Rp(e,i,t,n,r,s,a){if(t)return i.flags&256?(i.flags&=-257,n=$s(Error(F(422))),gr(e,i,a,n)):i.memoizedState!==null?(i.child=e.child,i.flags|=128,null):(s=n.fallback,r=i.mode,n=ys({mode:"visible",children:n.children},r,0,null),s=fi(s,r,a,null),s.flags|=2,n.return=i,s.return=i,n.sibling=s,i.child=n,i.mode&1&&qi(i,e.child,null,a),i.child.memoizedState=Vo(a),i.memoizedState=Wo,s);if(!(i.mode&1))return gr(e,i,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(F(419)),n=$s(s,n,void 0),gr(e,i,a,n)}if(o=(a&e.childLanes)!==0,Ze||o){if(n=be,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ft(e,r),xt(n,e,r,-1))}return Zl(),n=$s(Error(F(421))),gr(e,i,a,n)}return r.data==="$?"?(i.flags|=128,i.child=e.child,i=Hp.bind(null,e),r._reactRetry=i,null):(e=s.treeContext,et=Qt(r.nextSibling),tt=i,ve=!0,yt=null,e!==null&&(lt[at++]=Ot,lt[at++]=Lt,lt[at++]=gi,Ot=e.id,Lt=e.overflow,gi=i),i=jl(i,n.children),i.flags|=4096,i)}function iu(e,i,t){e.lanes|=i;var n=e.alternate;n!==null&&(n.lanes|=i),Fo(e.return,i,t)}function eo(e,i,t,n,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r}:(s.isBackwards=i,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=r)}function _h(e,i,t){var n=i.pendingProps,r=n.revealOrder,s=n.tail;if(Be(e,i,n.children,t),n=ye.current,n&2)n=n&1|2,i.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&iu(e,t,i);else if(e.tag===19)iu(e,t,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(fe(ye,n),!(i.mode&1))i.memoizedState=null;else switch(r){case"forwards":for(t=i.child,r=null;t!==null;)e=t.alternate,e!==null&&Jr(e)===null&&(r=t),t=t.sibling;t=r,t===null?(r=i.child,i.child=null):(r=t.sibling,t.sibling=null),eo(i,!1,r,t,s);break;case"backwards":for(t=null,r=i.child,i.child=null;r!==null;){if(e=r.alternate,e!==null&&Jr(e)===null){i.child=r;break}e=r.sibling,r.sibling=t,t=r,r=e}eo(i,!0,t,null,s);break;case"together":eo(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Nr(e,i){!(i.mode&1)&&e!==null&&(e.alternate=null,i.alternate=null,i.flags|=2)}function At(e,i,t){if(e!==null&&(i.dependencies=e.dependencies),yi|=i.lanes,!(t&i.childLanes))return null;if(e!==null&&i.child!==e.child)throw Error(F(153));if(i.child!==null){for(e=i.child,t=ei(e,e.pendingProps),i.child=t,t.return=i;e.sibling!==null;)e=e.sibling,t=t.sibling=ei(e,e.pendingProps),t.return=i;t.sibling=null}return i.child}function _p(e,i,t){switch(i.tag){case 3:Ph(i),Zi();break;case 5:$c(i);break;case 1:Xe(i.type)&&Zr(i);break;case 4:Ol(i,i.stateNode.containerInfo);break;case 10:var n=i.type._context,r=i.memoizedProps.value;fe(Kr,n._currentValue),n._currentValue=r;break;case 13:if(n=i.memoizedState,n!==null)return n.dehydrated!==null?(fe(ye,ye.current&1),i.flags|=128,null):t&i.child.childLanes?Rh(e,i,t):(fe(ye,ye.current&1),e=At(e,i,t),e!==null?e.sibling:null);fe(ye,ye.current&1);break;case 19:if(n=(t&i.childLanes)!==0,e.flags&128){if(n)return _h(e,i,t);i.flags|=128}if(r=i.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),fe(ye,ye.current),n)break;return null;case 22:case 23:return i.lanes=0,Eh(e,i,t)}return At(e,i,t)}var kh,Go,Nh,Dh;kh=function(e,i){for(var t=i.child;t!==null;){if(t.tag===5||t.tag===6)e.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Go=function(){};Nh=function(e,i,t,n){var r=e.memoizedProps;if(r!==n){e=i.stateNode,ci(kt.current);var s=null;switch(t){case"input":r=fo(e,r),n=fo(e,n),s=[];break;case"select":r=xe({},r,{value:void 0}),n=xe({},n,{value:void 0}),s=[];break;case"textarea":r=go(e,r),n=go(e,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Vr)}yo(t,n);var a;t=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_n.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_n.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&me("scroll",e),s||o===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(i.updateQueue=u)&&(i.flags|=4)}};Dh=function(e,i,t,n){t!==n&&(i.flags|=4)};function hn(e,i){if(!ve)switch(e.tailMode){case"hidden":i=e.tail;for(var t=null;i!==null;)i.alternate!==null&&(t=i),i=i.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Fe(e){var i=e.alternate!==null&&e.alternate.child===e.child,t=0,n=0;if(i)for(var r=e.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=t,i}function kp(e,i,t){var n=i.pendingProps;switch(Pl(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(i),null;case 1:return Xe(i.type)&&Gr(),Fe(i),null;case 3:return n=i.stateNode,Xi(),ge(qe),ge(je),zl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(pr(i)?i.flags|=4:e===null||e.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,yt!==null&&($o(yt),yt=null))),Go(e,i),Fe(i),null;case 5:Ll(i);var r=ci(Hn.current);if(t=i.type,e!==null&&i.stateNode!=null)Nh(e,i,t,n,r),e.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!n){if(i.stateNode===null)throw Error(F(166));return Fe(i),null}if(e=ci(kt.current),pr(i)){n=i.stateNode,t=i.type;var s=i.memoizedProps;switch(n[Rt]=i,n[Fn]=s,e=(i.mode&1)!==0,t){case"dialog":me("cancel",n),me("close",n);break;case"iframe":case"object":case"embed":me("load",n);break;case"video":case"audio":for(r=0;r<vn.length;r++)me(vn[r],n);break;case"source":me("error",n);break;case"img":case"image":case"link":me("error",n),me("load",n);break;case"details":me("toggle",n);break;case"input":ha(n,s),me("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},me("invalid",n);break;case"textarea":fa(n,s),me("invalid",n)}yo(t,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&fr(n.textContent,o,e),r=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&fr(n.textContent,o,e),r=["children",""+o]):_n.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&me("scroll",n)}switch(t){case"input":sr(n),da(n,s,!0);break;case"textarea":sr(n),pa(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Vr)}n=r,i.updateQueue=n,n!==null&&(i.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rc(t)),e==="http://www.w3.org/1999/xhtml"?t==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(t,{is:n.is}):(e=a.createElement(t),t==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,t),e[Rt]=i,e[Fn]=n,kh(e,i,!1,!1),i.stateNode=e;e:{switch(a=wo(t,n),t){case"dialog":me("cancel",e),me("close",e),r=n;break;case"iframe":case"object":case"embed":me("load",e),r=n;break;case"video":case"audio":for(r=0;r<vn.length;r++)me(vn[r],e);r=n;break;case"source":me("error",e),r=n;break;case"img":case"image":case"link":me("error",e),me("load",e),r=n;break;case"details":me("toggle",e),r=n;break;case"input":ha(e,n),r=fo(e,n),me("invalid",e);break;case"option":r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=xe({},n,{value:void 0}),me("invalid",e);break;case"textarea":fa(e,n),r=go(e,n),me("invalid",e);break;default:r=n}yo(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?lc(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&sc(e,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&kn(e,l):typeof l=="number"&&kn(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_n.hasOwnProperty(s)?l!=null&&s==="onScroll"&&me("scroll",e):l!=null&&cl(e,s,l,a))}switch(t){case"input":sr(e),da(e,n,!1);break;case"textarea":sr(e),pa(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ti(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Ai(e,!!n.multiple,s,!1):n.defaultValue!=null&&Ai(e,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Vr)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Fe(i),null;case 6:if(e&&i.stateNode!=null)Dh(e,i,e.memoizedProps,n);else{if(typeof n!="string"&&i.stateNode===null)throw Error(F(166));if(t=ci(Hn.current),ci(kt.current),pr(i)){if(n=i.stateNode,t=i.memoizedProps,n[Rt]=i,(s=n.nodeValue!==t)&&(e=tt,e!==null))switch(e.tag){case 3:fr(n.nodeValue,t,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fr(n.nodeValue,t,(e.mode&1)!==0)}s&&(i.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[Rt]=i,i.stateNode=n}return Fe(i),null;case 13:if(ge(ye),n=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&et!==null&&i.mode&1&&!(i.flags&128))Xc(),Zi(),i.flags|=98560,s=!1;else if(s=pr(i),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(F(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(F(317));s[Rt]=i}else Zi(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Fe(i),s=!1}else yt!==null&&($o(yt),yt=null),s=!0;if(!s)return i.flags&65536?i:null}return i.flags&128?(i.lanes=t,i):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(i.child.flags|=8192,i.mode&1&&(e===null||ye.current&1?_e===0&&(_e=3):Zl())),i.updateQueue!==null&&(i.flags|=4),Fe(i),null);case 4:return Xi(),Go(e,i),e===null&&In(i.stateNode.containerInfo),Fe(i),null;case 10:return Nl(i.type._context),Fe(i),null;case 17:return Xe(i.type)&&Gr(),Fe(i),null;case 19:if(ge(ye),s=i.memoizedState,s===null)return Fe(i),null;if(n=(i.flags&128)!==0,a=s.rendering,a===null)if(n)hn(s,!1);else{if(_e!==0||e!==null&&e.flags&128)for(e=i.child;e!==null;){if(a=Jr(e),a!==null){for(i.flags|=128,hn(s,!1),n=a.updateQueue,n!==null&&(i.updateQueue=n,i.flags|=4),i.subtreeFlags=0,n=t,t=i.child;t!==null;)s=t,e=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return fe(ye,ye.current&1|2),i.child}e=e.sibling}s.tail!==null&&Ce()>Qi&&(i.flags|=128,n=!0,hn(s,!1),i.lanes=4194304)}else{if(!n)if(e=Jr(a),e!==null){if(i.flags|=128,n=!0,t=e.updateQueue,t!==null&&(i.updateQueue=t,i.flags|=4),hn(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!ve)return Fe(i),null}else 2*Ce()-s.renderingStartTime>Qi&&t!==1073741824&&(i.flags|=128,n=!0,hn(s,!1),i.lanes=4194304);s.isBackwards?(a.sibling=i.child,i.child=a):(t=s.last,t!==null?t.sibling=a:i.child=a,s.last=a)}return s.tail!==null?(i=s.tail,s.rendering=i,s.tail=i.sibling,s.renderingStartTime=Ce(),i.sibling=null,t=ye.current,fe(ye,n?t&1|2:t&1),i):(Fe(i),null);case 22:case 23:return Gl(),n=i.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(i.flags|=8192),n&&i.mode&1?$e&1073741824&&(Fe(i),i.subtreeFlags&6&&(i.flags|=8192)):Fe(i),null;case 24:return null;case 25:return null}throw Error(F(156,i.tag))}function Np(e,i){switch(Pl(i),i.tag){case 1:return Xe(i.type)&&Gr(),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Xi(),ge(qe),ge(je),zl(),e=i.flags,e&65536&&!(e&128)?(i.flags=e&-65537|128,i):null;case 5:return Ll(i),null;case 13:if(ge(ye),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(F(340));Zi()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return ge(ye),null;case 4:return Xi(),null;case 10:return Nl(i.type._context),null;case 22:case 23:return Gl(),null;case 24:return null;default:return null}}var vr=!1,Ae=!1,Dp=typeof WeakSet=="function"?WeakSet:Set,B=null;function Mi(e,i){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Se(e,i,n)}else t.current=null}function Zo(e,i,t){try{t()}catch(n){Se(e,i,n)}}var nu=!1;function bp(e,i){if(No=Br,e=Ic(),El(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,c=0,h=e,d=null;t:for(;;){for(var w;h!==t||r!==0&&h.nodeType!==3||(o=a+r),h!==s||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(w=h.firstChild)!==null;)d=h,h=w;for(;;){if(h===e)break t;if(d===t&&++u===r&&(o=a),d===s&&++c===n&&(l=a),(w=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=w}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Do={focusedElem:e,selectionRange:t},Br=!1,B=i;B!==null;)if(i=B,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,B=e;else for(;B!==null;){i=B;try{var v=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var T=v.memoizedProps,x=v.memoizedState,m=i.stateNode,y=m.getSnapshotBeforeUpdate(i.elementType===i.type?T:gt(i.type,T),x);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=i.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(_){Se(i,i.return,_)}if(e=i.sibling,e!==null){e.return=i.return,B=e;break}B=i.return}return v=nu,nu=!1,v}function Cn(e,i,t){var n=i.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,s!==void 0&&Zo(i,t,s)}r=r.next}while(r!==n)}}function gs(e,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var t=i=i.next;do{if((t.tag&e)===e){var n=t.create;t.destroy=n()}t=t.next}while(t!==i)}}function qo(e){var i=e.ref;if(i!==null){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}typeof i=="function"?i(e):i.current=e}}function bh(e){var i=e.alternate;i!==null&&(e.alternate=null,bh(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&(delete i[Rt],delete i[Fn],delete i[Lo],delete i[fp],delete i[pp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Oh(e){return e.tag===5||e.tag===3||e.tag===4}function ru(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Oh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xo(e,i,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,i?t.nodeType===8?t.parentNode.insertBefore(e,i):t.insertBefore(e,i):(t.nodeType===8?(i=t.parentNode,i.insertBefore(e,t)):(i=t,i.appendChild(e)),t=t._reactRootContainer,t!=null||i.onclick!==null||(i.onclick=Vr));else if(n!==4&&(e=e.child,e!==null))for(Xo(e,i,t),e=e.sibling;e!==null;)Xo(e,i,t),e=e.sibling}function Ko(e,i,t){var n=e.tag;if(n===5||n===6)e=e.stateNode,i?t.insertBefore(e,i):t.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ko(e,i,t),e=e.sibling;e!==null;)Ko(e,i,t),e=e.sibling}var Le=null,vt=!1;function jt(e,i,t){for(t=t.child;t!==null;)Lh(e,i,t),t=t.sibling}function Lh(e,i,t){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(as,t)}catch{}switch(t.tag){case 5:Ae||Mi(t,i);case 6:var n=Le,r=vt;Le=null,jt(e,i,t),Le=n,vt=r,Le!==null&&(vt?(e=Le,t=t.stateNode,e.nodeType===8?e.parentNode.removeChild(t):e.removeChild(t)):Le.removeChild(t.stateNode));break;case 18:Le!==null&&(vt?(e=Le,t=t.stateNode,e.nodeType===8?qs(e.parentNode,t):e.nodeType===1&&qs(e,t),On(e)):qs(Le,t.stateNode));break;case 4:n=Le,r=vt,Le=t.stateNode.containerInfo,vt=!0,jt(e,i,t),Le=n,vt=r;break;case 0:case 11:case 14:case 15:if(!Ae&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Zo(t,i,a),r=r.next}while(r!==n)}jt(e,i,t);break;case 1:if(!Ae&&(Mi(t,i),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(o){Se(t,i,o)}jt(e,i,t);break;case 21:jt(e,i,t);break;case 22:t.mode&1?(Ae=(n=Ae)||t.memoizedState!==null,jt(e,i,t),Ae=n):jt(e,i,t);break;default:jt(e,i,t)}}function su(e){var i=e.updateQueue;if(i!==null){e.updateQueue=null;var t=e.stateNode;t===null&&(t=e.stateNode=new Dp),i.forEach(function(n){var r=jp.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))})}}function mt(e,i){var t=i.deletions;if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];try{var s=e,a=i,o=a;e:for(;o!==null;){switch(o.tag){case 5:Le=o.stateNode,vt=!1;break e;case 3:Le=o.stateNode.containerInfo,vt=!0;break e;case 4:Le=o.stateNode.containerInfo,vt=!0;break e}o=o.return}if(Le===null)throw Error(F(160));Lh(s,a,r),Le=null,vt=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Se(r,i,u)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)zh(i,e),i=i.sibling}function zh(e,i){var t=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mt(i,e),Et(e),n&4){try{Cn(3,e,e.return),gs(3,e)}catch(T){Se(e,e.return,T)}try{Cn(5,e,e.return)}catch(T){Se(e,e.return,T)}}break;case 1:mt(i,e),Et(e),n&512&&t!==null&&Mi(t,t.return);break;case 5:if(mt(i,e),Et(e),n&512&&t!==null&&Mi(t,t.return),e.flags&32){var r=e.stateNode;try{kn(r,"")}catch(T){Se(e,e.return,T)}}if(n&4&&(r=e.stateNode,r!=null)){var s=e.memoizedProps,a=t!==null?t.memoizedProps:s,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&ic(r,s),wo(o,a);var u=wo(o,s);for(a=0;a<l.length;a+=2){var c=l[a],h=l[a+1];c==="style"?lc(r,h):c==="dangerouslySetInnerHTML"?sc(r,h):c==="children"?kn(r,h):cl(r,c,h,u)}switch(o){case"input":po(r,s);break;case"textarea":nc(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?Ai(r,!!s.multiple,w,!1):d!==!!s.multiple&&(s.defaultValue!=null?Ai(r,!!s.multiple,s.defaultValue,!0):Ai(r,!!s.multiple,s.multiple?[]:"",!1))}r[Fn]=s}catch(T){Se(e,e.return,T)}}break;case 6:if(mt(i,e),Et(e),n&4){if(e.stateNode===null)throw Error(F(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(T){Se(e,e.return,T)}}break;case 3:if(mt(i,e),Et(e),n&4&&t!==null&&t.memoizedState.isDehydrated)try{On(i.containerInfo)}catch(T){Se(e,e.return,T)}break;case 4:mt(i,e),Et(e);break;case 13:mt(i,e),Et(e),r=e.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Wl=Ce())),n&4&&su(e);break;case 22:if(c=t!==null&&t.memoizedState!==null,e.mode&1?(Ae=(u=Ae)||c,mt(i,e),Ae=u):mt(i,e),Et(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(B=e,c=e.child;c!==null;){for(h=B=c;B!==null;){switch(d=B,w=d.child,d.tag){case 0:case 11:case 14:case 15:Cn(4,d,d.return);break;case 1:Mi(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){n=d,t=d.return;try{i=n,v.props=i.memoizedProps,v.state=i.memoizedState,v.componentWillUnmount()}catch(T){Se(n,t,T)}}break;case 5:Mi(d,d.return);break;case 22:if(d.memoizedState!==null){lu(h);continue}}w!==null?(w.return=d,B=w):lu(h)}c=c.sibling}e:for(c=null,h=e;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=oc("display",a))}catch(T){Se(e,e.return,T)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(T){Se(e,e.return,T)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mt(i,e),Et(e),n&4&&su(e);break;case 21:break;default:mt(i,e),Et(e)}}function Et(e){var i=e.flags;if(i&2){try{e:{for(var t=e.return;t!==null;){if(Oh(t)){var n=t;break e}t=t.return}throw Error(F(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(kn(r,""),n.flags&=-33);var s=ru(e);Ko(e,s,r);break;case 3:case 4:var a=n.stateNode.containerInfo,o=ru(e);Xo(e,o,a);break;default:throw Error(F(161))}}catch(l){Se(e,e.return,l)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Op(e,i,t){B=e,Ih(e)}function Ih(e,i,t){for(var n=(e.mode&1)!==0;B!==null;){var r=B,s=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||vr;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||Ae;o=vr;var u=Ae;if(vr=a,(Ae=l)&&!u)for(B=r;B!==null;)a=B,l=a.child,a.tag===22&&a.memoizedState!==null?au(r):l!==null?(l.return=a,B=l):au(r);for(;s!==null;)B=s,Ih(s),s=s.sibling;B=r,vr=o,Ae=u}ou(e)}else r.subtreeFlags&8772&&s!==null?(s.return=r,B=s):ou(e)}}function ou(e){for(;B!==null;){var i=B;if(i.flags&8772){var t=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Ae||gs(5,i);break;case 1:var n=i.stateNode;if(i.flags&4&&!Ae)if(t===null)n.componentDidMount();else{var r=i.elementType===i.type?t.memoizedProps:gt(i.type,t.memoizedProps);n.componentDidUpdate(r,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=i.updateQueue;s!==null&&Va(i,s,n);break;case 3:var a=i.updateQueue;if(a!==null){if(t=null,i.child!==null)switch(i.child.tag){case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}Va(i,a,t)}break;case 5:var o=i.stateNode;if(t===null&&i.flags&4){t=o;var l=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var u=i.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&On(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}Ae||i.flags&512&&qo(i)}catch(d){Se(i,i.return,d)}}if(i===e){B=null;break}if(t=i.sibling,t!==null){t.return=i.return,B=t;break}B=i.return}}function lu(e){for(;B!==null;){var i=B;if(i===e){B=null;break}var t=i.sibling;if(t!==null){t.return=i.return,B=t;break}B=i.return}}function au(e){for(;B!==null;){var i=B;try{switch(i.tag){case 0:case 11:case 15:var t=i.return;try{gs(4,i)}catch(l){Se(i,t,l)}break;case 1:var n=i.stateNode;if(typeof n.componentDidMount=="function"){var r=i.return;try{n.componentDidMount()}catch(l){Se(i,r,l)}}var s=i.return;try{qo(i)}catch(l){Se(i,s,l)}break;case 5:var a=i.return;try{qo(i)}catch(l){Se(i,a,l)}}}catch(l){Se(i,i.return,l)}if(i===e){B=null;break}var o=i.sibling;if(o!==null){o.return=i.return,B=o;break}B=i.return}}var Lp=Math.ceil,ts=Ht.ReactCurrentDispatcher,Bl=Ht.ReactCurrentOwner,ct=Ht.ReactCurrentBatchConfig,ie=0,be=null,Pe=null,ze=0,$e=0,Fi=ri(0),_e=0,Wn=null,yi=0,vs=0,Ul=0,Pn=null,Ge=null,Wl=0,Qi=1/0,Dt=null,is=!1,Qo=null,Jt=null,yr=!1,Zt=null,ns=0,Rn=0,Yo=null,Dr=-1,br=0;function Ue(){return ie&6?Ce():Dr!==-1?Dr:Dr=Ce()}function $t(e){return e.mode&1?ie&2&&ze!==0?ze&-ze:gp.transition!==null?(br===0&&(br=wc()),br):(e=ae,e!==0||(e=window.event,e=e===void 0?16:Rc(e.type)),e):1}function xt(e,i,t,n){if(50<Rn)throw Rn=0,Yo=null,Error(F(185));Gn(e,t,n),(!(ie&2)||e!==be)&&(e===be&&(!(ie&2)&&(vs|=t),_e===4&&Vt(e,ze)),Ke(e,n),t===1&&ie===0&&!(i.mode&1)&&(Qi=Ce()+500,fs&&si()))}function Ke(e,i){var t=e.callbackNode;gf(e,i);var n=jr(e,e===be?ze:0);if(n===0)t!==null&&va(t),e.callbackNode=null,e.callbackPriority=0;else if(i=n&-n,e.callbackPriority!==i){if(t!=null&&va(t),i===1)e.tag===0?mp(uu.bind(null,e)):Gc(uu.bind(null,e)),hp(function(){!(ie&6)&&si()}),t=null;else{switch(xc(n)){case 1:t=ml;break;case 4:t=vc;break;case 16:t=Hr;break;case 536870912:t=yc;break;default:t=Hr}t=Wh(t,Mh.bind(null,e))}e.callbackPriority=i,e.callbackNode=t}}function Mh(e,i){if(Dr=-1,br=0,ie&6)throw Error(F(327));var t=e.callbackNode;if(Wi()&&e.callbackNode!==t)return null;var n=jr(e,e===be?ze:0);if(n===0)return null;if(n&30||n&e.expiredLanes||i)i=rs(e,n);else{i=n;var r=ie;ie|=2;var s=Ah();(be!==e||ze!==i)&&(Dt=null,Qi=Ce()+500,di(e,i));do try{Mp();break}catch(o){Fh(e,o)}while(!0);kl(),ts.current=s,ie=r,Pe!==null?i=0:(be=null,ze=0,i=_e)}if(i!==0){if(i===2&&(r=Co(e),r!==0&&(n=r,i=Jo(e,r))),i===1)throw t=Wn,di(e,0),Vt(e,n),Ke(e,Ce()),t;if(i===6)Vt(e,n);else{if(r=e.current.alternate,!(n&30)&&!zp(r)&&(i=rs(e,n),i===2&&(s=Co(e),s!==0&&(n=s,i=Jo(e,s))),i===1))throw t=Wn,di(e,0),Vt(e,n),Ke(e,Ce()),t;switch(e.finishedWork=r,e.finishedLanes=n,i){case 0:case 1:throw Error(F(345));case 2:li(e,Ge,Dt);break;case 3:if(Vt(e,n),(n&130023424)===n&&(i=Wl+500-Ce(),10<i)){if(jr(e,0)!==0)break;if(r=e.suspendedLanes,(r&n)!==n){Ue(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Oo(li.bind(null,e,Ge,Dt),i);break}li(e,Ge,Dt);break;case 4:if(Vt(e,n),(n&4194240)===n)break;for(i=e.eventTimes,r=-1;0<n;){var a=31-wt(n);s=1<<a,a=i[a],a>r&&(r=a),n&=~s}if(n=r,n=Ce()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Lp(n/1960))-n,10<n){e.timeoutHandle=Oo(li.bind(null,e,Ge,Dt),n);break}li(e,Ge,Dt);break;case 5:li(e,Ge,Dt);break;default:throw Error(F(329))}}}return Ke(e,Ce()),e.callbackNode===t?Mh.bind(null,e):null}function Jo(e,i){var t=Pn;return e.current.memoizedState.isDehydrated&&(di(e,i).flags|=256),e=rs(e,i),e!==2&&(i=Ge,Ge=t,i!==null&&$o(i)),e}function $o(e){Ge===null?Ge=e:Ge.push.apply(Ge,e)}function zp(e){for(var i=e;;){if(i.flags&16384){var t=i.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var r=t[n],s=r.getSnapshot;r=r.value;try{if(!Tt(s(),r))return!1}catch{return!1}}}if(t=i.child,i.subtreeFlags&16384&&t!==null)t.return=i,i=t;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Vt(e,i){for(i&=~Ul,i&=~vs,e.suspendedLanes|=i,e.pingedLanes&=~i,e=e.expirationTimes;0<i;){var t=31-wt(i),n=1<<t;e[t]=-1,i&=~n}}function uu(e){if(ie&6)throw Error(F(327));Wi();var i=jr(e,0);if(!(i&1))return Ke(e,Ce()),null;var t=rs(e,i);if(e.tag!==0&&t===2){var n=Co(e);n!==0&&(i=n,t=Jo(e,n))}if(t===1)throw t=Wn,di(e,0),Vt(e,i),Ke(e,Ce()),t;if(t===6)throw Error(F(345));return e.finishedWork=e.current.alternate,e.finishedLanes=i,li(e,Ge,Dt),Ke(e,Ce()),null}function Vl(e,i){var t=ie;ie|=1;try{return e(i)}finally{ie=t,ie===0&&(Qi=Ce()+500,fs&&si())}}function wi(e){Zt!==null&&Zt.tag===0&&!(ie&6)&&Wi();var i=ie;ie|=1;var t=ct.transition,n=ae;try{if(ct.transition=null,ae=1,e)return e()}finally{ae=n,ct.transition=t,ie=i,!(ie&6)&&si()}}function Gl(){$e=Fi.current,ge(Fi)}function di(e,i){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(t!==-1&&(e.timeoutHandle=-1,cp(t)),Pe!==null)for(t=Pe.return;t!==null;){var n=t;switch(Pl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Gr();break;case 3:Xi(),ge(qe),ge(je),zl();break;case 5:Ll(n);break;case 4:Xi();break;case 13:ge(ye);break;case 19:ge(ye);break;case 10:Nl(n.type._context);break;case 22:case 23:Gl()}t=t.return}if(be=e,Pe=e=ei(e.current,null),ze=$e=i,_e=0,Wn=null,Ul=vs=yi=0,Ge=Pn=null,ui!==null){for(i=0;i<ui.length;i++)if(t=ui[i],n=t.interleaved,n!==null){t.interleaved=null;var r=n.next,s=t.pending;if(s!==null){var a=s.next;s.next=r,n.next=a}t.pending=n}ui=null}return e}function Fh(e,i){do{var t=Pe;try{if(kl(),_r.current=es,$r){for(var n=we.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}$r=!1}if(vi=0,De=Re=we=null,En=!1,jn=0,Bl.current=null,t===null||t.return===null){_e=1,Wn=i,Pe=null;break}e:{var s=e,a=t.return,o=t,l=i;if(i=ze,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var w=Qa(a);if(w!==null){w.flags&=-257,Ya(w,a,o,s,i),w.mode&1&&Ka(s,u,i),i=w,l=u;var v=i.updateQueue;if(v===null){var T=new Set;T.add(l),i.updateQueue=T}else v.add(l);break e}else{if(!(i&1)){Ka(s,u,i),Zl();break e}l=Error(F(426))}}else if(ve&&o.mode&1){var x=Qa(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Ya(x,a,o,s,i),Rl(Ki(l,o));break e}}s=l=Ki(l,o),_e!==4&&(_e=2),Pn===null?Pn=[s]:Pn.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,i&=-i,s.lanes|=i;var m=xh(s,l,i);Wa(s,m);break e;case 1:o=l;var y=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Jt===null||!Jt.has(S)))){s.flags|=65536,i&=-i,s.lanes|=i;var _=Th(s,o,i);Wa(s,_);break e}}s=s.return}while(s!==null)}jh(t)}catch(b){i=b,Pe===t&&t!==null&&(Pe=t=t.return);continue}break}while(!0)}function Ah(){var e=ts.current;return ts.current=es,e===null?es:e}function Zl(){(_e===0||_e===3||_e===2)&&(_e=4),be===null||!(yi&268435455)&&!(vs&268435455)||Vt(be,ze)}function rs(e,i){var t=ie;ie|=2;var n=Ah();(be!==e||ze!==i)&&(Dt=null,di(e,i));do try{Ip();break}catch(r){Fh(e,r)}while(!0);if(kl(),ie=t,ts.current=n,Pe!==null)throw Error(F(261));return be=null,ze=0,_e}function Ip(){for(;Pe!==null;)Hh(Pe)}function Mp(){for(;Pe!==null&&!lf();)Hh(Pe)}function Hh(e){var i=Uh(e.alternate,e,$e);e.memoizedProps=e.pendingProps,i===null?jh(e):Pe=i,Bl.current=null}function jh(e){var i=e;do{var t=i.alternate;if(e=i.return,i.flags&32768){if(t=Np(t,i),t!==null){t.flags&=32767,Pe=t;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_e=6,Pe=null;return}}else if(t=kp(t,i,$e),t!==null){Pe=t;return}if(i=i.sibling,i!==null){Pe=i;return}Pe=i=e}while(i!==null);_e===0&&(_e=5)}function li(e,i,t){var n=ae,r=ct.transition;try{ct.transition=null,ae=1,Fp(e,i,t,n)}finally{ct.transition=r,ae=n}return null}function Fp(e,i,t,n){do Wi();while(Zt!==null);if(ie&6)throw Error(F(327));t=e.finishedWork;var r=e.finishedLanes;if(t===null)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(F(177));e.callbackNode=null,e.callbackPriority=0;var s=t.lanes|t.childLanes;if(vf(e,s),e===be&&(Pe=be=null,ze=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||yr||(yr=!0,Wh(Hr,function(){return Wi(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ct.transition,ct.transition=null;var a=ae;ae=1;var o=ie;ie|=4,Bl.current=null,bp(e,t),zh(t,e),np(Do),Br=!!No,Do=No=null,e.current=t,Op(t),af(),ie=o,ae=a,ct.transition=s}else e.current=t;if(yr&&(yr=!1,Zt=e,ns=r),s=e.pendingLanes,s===0&&(Jt=null),hf(t.stateNode),Ke(e,Ce()),i!==null)for(n=e.onRecoverableError,t=0;t<i.length;t++)r=i[t],n(r.value,{componentStack:r.stack,digest:r.digest});if(is)throw is=!1,e=Qo,Qo=null,e;return ns&1&&e.tag!==0&&Wi(),s=e.pendingLanes,s&1?e===Yo?Rn++:(Rn=0,Yo=e):Rn=0,si(),null}function Wi(){if(Zt!==null){var e=xc(ns),i=ct.transition,t=ae;try{if(ct.transition=null,ae=16>e?16:e,Zt===null)var n=!1;else{if(e=Zt,Zt=null,ns=0,ie&6)throw Error(F(331));var r=ie;for(ie|=4,B=e.current;B!==null;){var s=B,a=s.child;if(B.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(B=u;B!==null;){var c=B;switch(c.tag){case 0:case 11:case 15:Cn(8,c,s)}var h=c.child;if(h!==null)h.return=c,B=h;else for(;B!==null;){c=B;var d=c.sibling,w=c.return;if(bh(c),c===u){B=null;break}if(d!==null){d.return=w,B=d;break}B=w}}}var v=s.alternate;if(v!==null){var T=v.child;if(T!==null){v.child=null;do{var x=T.sibling;T.sibling=null,T=x}while(T!==null)}}B=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,B=a;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Cn(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,B=m;break e}B=s.return}}var y=e.current;for(B=y;B!==null;){a=B;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,B=S;else e:for(a=y;B!==null;){if(o=B,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:gs(9,o)}}catch(b){Se(o,o.return,b)}if(o===a){B=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,B=_;break e}B=o.return}}if(ie=r,si(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(as,e)}catch{}n=!0}return n}finally{ae=t,ct.transition=i}}return!1}function cu(e,i,t){i=Ki(t,i),i=xh(e,i,1),e=Yt(e,i,1),i=Ue(),e!==null&&(Gn(e,1,i),Ke(e,i))}function Se(e,i,t){if(e.tag===3)cu(e,e,t);else for(;i!==null;){if(i.tag===3){cu(i,e,t);break}else if(i.tag===1){var n=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Jt===null||!Jt.has(n))){e=Ki(t,e),e=Th(i,e,1),i=Yt(i,e,1),e=Ue(),i!==null&&(Gn(i,1,e),Ke(i,e));break}}i=i.return}}function Ap(e,i,t){var n=e.pingCache;n!==null&&n.delete(i),i=Ue(),e.pingedLanes|=e.suspendedLanes&t,be===e&&(ze&t)===t&&(_e===4||_e===3&&(ze&130023424)===ze&&500>Ce()-Wl?di(e,0):Ul|=t),Ke(e,i)}function Bh(e,i){i===0&&(e.mode&1?(i=ar,ar<<=1,!(ar&130023424)&&(ar=4194304)):i=1);var t=Ue();e=Ft(e,i),e!==null&&(Gn(e,i,t),Ke(e,t))}function Hp(e){var i=e.memoizedState,t=0;i!==null&&(t=i.retryLane),Bh(e,t)}function jp(e,i){var t=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;r!==null&&(t=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(F(314))}n!==null&&n.delete(i),Bh(e,t)}var Uh;Uh=function(e,i,t){if(e!==null)if(e.memoizedProps!==i.pendingProps||qe.current)Ze=!0;else{if(!(e.lanes&t)&&!(i.flags&128))return Ze=!1,_p(e,i,t);Ze=!!(e.flags&131072)}else Ze=!1,ve&&i.flags&1048576&&Zc(i,Xr,i.index);switch(i.lanes=0,i.tag){case 2:var n=i.type;Nr(e,i),e=i.pendingProps;var r=Gi(i,je.current);Ui(i,t),r=Ml(null,i,n,e,r,t);var s=Fl();return i.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Xe(n)?(s=!0,Zr(i)):s=!1,i.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,bl(i),r.updater=ms,i.stateNode=r,r._reactInternals=i,Ho(i,n,e,t),i=Uo(null,i,n,!0,s,t)):(i.tag=0,ve&&s&&Cl(i),Be(null,i,r,t),i=i.child),i;case 16:n=i.elementType;e:{switch(Nr(e,i),e=i.pendingProps,r=n._init,n=r(n._payload),i.type=n,r=i.tag=Up(n),e=gt(n,e),r){case 0:i=Bo(null,i,n,e,t);break e;case 1:i=eu(null,i,n,e,t);break e;case 11:i=Ja(null,i,n,e,t);break e;case 14:i=$a(null,i,n,gt(n.type,e),t);break e}throw Error(F(306,n,""))}return i;case 0:return n=i.type,r=i.pendingProps,r=i.elementType===n?r:gt(n,r),Bo(e,i,n,r,t);case 1:return n=i.type,r=i.pendingProps,r=i.elementType===n?r:gt(n,r),eu(e,i,n,r,t);case 3:e:{if(Ph(i),e===null)throw Error(F(387));n=i.pendingProps,s=i.memoizedState,r=s.element,Jc(e,i),Yr(i,n,null,t);var a=i.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},i.updateQueue.baseState=s,i.memoizedState=s,i.flags&256){r=Ki(Error(F(423)),i),i=tu(e,i,n,t,r);break e}else if(n!==r){r=Ki(Error(F(424)),i),i=tu(e,i,n,t,r);break e}else for(et=Qt(i.stateNode.containerInfo.firstChild),tt=i,ve=!0,yt=null,t=Qc(i,null,n,t),i.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Zi(),n===r){i=At(e,i,t);break e}Be(e,i,n,t)}i=i.child}return i;case 5:return $c(i),e===null&&Mo(i),n=i.type,r=i.pendingProps,s=e!==null?e.memoizedProps:null,a=r.children,bo(n,r)?a=null:s!==null&&bo(n,s)&&(i.flags|=32),Ch(e,i),Be(e,i,a,t),i.child;case 6:return e===null&&Mo(i),null;case 13:return Rh(e,i,t);case 4:return Ol(i,i.stateNode.containerInfo),n=i.pendingProps,e===null?i.child=qi(i,null,n,t):Be(e,i,n,t),i.child;case 11:return n=i.type,r=i.pendingProps,r=i.elementType===n?r:gt(n,r),Ja(e,i,n,r,t);case 7:return Be(e,i,i.pendingProps,t),i.child;case 8:return Be(e,i,i.pendingProps.children,t),i.child;case 12:return Be(e,i,i.pendingProps.children,t),i.child;case 10:e:{if(n=i.type._context,r=i.pendingProps,s=i.memoizedProps,a=r.value,fe(Kr,n._currentValue),n._currentValue=a,s!==null)if(Tt(s.value,a)){if(s.children===r.children&&!qe.current){i=At(e,i,t);break e}}else for(s=i.child,s!==null&&(s.return=i);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=zt(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),Fo(s.return,t,i),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===i.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(F(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),Fo(a,t,i),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===i){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Be(e,i,r.children,t),i=i.child}return i;case 9:return r=i.type,n=i.pendingProps.children,Ui(i,t),r=ht(r),n=n(r),i.flags|=1,Be(e,i,n,t),i.child;case 14:return n=i.type,r=gt(n,i.pendingProps),r=gt(n.type,r),$a(e,i,n,r,t);case 15:return Sh(e,i,i.type,i.pendingProps,t);case 17:return n=i.type,r=i.pendingProps,r=i.elementType===n?r:gt(n,r),Nr(e,i),i.tag=1,Xe(n)?(e=!0,Zr(i)):e=!1,Ui(i,t),wh(i,n,r),Ho(i,n,r,t),Uo(null,i,n,!0,e,t);case 19:return _h(e,i,t);case 22:return Eh(e,i,t)}throw Error(F(156,i.tag))};function Wh(e,i){return gc(e,i)}function Bp(e,i,t,n){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ut(e,i,t,n){return new Bp(e,i,t,n)}function ql(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Up(e){if(typeof e=="function")return ql(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dl)return 11;if(e===fl)return 14}return 2}function ei(e,i){var t=e.alternate;return t===null?(t=ut(e.tag,i,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=i,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&14680064,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,i=e.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Or(e,i,t,n,r,s){var a=2;if(n=e,typeof e=="function")ql(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case _i:return fi(t.children,r,s,i);case hl:a=8,r|=8;break;case ao:return e=ut(12,t,i,r|2),e.elementType=ao,e.lanes=s,e;case uo:return e=ut(13,t,i,r),e.elementType=uo,e.lanes=s,e;case co:return e=ut(19,t,i,r),e.elementType=co,e.lanes=s,e;case $u:return ys(t,r,s,i);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Yu:a=10;break e;case Ju:a=9;break e;case dl:a=11;break e;case fl:a=14;break e;case Bt:a=16,n=null;break e}throw Error(F(130,e==null?e:typeof e,""))}return i=ut(a,t,i,r),i.elementType=e,i.type=n,i.lanes=s,i}function fi(e,i,t,n){return e=ut(7,e,n,i),e.lanes=t,e}function ys(e,i,t,n){return e=ut(22,e,n,i),e.elementType=$u,e.lanes=t,e.stateNode={isHidden:!1},e}function to(e,i,t){return e=ut(6,e,null,i),e.lanes=t,e}function io(e,i,t){return i=ut(4,e.children!==null?e.children:[],e.key,i),i.lanes=t,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}function Wp(e,i,t,n,r){this.tag=i,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ms(0),this.expirationTimes=Ms(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ms(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Xl(e,i,t,n,r,s,a,o,l){return e=new Wp(e,i,t,o,l),i===1?(i=1,s===!0&&(i|=8)):i=0,s=ut(3,null,null,i),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},bl(s),e}function Vp(e,i,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ri,key:n==null?null:""+n,children:e,containerInfo:i,implementation:t}}function Vh(e){if(!e)return ii;e=e._reactInternals;e:{if(Si(e)!==e||e.tag!==1)throw Error(F(170));var i=e;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Xe(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(F(171))}if(e.tag===1){var t=e.type;if(Xe(t))return Vc(e,t,i)}return i}function Gh(e,i,t,n,r,s,a,o,l){return e=Xl(t,n,!0,e,r,s,a,o,l),e.context=Vh(null),t=e.current,n=Ue(),r=$t(t),s=zt(n,r),s.callback=i??null,Yt(t,s,r),e.current.lanes=r,Gn(e,r,n),Ke(e,n),e}function ws(e,i,t,n){var r=i.current,s=Ue(),a=$t(r);return t=Vh(t),i.context===null?i.context=t:i.pendingContext=t,i=zt(s,a),i.payload={element:e},n=n===void 0?null:n,n!==null&&(i.callback=n),e=Yt(r,i,a),e!==null&&(xt(e,r,a,s),Rr(e,r,a)),a}function ss(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hu(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<i?t:i}}function Kl(e,i){hu(e,i),(e=e.alternate)&&hu(e,i)}function Gp(){return null}var Zh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ql(e){this._internalRoot=e}xs.prototype.render=Ql.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(F(409));ws(e,i,null,null)};xs.prototype.unmount=Ql.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;wi(function(){ws(null,e,null,null)}),i[Mt]=null}};function xs(e){this._internalRoot=e}xs.prototype.unstable_scheduleHydration=function(e){if(e){var i=Ec();e={blockedOn:null,target:e,priority:i};for(var t=0;t<Wt.length&&i!==0&&i<Wt[t].priority;t++);Wt.splice(t,0,e),t===0&&Pc(e)}};function Yl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ts(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function du(){}function Zp(e,i,t,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var u=ss(a);s.call(u)}}var a=Gh(i,n,e,0,null,!1,!1,"",du);return e._reactRootContainer=a,e[Mt]=a.current,In(e.nodeType===8?e.parentNode:e),wi(),a}for(;r=e.lastChild;)e.removeChild(r);if(typeof n=="function"){var o=n;n=function(){var u=ss(l);o.call(u)}}var l=Xl(e,0,!1,null,null,!1,!1,"",du);return e._reactRootContainer=l,e[Mt]=l.current,In(e.nodeType===8?e.parentNode:e),wi(function(){ws(i,l,t,n)}),l}function Ss(e,i,t,n,r){var s=t._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=ss(a);o.call(l)}}ws(i,a,e,r)}else a=Zp(t,i,e,r,n);return ss(a)}Tc=function(e){switch(e.tag){case 3:var i=e.stateNode;if(i.current.memoizedState.isDehydrated){var t=gn(i.pendingLanes);t!==0&&(gl(i,t|1),Ke(i,Ce()),!(ie&6)&&(Qi=Ce()+500,si()))}break;case 13:wi(function(){var n=Ft(e,1);if(n!==null){var r=Ue();xt(n,e,1,r)}}),Kl(e,1)}};vl=function(e){if(e.tag===13){var i=Ft(e,134217728);if(i!==null){var t=Ue();xt(i,e,134217728,t)}Kl(e,134217728)}};Sc=function(e){if(e.tag===13){var i=$t(e),t=Ft(e,i);if(t!==null){var n=Ue();xt(t,e,i,n)}Kl(e,i)}};Ec=function(){return ae};Cc=function(e,i){var t=ae;try{return ae=e,i()}finally{ae=t}};To=function(e,i,t){switch(i){case"input":if(po(e,t),i=t.name,t.type==="radio"&&i!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<t.length;i++){var n=t[i];if(n!==e&&n.form===e.form){var r=ds(n);if(!r)throw Error(F(90));tc(n),po(n,r)}}}break;case"textarea":nc(e,t);break;case"select":i=t.value,i!=null&&Ai(e,!!t.multiple,i,!1)}};cc=Vl;hc=wi;var qp={usingClientEntryPoint:!1,Events:[qn,bi,ds,ac,uc,Vl]},dn={findFiberByHostInstance:ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xp={bundleType:dn.bundleType,version:dn.version,rendererPackageName:dn.rendererPackageName,rendererConfig:dn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pc(e),e===null?null:e.stateNode},findFiberByHostInstance:dn.findFiberByHostInstance||Gp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wr.isDisabled&&wr.supportsFiber)try{as=wr.inject(Xp),_t=wr}catch{}}nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qp;nt.createPortal=function(e,i){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yl(i))throw Error(F(200));return Vp(e,i,null,t)};nt.createRoot=function(e,i){if(!Yl(e))throw Error(F(299));var t=!1,n="",r=Zh;return i!=null&&(i.unstable_strictMode===!0&&(t=!0),i.identifierPrefix!==void 0&&(n=i.identifierPrefix),i.onRecoverableError!==void 0&&(r=i.onRecoverableError)),i=Xl(e,1,!1,null,null,t,!1,n,r),e[Mt]=i.current,In(e.nodeType===8?e.parentNode:e),new Ql(i)};nt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(F(188)):(e=Object.keys(e).join(","),Error(F(268,e)));return e=pc(i),e=e===null?null:e.stateNode,e};nt.flushSync=function(e){return wi(e)};nt.hydrate=function(e,i,t){if(!Ts(i))throw Error(F(200));return Ss(null,e,i,!0,t)};nt.hydrateRoot=function(e,i,t){if(!Yl(e))throw Error(F(405));var n=t!=null&&t.hydratedSources||null,r=!1,s="",a=Zh;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),i=Gh(i,null,e,1,t??null,r,!1,s,a),e[Mt]=i.current,In(e),n)for(e=0;e<n.length;e++)t=n[e],r=t._getVersion,r=r(t._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[t,r]:i.mutableSourceEagerHydrationData.push(t,r);return new xs(i)};nt.render=function(e,i,t){if(!Ts(i))throw Error(F(200));return Ss(null,e,i,!1,t)};nt.unmountComponentAtNode=function(e){if(!Ts(e))throw Error(F(40));return e._reactRootContainer?(wi(function(){Ss(null,null,e,!1,function(){e._reactRootContainer=null,e[Mt]=null})}),!0):!1};nt.unstable_batchedUpdates=Vl;nt.unstable_renderSubtreeIntoContainer=function(e,i,t,n){if(!Ts(t))throw Error(F(200));if(e==null||e._reactInternals===void 0)throw Error(F(38));return Ss(e,i,t,!1,n)};nt.version="18.3.1-next-f1338f8080-20240426";function qh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qh)}catch(e){console.error(e)}}qh(),qu.exports=nt;var Kp=qu.exports,fu=Kp;oo.createRoot=fu.createRoot,oo.hydrateRoot=fu.hydrateRoot;function Xh(e,i){return function(){return e.apply(i,arguments)}}const{toString:Qp}=Object.prototype,{getPrototypeOf:Jl}=Object,{iterator:Es,toStringTag:Kh}=Symbol,Cs=(e=>i=>{const t=Qp.call(i);return e[t]||(e[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),St=e=>(e=e.toLowerCase(),i=>Cs(i)===e),Ps=e=>i=>typeof i===e,{isArray:tn}=Array,Yi=Ps("undefined");function Kn(e){return e!==null&&!Yi(e)&&e.constructor!==null&&!Yi(e.constructor)&&Qe(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Qh=St("ArrayBuffer");function Yp(e){let i;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?i=ArrayBuffer.isView(e):i=e&&e.buffer&&Qh(e.buffer),i}const Jp=Ps("string"),Qe=Ps("function"),Yh=Ps("number"),Qn=e=>e!==null&&typeof e=="object",$p=e=>e===!0||e===!1,Lr=e=>{if(Cs(e)!=="object")return!1;const i=Jl(e);return(i===null||i===Object.prototype||Object.getPrototypeOf(i)===null)&&!(Kh in e)&&!(Es in e)},em=e=>{if(!Qn(e)||Kn(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},tm=St("Date"),im=St("File"),nm=St("Blob"),rm=St("FileList"),sm=e=>Qn(e)&&Qe(e.pipe),om=e=>{let i;return e&&(typeof FormData=="function"&&e instanceof FormData||Qe(e.append)&&((i=Cs(e))==="formdata"||i==="object"&&Qe(e.toString)&&e.toString()==="[object FormData]"))},lm=St("URLSearchParams"),[am,um,cm,hm]=["ReadableStream","Request","Response","Headers"].map(St),dm=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yn(e,i,{allOwnKeys:t=!1}={}){if(e===null||typeof e>"u")return;let n,r;if(typeof e!="object"&&(e=[e]),tn(e))for(n=0,r=e.length;n<r;n++)i.call(null,e[n],n,e);else{if(Kn(e))return;const s=t?Object.getOwnPropertyNames(e):Object.keys(e),a=s.length;let o;for(n=0;n<a;n++)o=s[n],i.call(null,e[o],o,e)}}function Jh(e,i){if(Kn(e))return null;i=i.toLowerCase();const t=Object.keys(e);let n=t.length,r;for(;n-- >0;)if(r=t[n],i===r.toLowerCase())return r;return null}const hi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,$h=e=>!Yi(e)&&e!==hi;function el(){const{caseless:e,skipUndefined:i}=$h(this)&&this||{},t={},n=(r,s)=>{const a=e&&Jh(t,s)||s;Lr(t[a])&&Lr(r)?t[a]=el(t[a],r):Lr(r)?t[a]=el({},r):tn(r)?t[a]=r.slice():(!i||!Yi(r))&&(t[a]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Yn(arguments[r],n);return t}const fm=(e,i,t,{allOwnKeys:n}={})=>(Yn(i,(r,s)=>{t&&Qe(r)?e[s]=Xh(r,t):e[s]=r},{allOwnKeys:n}),e),pm=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),mm=(e,i,t,n)=>{e.prototype=Object.create(i.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:i.prototype}),t&&Object.assign(e.prototype,t)},gm=(e,i,t,n)=>{let r,s,a;const o={};if(i=i||{},e==null)return i;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)a=r[s],(!n||n(a,e,i))&&!o[a]&&(i[a]=e[a],o[a]=!0);e=t!==!1&&Jl(e)}while(e&&(!t||t(e,i))&&e!==Object.prototype);return i},vm=(e,i,t)=>{e=String(e),(t===void 0||t>e.length)&&(t=e.length),t-=i.length;const n=e.indexOf(i,t);return n!==-1&&n===t},ym=e=>{if(!e)return null;if(tn(e))return e;let i=e.length;if(!Yh(i))return null;const t=new Array(i);for(;i-- >0;)t[i]=e[i];return t},wm=(e=>i=>e&&i instanceof e)(typeof Uint8Array<"u"&&Jl(Uint8Array)),xm=(e,i)=>{const n=(e&&e[Es]).call(e);let r;for(;(r=n.next())&&!r.done;){const s=r.value;i.call(e,s[0],s[1])}},Tm=(e,i)=>{let t;const n=[];for(;(t=e.exec(i))!==null;)n.push(t);return n},Sm=St("HTMLFormElement"),Em=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),pu=(({hasOwnProperty:e})=>(i,t)=>e.call(i,t))(Object.prototype),Cm=St("RegExp"),ed=(e,i)=>{const t=Object.getOwnPropertyDescriptors(e),n={};Yn(t,(r,s)=>{let a;(a=i(r,s,e))!==!1&&(n[s]=a||r)}),Object.defineProperties(e,n)},Pm=e=>{ed(e,(i,t)=>{if(Qe(e)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=e[t];if(Qe(n)){if(i.enumerable=!1,"writable"in i){i.writable=!1;return}i.set||(i.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Rm=(e,i)=>{const t={},n=r=>{r.forEach(s=>{t[s]=!0})};return tn(e)?n(e):n(String(e).split(i)),t},_m=()=>{},km=(e,i)=>e!=null&&Number.isFinite(e=+e)?e:i;function Nm(e){return!!(e&&Qe(e.append)&&e[Kh]==="FormData"&&e[Es])}const Dm=e=>{const i=new Array(10),t=(n,r)=>{if(Qn(n)){if(i.indexOf(n)>=0)return;if(Kn(n))return n;if(!("toJSON"in n)){i[r]=n;const s=tn(n)?[]:{};return Yn(n,(a,o)=>{const l=t(a,r+1);!Yi(l)&&(s[o]=l)}),i[r]=void 0,s}}return n};return t(e,0)},bm=St("AsyncFunction"),Om=e=>e&&(Qn(e)||Qe(e))&&Qe(e.then)&&Qe(e.catch),td=((e,i)=>e?setImmediate:i?((t,n)=>(hi.addEventListener("message",({source:r,data:s})=>{r===hi&&s===t&&n.length&&n.shift()()},!1),r=>{n.push(r),hi.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Qe(hi.postMessage)),Lm=typeof queueMicrotask<"u"?queueMicrotask.bind(hi):typeof process<"u"&&process.nextTick||td,zm=e=>e!=null&&Qe(e[Es]),N={isArray:tn,isArrayBuffer:Qh,isBuffer:Kn,isFormData:om,isArrayBufferView:Yp,isString:Jp,isNumber:Yh,isBoolean:$p,isObject:Qn,isPlainObject:Lr,isEmptyObject:em,isReadableStream:am,isRequest:um,isResponse:cm,isHeaders:hm,isUndefined:Yi,isDate:tm,isFile:im,isBlob:nm,isRegExp:Cm,isFunction:Qe,isStream:sm,isURLSearchParams:lm,isTypedArray:wm,isFileList:rm,forEach:Yn,merge:el,extend:fm,trim:dm,stripBOM:pm,inherits:mm,toFlatObject:gm,kindOf:Cs,kindOfTest:St,endsWith:vm,toArray:ym,forEachEntry:xm,matchAll:Tm,isHTMLForm:Sm,hasOwnProperty:pu,hasOwnProp:pu,reduceDescriptors:ed,freezeMethods:Pm,toObjectSet:Rm,toCamelCase:Em,noop:_m,toFiniteNumber:km,findKey:Jh,global:hi,isContextDefined:$h,isSpecCompliantForm:Nm,toJSONObject:Dm,isAsyncFn:bm,isThenable:Om,setImmediate:td,asap:Lm,isIterable:zm};function J(e,i,t,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",i&&(this.code=i),t&&(this.config=t),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}N.inherits(J,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:N.toJSONObject(this.config),code:this.code,status:this.status}}});const id=J.prototype,nd={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{nd[e]={value:e}});Object.defineProperties(J,nd);Object.defineProperty(id,"isAxiosError",{value:!0});J.from=(e,i,t,n,r,s)=>{const a=Object.create(id);N.toFlatObject(e,a,function(c){return c!==Error.prototype},u=>u!=="isAxiosError");const o=e&&e.message?e.message:"Error",l=i==null&&e?e.code:i;return J.call(a,o,l,t,n,r),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",s&&Object.assign(a,s),a};const Im=null;function tl(e){return N.isPlainObject(e)||N.isArray(e)}function rd(e){return N.endsWith(e,"[]")?e.slice(0,-2):e}function mu(e,i,t){return e?e.concat(i).map(function(r,s){return r=rd(r),!t&&s?"["+r+"]":r}).join(t?".":""):i}function Mm(e){return N.isArray(e)&&!e.some(tl)}const Fm=N.toFlatObject(N,{},null,function(i){return/^is[A-Z]/.test(i)});function Rs(e,i,t){if(!N.isObject(e))throw new TypeError("target must be an object");i=i||new FormData,t=N.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,x){return!N.isUndefined(x[T])});const n=t.metaTokens,r=t.visitor||c,s=t.dots,a=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&N.isSpecCompliantForm(i);if(!N.isFunction(r))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(N.isDate(v))return v.toISOString();if(N.isBoolean(v))return v.toString();if(!l&&N.isBlob(v))throw new J("Blob is not supported. Use a Buffer instead.");return N.isArrayBuffer(v)||N.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function c(v,T,x){let m=v;if(v&&!x&&typeof v=="object"){if(N.endsWith(T,"{}"))T=n?T:T.slice(0,-2),v=JSON.stringify(v);else if(N.isArray(v)&&Mm(v)||(N.isFileList(v)||N.endsWith(T,"[]"))&&(m=N.toArray(v)))return T=rd(T),m.forEach(function(S,_){!(N.isUndefined(S)||S===null)&&i.append(a===!0?mu([T],_,s):a===null?T:T+"[]",u(S))}),!1}return tl(v)?!0:(i.append(mu(x,T,s),u(v)),!1)}const h=[],d=Object.assign(Fm,{defaultVisitor:c,convertValue:u,isVisitable:tl});function w(v,T){if(!N.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+T.join("."));h.push(v),N.forEach(v,function(m,y){(!(N.isUndefined(m)||m===null)&&r.call(i,m,N.isString(y)?y.trim():y,T,d))===!0&&w(m,T?T.concat(y):[y])}),h.pop()}}if(!N.isObject(e))throw new TypeError("data must be an object");return w(e),i}function gu(e){const i={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return i[n]})}function $l(e,i){this._pairs=[],e&&Rs(e,this,i)}const sd=$l.prototype;sd.append=function(i,t){this._pairs.push([i,t])};sd.toString=function(i){const t=i?function(n){return i.call(this,n,gu)}:gu;return this._pairs.map(function(r){return t(r[0])+"="+t(r[1])},"").join("&")};function Am(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function od(e,i,t){if(!i)return e;const n=t&&t.encode||Am;N.isFunction(t)&&(t={serialize:t});const r=t&&t.serialize;let s;if(r?s=r(i,t):s=N.isURLSearchParams(i)?i.toString():new $l(i,t).toString(n),s){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class vu{constructor(){this.handlers=[]}use(i,t,n){return this.handlers.push({fulfilled:i,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(i){this.handlers[i]&&(this.handlers[i]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(i){N.forEach(this.handlers,function(n){n!==null&&i(n)})}}const ld={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hm=typeof URLSearchParams<"u"?URLSearchParams:$l,jm=typeof FormData<"u"?FormData:null,Bm=typeof Blob<"u"?Blob:null,Um={isBrowser:!0,classes:{URLSearchParams:Hm,FormData:jm,Blob:Bm},protocols:["http","https","file","blob","url","data"]},ea=typeof window<"u"&&typeof document<"u",il=typeof navigator=="object"&&navigator||void 0,Wm=ea&&(!il||["ReactNative","NativeScript","NS"].indexOf(il.product)<0),Vm=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Gm=ea&&window.location.href||"http://localhost",Zm=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ea,hasStandardBrowserEnv:Wm,hasStandardBrowserWebWorkerEnv:Vm,navigator:il,origin:Gm},Symbol.toStringTag,{value:"Module"})),He={...Zm,...Um};function qm(e,i){return Rs(e,new He.classes.URLSearchParams,{visitor:function(t,n,r,s){return He.isNode&&N.isBuffer(t)?(this.append(n,t.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...i})}function Xm(e){return N.matchAll(/\w+|\[(\w*)]/g,e).map(i=>i[0]==="[]"?"":i[1]||i[0])}function Km(e){const i={},t=Object.keys(e);let n;const r=t.length;let s;for(n=0;n<r;n++)s=t[n],i[s]=e[s];return i}function ad(e){function i(t,n,r,s){let a=t[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=t.length;return a=!a&&N.isArray(r)?r.length:a,l?(N.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):((!r[a]||!N.isObject(r[a]))&&(r[a]=[]),i(t,n,r[a],s)&&N.isArray(r[a])&&(r[a]=Km(r[a])),!o)}if(N.isFormData(e)&&N.isFunction(e.entries)){const t={};return N.forEachEntry(e,(n,r)=>{i(Xm(n),r,t,0)}),t}return null}function Qm(e,i,t){if(N.isString(e))try{return(i||JSON.parse)(e),N.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(e)}const Jn={transitional:ld,adapter:["xhr","http","fetch"],transformRequest:[function(i,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=N.isObject(i);if(s&&N.isHTMLForm(i)&&(i=new FormData(i)),N.isFormData(i))return r?JSON.stringify(ad(i)):i;if(N.isArrayBuffer(i)||N.isBuffer(i)||N.isStream(i)||N.isFile(i)||N.isBlob(i)||N.isReadableStream(i))return i;if(N.isArrayBufferView(i))return i.buffer;if(N.isURLSearchParams(i))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),i.toString();let o;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qm(i,this.formSerializer).toString();if((o=N.isFileList(i))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Rs(o?{"files[]":i}:i,l&&new l,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),Qm(i)):i}],transformResponse:[function(i){const t=this.transitional||Jn.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(N.isResponse(i)||N.isReadableStream(i))return i;if(i&&N.isString(i)&&(n&&!this.responseType||r)){const a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(i,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?J.from(o,J.ERR_BAD_RESPONSE,this,null,this.response):o}}return i}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:He.classes.FormData,Blob:He.classes.Blob},validateStatus:function(i){return i>=200&&i<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};N.forEach(["delete","get","head","post","put","patch"],e=>{Jn.headers[e]={}});const Ym=N.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Jm=e=>{const i={};let t,n,r;return e&&e.split(`
`).forEach(function(a){r=a.indexOf(":"),t=a.substring(0,r).trim().toLowerCase(),n=a.substring(r+1).trim(),!(!t||i[t]&&Ym[t])&&(t==="set-cookie"?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)}),i},yu=Symbol("internals");function fn(e){return e&&String(e).trim().toLowerCase()}function zr(e){return e===!1||e==null?e:N.isArray(e)?e.map(zr):String(e)}function $m(e){const i=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(e);)i[n[1]]=n[2];return i}const eg=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function no(e,i,t,n,r){if(N.isFunction(n))return n.call(this,i,t);if(r&&(i=t),!!N.isString(i)){if(N.isString(n))return i.indexOf(n)!==-1;if(N.isRegExp(n))return n.test(i)}}function tg(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(i,t,n)=>t.toUpperCase()+n)}function ig(e,i){const t=N.toCamelCase(" "+i);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+t,{value:function(r,s,a){return this[n].call(this,i,r,s,a)},configurable:!0})})}let Ye=class{constructor(i){i&&this.set(i)}set(i,t,n){const r=this;function s(o,l,u){const c=fn(l);if(!c)throw new Error("header name must be a non-empty string");const h=N.findKey(r,c);(!h||r[h]===void 0||u===!0||u===void 0&&r[h]!==!1)&&(r[h||l]=zr(o))}const a=(o,l)=>N.forEach(o,(u,c)=>s(u,c,l));if(N.isPlainObject(i)||i instanceof this.constructor)a(i,t);else if(N.isString(i)&&(i=i.trim())&&!eg(i))a(Jm(i),t);else if(N.isObject(i)&&N.isIterable(i)){let o={},l,u;for(const c of i){if(!N.isArray(c))throw TypeError("Object iterator must return a key-value pair");o[u=c[0]]=(l=o[u])?N.isArray(l)?[...l,c[1]]:[l,c[1]]:c[1]}a(o,t)}else i!=null&&s(t,i,n);return this}get(i,t){if(i=fn(i),i){const n=N.findKey(this,i);if(n){const r=this[n];if(!t)return r;if(t===!0)return $m(r);if(N.isFunction(t))return t.call(this,r,n);if(N.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(i,t){if(i=fn(i),i){const n=N.findKey(this,i);return!!(n&&this[n]!==void 0&&(!t||no(this,this[n],n,t)))}return!1}delete(i,t){const n=this;let r=!1;function s(a){if(a=fn(a),a){const o=N.findKey(n,a);o&&(!t||no(n,n[o],o,t))&&(delete n[o],r=!0)}}return N.isArray(i)?i.forEach(s):s(i),r}clear(i){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];(!i||no(this,this[s],s,i,!0))&&(delete this[s],r=!0)}return r}normalize(i){const t=this,n={};return N.forEach(this,(r,s)=>{const a=N.findKey(n,s);if(a){t[a]=zr(r),delete t[s];return}const o=i?tg(s):String(s).trim();o!==s&&delete t[s],t[o]=zr(r),n[o]=!0}),this}concat(...i){return this.constructor.concat(this,...i)}toJSON(i){const t=Object.create(null);return N.forEach(this,(n,r)=>{n!=null&&n!==!1&&(t[r]=i&&N.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([i,t])=>i+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(i){return i instanceof this?i:new this(i)}static concat(i,...t){const n=new this(i);return t.forEach(r=>n.set(r)),n}static accessor(i){const n=(this[yu]=this[yu]={accessors:{}}).accessors,r=this.prototype;function s(a){const o=fn(a);n[o]||(ig(r,a),n[o]=!0)}return N.isArray(i)?i.forEach(s):s(i),this}};Ye.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);N.reduceDescriptors(Ye.prototype,({value:e},i)=>{let t=i[0].toUpperCase()+i.slice(1);return{get:()=>e,set(n){this[t]=n}}});N.freezeMethods(Ye);function ro(e,i){const t=this||Jn,n=i||t,r=Ye.from(n.headers);let s=n.data;return N.forEach(e,function(o){s=o.call(t,s,r.normalize(),i?i.status:void 0)}),r.normalize(),s}function ud(e){return!!(e&&e.__CANCEL__)}function nn(e,i,t){J.call(this,e??"canceled",J.ERR_CANCELED,i,t),this.name="CanceledError"}N.inherits(nn,J,{__CANCEL__:!0});function cd(e,i,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?e(t):i(new J("Request failed with status code "+t.status,[J.ERR_BAD_REQUEST,J.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function ng(e){const i=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return i&&i[1]||""}function rg(e,i){e=e||10;const t=new Array(e),n=new Array(e);let r=0,s=0,a;return i=i!==void 0?i:1e3,function(l){const u=Date.now(),c=n[s];a||(a=u),t[r]=l,n[r]=u;let h=s,d=0;for(;h!==r;)d+=t[h++],h=h%e;if(r=(r+1)%e,r===s&&(s=(s+1)%e),u-a<i)return;const w=c&&u-c;return w?Math.round(d*1e3/w):void 0}}function sg(e,i){let t=0,n=1e3/i,r,s;const a=(u,c=Date.now())=>{t=c,r=null,s&&(clearTimeout(s),s=null),e(...u)};return[(...u)=>{const c=Date.now(),h=c-t;h>=n?a(u,c):(r=u,s||(s=setTimeout(()=>{s=null,a(r)},n-h)))},()=>r&&a(r)]}const os=(e,i,t=3)=>{let n=0;const r=rg(50,250);return sg(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-n,u=r(l),c=a<=o;n=a;const h={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&c?(o-a)/u:void 0,event:s,lengthComputable:o!=null,[i?"download":"upload"]:!0};e(h)},t)},wu=(e,i)=>{const t=e!=null;return[n=>i[0]({lengthComputable:t,total:e,loaded:n}),i[1]]},xu=e=>(...i)=>N.asap(()=>e(...i)),og=He.hasStandardBrowserEnv?((e,i)=>t=>(t=new URL(t,He.origin),e.protocol===t.protocol&&e.host===t.host&&(i||e.port===t.port)))(new URL(He.origin),He.navigator&&/(msie|trident)/i.test(He.navigator.userAgent)):()=>!0,lg=He.hasStandardBrowserEnv?{write(e,i,t,n,r,s,a){if(typeof document>"u")return;const o=[`${e}=${encodeURIComponent(i)}`];N.isNumber(t)&&o.push(`expires=${new Date(t).toUTCString()}`),N.isString(n)&&o.push(`path=${n}`),N.isString(r)&&o.push(`domain=${r}`),s===!0&&o.push("secure"),N.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(e){if(typeof document>"u")return null;const i=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return i?decodeURIComponent(i[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ag(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function ug(e,i){return i?e.replace(/\/?\/$/,"")+"/"+i.replace(/^\/+/,""):e}function hd(e,i,t){let n=!ag(i);return e&&(n||t==!1)?ug(e,i):i}const Tu=e=>e instanceof Ye?{...e}:e;function xi(e,i){i=i||{};const t={};function n(u,c,h,d){return N.isPlainObject(u)&&N.isPlainObject(c)?N.merge.call({caseless:d},u,c):N.isPlainObject(c)?N.merge({},c):N.isArray(c)?c.slice():c}function r(u,c,h,d){if(N.isUndefined(c)){if(!N.isUndefined(u))return n(void 0,u,h,d)}else return n(u,c,h,d)}function s(u,c){if(!N.isUndefined(c))return n(void 0,c)}function a(u,c){if(N.isUndefined(c)){if(!N.isUndefined(u))return n(void 0,u)}else return n(void 0,c)}function o(u,c,h){if(h in i)return n(u,c);if(h in e)return n(void 0,u)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,c,h)=>r(Tu(u),Tu(c),h,!0)};return N.forEach(Object.keys({...e,...i}),function(c){const h=l[c]||r,d=h(e[c],i[c],c);N.isUndefined(d)&&h!==o||(t[c]=d)}),t}const dd=e=>{const i=xi({},e);let{data:t,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:s,headers:a,auth:o}=i;if(i.headers=a=Ye.from(a),i.url=od(hd(i.baseURL,i.url,i.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),N.isFormData(t)){if(He.hasStandardBrowserEnv||He.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(N.isFunction(t.getHeaders)){const l=t.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([c,h])=>{u.includes(c.toLowerCase())&&a.set(c,h)})}}if(He.hasStandardBrowserEnv&&(n&&N.isFunction(n)&&(n=n(i)),n||n!==!1&&og(i.url))){const l=r&&s&&lg.read(s);l&&a.set(r,l)}return i},cg=typeof XMLHttpRequest<"u",hg=cg&&function(e){return new Promise(function(t,n){const r=dd(e);let s=r.data;const a=Ye.from(r.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=r,c,h,d,w,v;function T(){w&&w(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(c),r.signal&&r.signal.removeEventListener("abort",c)}let x=new XMLHttpRequest;x.open(r.method.toUpperCase(),r.url,!0),x.timeout=r.timeout;function m(){if(!x)return;const S=Ye.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),b={data:!o||o==="text"||o==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:S,config:e,request:x};cd(function(z){t(z),T()},function(z){n(z),T()},b),x=null}"onloadend"in x?x.onloadend=m:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(m)},x.onabort=function(){x&&(n(new J("Request aborted",J.ECONNABORTED,e,x)),x=null)},x.onerror=function(_){const b=_&&_.message?_.message:"Network Error",O=new J(b,J.ERR_NETWORK,e,x);O.event=_||null,n(O),x=null},x.ontimeout=function(){let _=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const b=r.transitional||ld;r.timeoutErrorMessage&&(_=r.timeoutErrorMessage),n(new J(_,b.clarifyTimeoutError?J.ETIMEDOUT:J.ECONNABORTED,e,x)),x=null},s===void 0&&a.setContentType(null),"setRequestHeader"in x&&N.forEach(a.toJSON(),function(_,b){x.setRequestHeader(b,_)}),N.isUndefined(r.withCredentials)||(x.withCredentials=!!r.withCredentials),o&&o!=="json"&&(x.responseType=r.responseType),u&&([d,v]=os(u,!0),x.addEventListener("progress",d)),l&&x.upload&&([h,w]=os(l),x.upload.addEventListener("progress",h),x.upload.addEventListener("loadend",w)),(r.cancelToken||r.signal)&&(c=S=>{x&&(n(!S||S.type?new nn(null,e,x):S),x.abort(),x=null)},r.cancelToken&&r.cancelToken.subscribe(c),r.signal&&(r.signal.aborted?c():r.signal.addEventListener("abort",c)));const y=ng(r.url);if(y&&He.protocols.indexOf(y)===-1){n(new J("Unsupported protocol "+y+":",J.ERR_BAD_REQUEST,e));return}x.send(s||null)})},dg=(e,i)=>{const{length:t}=e=e?e.filter(Boolean):[];if(i||t){let n=new AbortController,r;const s=function(u){if(!r){r=!0,o();const c=u instanceof Error?u:this.reason;n.abort(c instanceof J?c:new nn(c instanceof Error?c.message:c))}};let a=i&&setTimeout(()=>{a=null,s(new J(`timeout ${i} of ms exceeded`,J.ETIMEDOUT))},i);const o=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),e=null)};e.forEach(u=>u.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>N.asap(o),l}},fg=function*(e,i){let t=e.byteLength;if(t<i){yield e;return}let n=0,r;for(;n<t;)r=n+i,yield e.slice(n,r),n=r},pg=async function*(e,i){for await(const t of mg(e))yield*fg(t,i)},mg=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const i=e.getReader();try{for(;;){const{done:t,value:n}=await i.read();if(t)break;yield n}}finally{await i.cancel()}},Su=(e,i,t,n)=>{const r=pg(e,i);let s=0,a,o=l=>{a||(a=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:u,value:c}=await r.next();if(u){o(),l.close();return}let h=c.byteLength;if(t){let d=s+=h;t(d)}l.enqueue(new Uint8Array(c))}catch(u){throw o(u),u}},cancel(l){return o(l),r.return()}},{highWaterMark:2})},Eu=64*1024,{isFunction:xr}=N,gg=(({Request:e,Response:i})=>({Request:e,Response:i}))(N.global),{ReadableStream:Cu,TextEncoder:Pu}=N.global,Ru=(e,...i)=>{try{return!!e(...i)}catch{return!1}},vg=e=>{e=N.merge.call({skipUndefined:!0},gg,e);const{fetch:i,Request:t,Response:n}=e,r=i?xr(i):typeof fetch=="function",s=xr(t),a=xr(n);if(!r)return!1;const o=r&&xr(Cu),l=r&&(typeof Pu=="function"?(v=>T=>v.encode(T))(new Pu):async v=>new Uint8Array(await new t(v).arrayBuffer())),u=s&&o&&Ru(()=>{let v=!1;const T=new t(He.origin,{body:new Cu,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!T}),c=a&&o&&Ru(()=>N.isReadableStream(new n("").body)),h={stream:c&&(v=>v.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!h[v]&&(h[v]=(T,x)=>{let m=T&&T[v];if(m)return m.call(T);throw new J(`Response type '${v}' is not supported`,J.ERR_NOT_SUPPORT,x)})});const d=async v=>{if(v==null)return 0;if(N.isBlob(v))return v.size;if(N.isSpecCompliantForm(v))return(await new t(He.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(N.isArrayBufferView(v)||N.isArrayBuffer(v))return v.byteLength;if(N.isURLSearchParams(v)&&(v=v+""),N.isString(v))return(await l(v)).byteLength},w=async(v,T)=>{const x=N.toFiniteNumber(v.getContentLength());return x??d(T)};return async v=>{let{url:T,method:x,data:m,signal:y,cancelToken:S,timeout:_,onDownloadProgress:b,onUploadProgress:O,responseType:z,headers:M,withCredentials:U="same-origin",fetchOptions:W}=dd(v),te=i||fetch;z=z?(z+"").toLowerCase():"text";let ne=dg([y,S&&S.toAbortSignal()],_),de=null;const Te=ne&&ne.unsubscribe&&(()=>{ne.unsubscribe()});let st;try{if(O&&u&&x!=="get"&&x!=="head"&&(st=await w(M,m))!==0){let $=new t(T,{method:"POST",body:m,duplex:"half"}),re;if(N.isFormData(m)&&(re=$.headers.get("content-type"))&&M.setContentType(re),$.body){const[K,Oe]=wu(st,os(xu(O)));m=Su($.body,Eu,K,Oe)}}N.isString(U)||(U=U?"include":"omit");const ce=s&&"credentials"in t.prototype,ke={...W,signal:ne,method:x.toUpperCase(),headers:M.normalize().toJSON(),body:m,duplex:"half",credentials:ce?U:void 0};de=s&&new t(T,ke);let L=await(s?te(de,W):te(T,ke));const V=c&&(z==="stream"||z==="response");if(c&&(b||V&&Te)){const $={};["status","statusText","headers"].forEach(ft=>{$[ft]=L[ft]});const re=N.toFiniteNumber(L.headers.get("content-length")),[K,Oe]=b&&wu(re,os(xu(b),!0))||[];L=new n(Su(L.body,Eu,K,()=>{Oe&&Oe(),Te&&Te()}),$)}z=z||"text";let q=await h[N.findKey(h,z)||"text"](L,v);return!V&&Te&&Te(),await new Promise(($,re)=>{cd($,re,{data:q,headers:Ye.from(L.headers),status:L.status,statusText:L.statusText,config:v,request:de})})}catch(ce){throw Te&&Te(),ce&&ce.name==="TypeError"&&/Load failed|fetch/i.test(ce.message)?Object.assign(new J("Network Error",J.ERR_NETWORK,v,de),{cause:ce.cause||ce}):J.from(ce,ce&&ce.code,v,de)}}},yg=new Map,fd=e=>{let i=e&&e.env||{};const{fetch:t,Request:n,Response:r}=i,s=[n,r,t];let a=s.length,o=a,l,u,c=yg;for(;o--;)l=s[o],u=c.get(l),u===void 0&&c.set(l,u=o?new Map:vg(i)),c=u;return u};fd();const ta={http:Im,xhr:hg,fetch:{get:fd}};N.forEach(ta,(e,i)=>{if(e){try{Object.defineProperty(e,"name",{value:i})}catch{}Object.defineProperty(e,"adapterName",{value:i})}});const _u=e=>`- ${e}`,wg=e=>N.isFunction(e)||e===null||e===!1;function xg(e,i){e=N.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let a=0;a<t;a++){n=e[a];let o;if(r=n,!wg(n)&&(r=ta[(o=String(n)).toLowerCase()],r===void 0))throw new J(`Unknown adapter '${o}'`);if(r&&(N.isFunction(r)||(r=r.get(i))))break;s[o||"#"+a]=r}if(!r){const a=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=t?a.length>1?`since :
`+a.map(_u).join(`
`):" "+_u(a[0]):"as no adapter specified";throw new J("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r}const pd={getAdapter:xg,adapters:ta};function so(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new nn(null,e)}function ku(e){return so(e),e.headers=Ye.from(e.headers),e.data=ro.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),pd.getAdapter(e.adapter||Jn.adapter,e)(e).then(function(n){return so(e),n.data=ro.call(e,e.transformResponse,n),n.headers=Ye.from(n.headers),n},function(n){return ud(n)||(so(e),n&&n.response&&(n.response.data=ro.call(e,e.transformResponse,n.response),n.response.headers=Ye.from(n.response.headers))),Promise.reject(n)})}const md="1.13.2",_s={};["object","boolean","number","function","string","symbol"].forEach((e,i)=>{_s[e]=function(n){return typeof n===e||"a"+(i<1?"n ":" ")+e}});const Nu={};_s.transitional=function(i,t,n){function r(s,a){return"[Axios v"+md+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,o)=>{if(i===!1)throw new J(r(a," has been removed"+(t?" in "+t:"")),J.ERR_DEPRECATED);return t&&!Nu[a]&&(Nu[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),i?i(s,a,o):!0}};_s.spelling=function(i){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${i}`),!0)};function Tg(e,i,t){if(typeof e!="object")throw new J("options must be an object",J.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const s=n[r],a=i[s];if(a){const o=e[s],l=o===void 0||a(o,s,e);if(l!==!0)throw new J("option "+s+" must be "+l,J.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new J("Unknown option "+s,J.ERR_BAD_OPTION)}}const Ir={assertOptions:Tg,validators:_s},Ct=Ir.validators;let pi=class{constructor(i){this.defaults=i||{},this.interceptors={request:new vu,response:new vu}}async request(i,t){try{return await this._request(i,t)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(i,t){typeof i=="string"?(t=t||{},t.url=i):t=i||{},t=xi(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;n!==void 0&&Ir.assertOptions(n,{silentJSONParsing:Ct.transitional(Ct.boolean),forcedJSONParsing:Ct.transitional(Ct.boolean),clarifyTimeoutError:Ct.transitional(Ct.boolean)},!1),r!=null&&(N.isFunction(r)?t.paramsSerializer={serialize:r}:Ir.assertOptions(r,{encode:Ct.function,serialize:Ct.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ir.assertOptions(t,{baseUrl:Ct.spelling("baseURL"),withXsrfToken:Ct.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=s&&N.merge(s.common,s[t.method]);s&&N.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),t.headers=Ye.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(l=l&&T.synchronous,o.unshift(T.fulfilled,T.rejected))});const u=[];this.interceptors.response.forEach(function(T){u.push(T.fulfilled,T.rejected)});let c,h=0,d;if(!l){const v=[ku.bind(this),void 0];for(v.unshift(...o),v.push(...u),d=v.length,c=Promise.resolve(t);h<d;)c=c.then(v[h++],v[h++]);return c}d=o.length;let w=t;for(;h<d;){const v=o[h++],T=o[h++];try{w=v(w)}catch(x){T.call(this,x);break}}try{c=ku.call(this,w)}catch(v){return Promise.reject(v)}for(h=0,d=u.length;h<d;)c=c.then(u[h++],u[h++]);return c}getUri(i){i=xi(this.defaults,i);const t=hd(i.baseURL,i.url,i.allowAbsoluteUrls);return od(t,i.params,i.paramsSerializer)}};N.forEach(["delete","get","head","options"],function(i){pi.prototype[i]=function(t,n){return this.request(xi(n||{},{method:i,url:t,data:(n||{}).data}))}});N.forEach(["post","put","patch"],function(i){function t(n){return function(s,a,o){return this.request(xi(o||{},{method:i,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}pi.prototype[i]=t(),pi.prototype[i+"Form"]=t(!0)});let Sg=class gd{constructor(i){if(typeof i!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(s){t=s});const n=this;this.promise.then(r=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](r);n._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(o=>{n.subscribe(o),s=o}).then(r);return a.cancel=function(){n.unsubscribe(s)},a},i(function(s,a,o){n.reason||(n.reason=new nn(s,a,o),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]}unsubscribe(i){if(!this._listeners)return;const t=this._listeners.indexOf(i);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const i=new AbortController,t=n=>{i.abort(n)};return this.subscribe(t),i.signal.unsubscribe=()=>this.unsubscribe(t),i.signal}static source(){let i;return{token:new gd(function(r){i=r}),cancel:i}}};function Eg(e){return function(t){return e.apply(null,t)}}function Cg(e){return N.isObject(e)&&e.isAxiosError===!0}const nl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(nl).forEach(([e,i])=>{nl[i]=e});function vd(e){const i=new pi(e),t=Xh(pi.prototype.request,i);return N.extend(t,pi.prototype,i,{allOwnKeys:!0}),N.extend(t,i,null,{allOwnKeys:!0}),t.create=function(r){return vd(xi(e,r))},t}const ue=vd(Jn);ue.Axios=pi;ue.CanceledError=nn;ue.CancelToken=Sg;ue.isCancel=ud;ue.VERSION=md;ue.toFormData=Rs;ue.AxiosError=J;ue.Cancel=ue.CanceledError;ue.all=function(i){return Promise.all(i)};ue.spread=Eg;ue.isAxiosError=Cg;ue.mergeConfig=xi;ue.AxiosHeaders=Ye;ue.formToJSON=e=>ad(N.isHTMLForm(e)?new FormData(e):e);ue.getAdapter=pd.getAdapter;ue.HttpStatusCode=nl;ue.default=ue;const{Axios:Ev,AxiosError:Cv,CanceledError:Pv,isCancel:Rv,CancelToken:_v,VERSION:kv,all:Nv,Cancel:Dv,isAxiosError:bv,spread:Ov,toFormData:Lv,AxiosHeaders:zv,HttpStatusCode:Iv,formToJSON:Mv,getAdapter:Fv,mergeConfig:Av}=ue,Nt="https://photo-mosaic-app.onrender.com/api";async function Du(){return(await ue.post(`${Nt}/session`)).data.sessionId}async function bu(e){await ue.delete(`${Nt}/session/${e}`)}async function Pg(e,i){const t=new FormData;t.append("image",i);const n=await ue.post(`${Nt}/session/${e}/target`,t,{headers:{"Content-Type":"multipart/form-data"}});return{width:n.data.width,height:n.data.height,analysis:n.data.analysis}}async function Rg(e,i,t){return(await ue.post(`${Nt}/session/${e}/dimensions`,{width:i,height:t})).data.requirements}async function _g(e,i,t){let r=0;for(let s=0;s<i.length;s+=30){const a=i.slice(s,s+30),o=new FormData;a.forEach(u=>{o.append("images",u)}),r=(await ue.post(`${Nt}/session/${e}/tiles`,o,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:u=>{if(t&&u.total){const c=u.loaded/u.total,h=Math.round((s+c*a.length)/i.length*100);t(h)}}})).data.totalTiles}return r}async function kg(e){await ue.delete(`${Nt}/session/${e}/tiles`)}async function Ng(e,i){await ue.put(`${Nt}/session/${e}/settings`,i)}async function Dg(e,i){return(await ue.post(`${Nt}/session/${e}/generate`,i)).data.dziMetadata}function bg(e){return`${Nt}/session/${e}/mosaic.dzi`}function Og(e){return`${Nt}/session/${e}/download`}const Ou={sessionId:null,step:1,targetImagePreview:null,targetImageDimensions:null,imageAnalysis:null,isUploadingTarget:!1,manualMode:!1,desiredWidth:3e3,desiredHeight:2e3,requirements:null,tileCount:0,tilePreviews:[],allowDuplicates:!0,allowTinting:!1,nineXDetail:!1,selectedResolution:"medium",useAllTiles:!1,isGenerating:!1,hasMosaic:!1,dziMetadata:null,error:null};function Lg(){const[e,i]=X.useState(Ou);X.useEffect(()=>((async()=>{try{const y=await Du();i(S=>({...S,sessionId:y}))}catch{i(S=>({...S,error:"Failed to create session"}))}})(),()=>{e.sessionId&&bu(e.sessionId).catch(console.error)}),[]),X.useEffect(()=>{const m=()=>{e.sessionId&&navigator.sendBeacon(`/api/session/${e.sessionId}`,"")};return window.addEventListener("beforeunload",m),()=>window.removeEventListener("beforeunload",m)},[e.sessionId]);const t=X.useCallback(async m=>{if(e.sessionId){console.log("Starting target upload:",m.name,m.type,m.size),i(y=>({...y,error:null,isUploadingTarget:!0}));try{let y;try{y=URL.createObjectURL(m)}catch{y=""}const{width:S,height:_,analysis:b}=await Pg(e.sessionId,m);console.log("Target upload successful:",S,_),i(O=>({...O,targetImagePreview:y,targetImageDimensions:{width:S,height:_},imageAnalysis:b,desiredWidth:S,desiredHeight:_,step:2,isUploadingTarget:!1}))}catch(y){console.error("Target upload failed:",y),i(S=>({...S,error:"Failed to upload target image. Please try a different image format.",isUploadingTarget:!1}))}}},[e.sessionId]),n=X.useCallback(m=>{i(y=>({...y,manualMode:m}))},[]),r=X.useCallback(async(m,y)=>{if(e.sessionId){i(S=>({...S,error:null}));try{const S=await Rg(e.sessionId,m,y);i(_=>({..._,desiredWidth:m,desiredHeight:y,requirements:S,step:Math.max(_.step,3)}))}catch{i(_=>({..._,error:"Failed to set dimensions"}))}}},[e.sessionId]),s=X.useCallback(async(m,y)=>{if(e.sessionId){i(S=>({...S,error:null}));try{const S=m.slice(0,50).map(b=>URL.createObjectURL(b)),_=await _g(e.sessionId,m,y);i(b=>({...b,tileCount:_,tilePreviews:[...b.tilePreviews,...S].slice(0,50),step:Math.max(b.step,3)}))}catch{i(_=>({..._,error:"Failed to upload tile images"}))}}},[e.sessionId]),a=X.useCallback(async()=>{if(e.sessionId)try{await kg(e.sessionId),e.tilePreviews.forEach(URL.revokeObjectURL),i(m=>({...m,tileCount:0,tilePreviews:[]}))}catch{i(y=>({...y,error:"Failed to clear tiles"}))}},[e.sessionId,e.tilePreviews]),o=X.useCallback(async m=>{if(e.sessionId)try{const{nineXDetail:y,...S}=m;Object.keys(S).length>0&&await Ng(e.sessionId,S),i(_=>({..._,...m,allowDuplicates:m.nineXDetail?!0:m.allowDuplicates??_.allowDuplicates}))}catch{i(S=>({...S,error:"Failed to update settings"}))}},[e.sessionId]),l=X.useCallback(m=>{i(y=>({...y,nineXDetail:m,allowDuplicates:m?!0:y.allowDuplicates}))},[]),u=X.useCallback(m=>{i(y=>({...y,selectedResolution:m}))},[]),c=X.useCallback(m=>{i(y=>({...y,useAllTiles:m}))},[]),h=X.useCallback(async()=>{var m,y;if(e.sessionId){i(S=>({...S,isGenerating:!0,error:null}));try{const S={resolution:e.selectedResolution,nineXDetail:e.nineXDetail};if(e.manualMode)e.useAllTiles&&e.selectedResolution==="high"&&(S.useAllTiles=!0);else if(e.imageAnalysis){const b=e.imageAnalysis.recommendedTiles[e.selectedResolution];e.selectedResolution==="high"&&e.tileCount>b?S.useAllTiles=!0:S.exactTileCount=Math.min(b,e.tileCount)}const _=await Dg(e.sessionId,S);i(b=>({...b,isGenerating:!1,hasMosaic:!0,dziMetadata:_,step:5}))}catch(S){const _=S instanceof Error?S.message:((y=(m=S==null?void 0:S.response)==null?void 0:m.data)==null?void 0:y.error)||"Failed to generate mosaic";i(b=>({...b,isGenerating:!1,error:_}))}}},[e.sessionId,e.selectedResolution,e.manualMode,e.imageAnalysis,e.tileCount,e.useAllTiles,e.nineXDetail]),d=X.useCallback(()=>e.sessionId?bg(e.sessionId):"",[e.sessionId]),w=X.useCallback(()=>e.sessionId?Og(e.sessionId):"",[e.sessionId]),v=X.useCallback(async()=>{e.targetImagePreview&&URL.revokeObjectURL(e.targetImagePreview),e.tilePreviews.forEach(URL.revokeObjectURL),e.sessionId&&await bu(e.sessionId).catch(console.error);const m=await Du();i({...Ou,sessionId:m})},[e.sessionId,e.targetImagePreview,e.tilePreviews]),T=X.useCallback(()=>{i(m=>({...m,error:null}))},[]),x=X.useCallback(()=>{e.targetImagePreview&&URL.revokeObjectURL(e.targetImagePreview),i(m=>({...m,step:m.tileCount>0?2:1,targetImagePreview:null,targetImageDimensions:null,imageAnalysis:null,requirements:null,hasMosaic:!1,dziMetadata:null}))},[e.targetImagePreview]);return{state:e,uploadTarget:t,setManualMode:n,setDimensions:r,uploadTiles:s,clearTiles:a,updateSettings:o,setResolution:u,setUseAllTiles:c,setNineXDetail:l,generateMosaic:h,getDziUrl:d,getDownloadUrl:w,reset:v,changeTarget:x,clearError:T}}/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zg={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ig=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),se=(e,i)=>{const t=X.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...u},c)=>X.createElement("svg",{ref:c,...zg,width:r,height:r,stroke:n,strokeWidth:a?Number(s)*24/Number(r):s,className:["lucide",`lucide-${Ig(e)}`,o].join(" "),...u},[...i.map(([h,d])=>X.createElement(h,d)),...Array.isArray(l)?l:[l]]));return t.displayName=`${e}`,t};/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mg=se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fg=se("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ag=se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hg=se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jg=se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ug=se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wg=se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=se("Grid2x2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=se("ImagePlus",[["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7",key:"31hg93"}],["line",{x1:"16",x2:"22",y1:"5",y2:"5",key:"ez7e4s"}],["line",{x1:"19",x2:"19",y1:"2",y2:"8",key:"1gkr8c"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=se("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=se("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=se("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kg=se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qg=se("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yg=se("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jg=se("Paintbrush",[["path",{d:"M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z",key:"m6k5sh"}],["path",{d:"M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7",key:"arzq70"}],["path",{d:"M14.5 17.5 4.5 15",key:"s7fvrz"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $g=se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=se("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=se("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rv=se("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=se("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=se("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.312.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=se("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function cv({currentStep:e,steps:i}){return P.jsx("div",{className:"flex items-center justify-between mb-8",children:i.map((t,n)=>{const r=n+1,s=e>r,a=e===r;return P.jsxs("div",{className:"flex items-center flex-1",children:[P.jsxs("div",{className:"flex flex-col items-center",children:[P.jsx("div",{className:`
                  w-10 h-10 rounded-full flex items-center justify-center font-medium
                  transition-all duration-200
                  ${s?"bg-green-500 text-white":a?"bg-blue-500 text-white ring-4 ring-blue-500/30":"bg-gray-700 text-gray-400"}
                `,children:s?P.jsx(Hg,{className:"w-5 h-5"}):r}),P.jsx("span",{className:`
                  text-xs mt-2 text-center max-w-[80px]
                  ${a?"text-blue-400":"text-gray-500"}
                `,children:t})]}),n<i.length-1&&P.jsx("div",{className:`
                  flex-1 h-1 mx-2 rounded
                  ${s?"bg-green-500":"bg-gray-700"}
                `})]},n)})})}function hv({onUpload:e,preview:i,dimensions:t,isLoading:n}){const r=X.useRef(null),s=X.useCallback(u=>{var h;const c=(h=u.target.files)==null?void 0:h[0];c&&(console.log("File selected:",c.name,c.type,c.size),e(c)),r.current&&(r.current.value="")},[e]),a=X.useCallback(()=>{var u;(u=r.current)==null||u.click()},[]),o=X.useCallback(u=>{u.preventDefault(),u.stopPropagation();const c=u.dataTransfer.files[0];c&&c.type.startsWith("image/")&&e(c)},[e]),l=X.useCallback(u=>{u.preventDefault(),u.stopPropagation()},[]);return i?P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 border-green-500 bg-gray-800",children:[P.jsx("img",{src:i,alt:"Target",className:"w-full h-64 object-contain bg-gray-900"}),P.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 px-4 py-2 text-sm",children:[P.jsx("span",{className:"text-green-400",children:"Target image loaded"}),t&&P.jsxs("span",{className:"text-gray-400 ml-2",children:["(",t.width," x ",t.height," px)"]})]})]}),P.jsx("input",{ref:r,type:"file",accept:"image/*,.heic,.heif",capture:"environment",onChange:s,className:"hidden"}),P.jsx("button",{onClick:a,className:"text-sm text-blue-400 hover:text-blue-300 underline active:text-blue-200",children:"Change target image"})]}):P.jsxs("div",{className:"space-y-4",children:[P.jsx("input",{ref:r,type:"file",accept:"image/*,.heic,.heif",onChange:s,className:"hidden"}),P.jsx("div",{onClick:a,onDrop:o,onDragOver:l,className:`
          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer
          transition-all duration-200 active:bg-gray-700/50
          border-gray-600 hover:border-gray-500 bg-gray-800/50
          ${n?"opacity-50 pointer-events-none":""}
        `,children:n?P.jsxs("div",{className:"flex flex-col items-center gap-4",children:[P.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),P.jsx("p",{className:"text-gray-400",children:"Processing image..."})]}):P.jsxs("div",{className:"flex flex-col items-center gap-4",children:[P.jsx(Zg,{className:"w-12 h-12 text-gray-400"}),P.jsxs("div",{children:[P.jsx("p",{className:"text-gray-300 font-medium",children:"Tap to select your target image"}),P.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"or drag & drop on desktop"})]}),P.jsx("p",{className:"text-gray-600 text-xs",children:"Supports PNG, JPG, HEIC, WebP"})]})}),P.jsx("div",{className:"flex justify-center",children:P.jsxs("button",{onClick:()=>{const u=document.createElement("input");u.type="file",u.accept="image/*",u.capture="environment",u.onchange=c=>{var d;const h=(d=c.target.files)==null?void 0:d[0];h&&e(h)},u.click()},className:"flex items-center gap-2 text-sm text-gray-400 hover:text-gray-300 active:text-gray-200",children:[P.jsx(Fg,{className:"w-4 h-4"}),"Take a photo instead"]})})]})}function dv({initialWidth:e,initialHeight:i,originalDimensions:t,requirements:n,onSubmit:r}){const[s,a]=X.useState(e),[o,l]=X.useState(i),[u,c]=X.useState(!0),h=t?t.width/t.height:1;X.useEffect(()=>{a(e),l(i)},[e,i]);const d=T=>{a(T),u&&l(Math.round(T/h))},w=T=>{l(T),u&&a(Math.round(T*h))},v=T=>{T.preventDefault(),s>=100&&o>=100&&r(s,o)};return P.jsxs("div",{className:"space-y-6",children:[P.jsxs("form",{onSubmit:v,className:"space-y-4",children:[P.jsxs("div",{className:"flex items-center gap-4",children:[P.jsxs("div",{className:"flex-1",children:[P.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Width (px)"}),P.jsx("input",{type:"number",value:s,onChange:T=>d(parseInt(T.target.value)||0),min:100,max:2e4,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none"})]}),P.jsx("button",{type:"button",onClick:()=>c(!u),className:`mt-6 p-2 rounded-lg ${u?"bg-blue-500/20 text-blue-400":"bg-gray-700 text-gray-400"}`,title:u?"Unlock aspect ratio":"Lock aspect ratio",children:u?P.jsx(Kg,{className:"w-5 h-5"}):P.jsx(rv,{className:"w-5 h-5"})}),P.jsxs("div",{className:"flex-1",children:[P.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Height (px)"}),P.jsx("input",{type:"number",value:o,onChange:T=>w(parseInt(T.target.value)||0),min:100,max:2e4,className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-2 text-white focus:border-blue-500 focus:outline-none"})]})]}),P.jsxs("button",{type:"submit",disabled:s<100||o<100,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 disabled:text-gray-500 text-white font-medium py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2",children:[P.jsx(tv,{className:"w-4 h-4"}),"Calculate Requirements"]})]}),n&&P.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 space-y-3",children:[P.jsx("h3",{className:"text-sm font-medium text-gray-300 uppercase tracking-wider",children:"Required Tile Images"}),P.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[P.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[P.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:n.low}),P.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Low"}),P.jsxs("div",{className:"text-xs text-gray-500",children:[n.gridLow.cols,"x",n.gridLow.rows]})]}),P.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3 ring-2 ring-blue-500",children:[P.jsx("div",{className:"text-2xl font-bold text-blue-400",children:n.medium}),P.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Medium"}),P.jsxs("div",{className:"text-xs text-gray-500",children:[n.gridMedium.cols,"x",n.gridMedium.rows]})]}),P.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[P.jsx("div",{className:"text-2xl font-bold text-green-400",children:n.high}),P.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"High"}),P.jsxs("div",{className:"text-xs text-gray-500",children:[n.gridHigh.cols,"x",n.gridHigh.rows]})]})]}),P.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Upload at least this many unique images for each resolution level"})]})]})}function fv({onUpload:e,onClear:i,tileCount:t,previews:n,requiredCount:r}){const[s,a]=X.useState(null),[o,l]=X.useState(!1),u=X.useRef(null),c=X.useCallback(async x=>{const m=Array.from(x).filter(y=>y.type.startsWith("image/")||y.name.toLowerCase().endsWith(".heic")||y.name.toLowerCase().endsWith(".heif"));if(m.length>0){console.log(`Processing ${m.length} tile images`),l(!0),a(0);try{await e(m,a)}finally{l(!1),a(null)}}},[e]),h=X.useCallback(x=>{x.target.files&&x.target.files.length>0&&c(x.target.files),u.current&&(u.current.value="")},[c]),d=X.useCallback(()=>{var x;(x=u.current)==null||x.click()},[]),w=X.useCallback(x=>{x.preventDefault(),x.stopPropagation(),x.dataTransfer.files.length>0&&c(x.dataTransfer.files)},[c]),v=X.useCallback(x=>{x.preventDefault(),x.stopPropagation()},[]),T=t>=r;return P.jsxs("div",{className:"space-y-4",children:[P.jsx("input",{ref:u,type:"file",accept:"image/*,.heic,.heif",multiple:!0,onChange:h,className:"hidden"}),P.jsxs("div",{className:"flex items-center justify-between",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx(Xg,{className:"w-5 h-5 text-gray-400"}),P.jsxs("span",{className:"text-gray-300",children:[t," tile",t!==1?"s":""," uploaded"]}),T&&P.jsx(Ag,{className:"w-4 h-4 text-green-400"})]}),t>0&&P.jsxs("button",{onClick:i,className:"text-red-400 hover:text-red-300 active:text-red-200 text-sm flex items-center gap-1",children:[P.jsx(nv,{className:"w-4 h-4"}),"Clear all"]})]}),o&&s!==null&&P.jsx("div",{className:"bg-gray-700 rounded-full h-2 overflow-hidden",children:P.jsx("div",{className:"bg-blue-500 h-full transition-all duration-200",style:{width:`${s}%`}})}),!T&&t>0&&r>0&&P.jsxs("div",{className:"text-yellow-400 text-sm bg-yellow-400/10 rounded-lg px-3 py-2",children:["Need ",r-t," more images for selected quality"]}),P.jsx("div",{onClick:t===0?d:void 0,onDrop:w,onDragOver:v,className:`
          border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200
          ${t>0?"border-gray-700 bg-gray-800/30":"border-gray-600 hover:border-gray-500 bg-gray-800/50 cursor-pointer active:bg-gray-700/50"}
          ${o?"opacity-50 pointer-events-none":""}
        `,children:o?P.jsxs("div",{className:"flex flex-col items-center gap-2",children:[P.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full"}),P.jsx("p",{className:"text-gray-400",children:"Processing images..."}),s!==null&&P.jsxs("p",{className:"text-gray-500 text-sm",children:[s,"% uploaded"]})]}):t>0?P.jsxs("div",{className:"space-y-3",children:[P.jsxs("div",{className:"flex flex-wrap justify-center gap-1 max-h-32 overflow-hidden",children:[n.slice(0,30).map((x,m)=>P.jsx("img",{src:x,alt:`Tile ${m+1}`,className:"w-10 h-10 object-cover rounded"},m)),t>30&&P.jsxs("div",{className:"w-10 h-10 bg-gray-700 rounded flex items-center justify-center text-xs text-gray-400",children:["+",t-30]})]}),P.jsx("button",{onClick:x=>{x.stopPropagation(),d()},className:"text-blue-400 hover:text-blue-300 active:text-blue-200 text-sm underline",children:"Add more images"})]}):P.jsxs("div",{className:"flex flex-col items-center gap-3",children:[P.jsx(sv,{className:"w-10 h-10 text-gray-400"}),P.jsxs("div",{children:[P.jsx("p",{className:"text-gray-300 font-medium",children:"Tap to select tile images"}),P.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Select multiple photos from your library"})]}),P.jsx("p",{className:"text-gray-600 text-xs",children:"Supports PNG, JPG, HEIC, WebP"})]})})]})}function pv({allowDuplicates:e,allowTinting:i,nineXDetail:t,selectedResolution:n,requirements:r,imageAnalysis:s,tileCount:a,useAllTiles:o,manualMode:l,onDuplicatesChange:u,onTintingChange:c,onNineXDetailChange:h,onResolutionChange:d,onUseAllTilesChange:w}){const v=m=>{if(l&&r)switch(m){case"low":return r.low;case"medium":return r.medium;case"high":return r.high}else if(s)return s.recommendedTiles[m];return 0},T=v(n),x=e||a>=T;return P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:"space-y-3",children:[P.jsx("label",{className:"block text-sm font-medium text-gray-300",children:"Quality Level"}),P.jsx("div",{className:"grid grid-cols-3 gap-2",children:["low","medium","high"].map(m=>{const y=v(m),S=!e&&a<y,_=m==="high"&&a>y;return P.jsxs("button",{onClick:()=>!S&&d(m),disabled:S,className:`
                  p-3 rounded-lg border-2 transition-all text-center
                  ${n===m?"border-blue-500 bg-blue-500/20 text-blue-300":S?"border-gray-700 bg-gray-800/30 text-gray-600 cursor-not-allowed":"border-gray-600 bg-gray-800/50 text-gray-300 hover:border-gray-500"}
                `,children:[P.jsx("div",{className:"font-medium capitalize",children:m}),P.jsxs("div",{className:"text-xs mt-1 opacity-70",children:[y," tiles ",l?"required":"recommended"]}),_&&n===m&&P.jsxs("div",{className:"text-xs text-green-400 mt-1",children:["Will use all ",a,"!"]}),S&&P.jsxs("div",{className:"text-xs text-red-400 mt-1",children:["Need ",y-a," more"]})]},m)})})]}),P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx(Ug,{className:"w-5 h-5 text-gray-400"}),P.jsxs("div",{children:[P.jsx("div",{className:"text-sm font-medium text-gray-300",children:"Allow Duplicate Tiles"}),P.jsx("div",{className:"text-xs text-gray-500",children:"Reuse tiles when not enough unique images"})]})]}),P.jsx("button",{onClick:()=>u(!e),className:`
              relative w-12 h-6 rounded-full transition-colors
              ${e?"bg-blue-500":"bg-gray-600"}
            `,children:P.jsx("span",{className:`
                absolute top-1 w-4 h-4 bg-white rounded-full transition-transform
                ${e?"translate-x-7":"translate-x-1"}
              `})})]}),P.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx(Jg,{className:"w-5 h-5 text-gray-400"}),P.jsxs("div",{children:[P.jsx("div",{className:"text-sm font-medium text-gray-300",children:"Allow Color Tinting"}),P.jsx("div",{className:"text-xs text-gray-500",children:"Subtle color adjustment for better matching"})]})]}),P.jsx("button",{onClick:()=>c(!i),className:`
              relative w-12 h-6 rounded-full transition-colors
              ${i?"bg-blue-500":"bg-gray-600"}
            `,children:P.jsx("span",{className:`
                absolute top-1 w-4 h-4 bg-white rounded-full transition-transform
                ${i?"translate-x-7":"translate-x-1"}
              `})})]}),P.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-900/30 border border-purple-700/50 rounded-lg",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx(Vg,{className:"w-5 h-5 text-purple-400"}),P.jsxs("div",{children:[P.jsx("div",{className:"text-sm font-medium text-purple-300",children:"9x Detail Mode"}),P.jsxs("div",{className:"text-xs text-purple-400",children:["Each tile becomes 9 sub-tiles (3x3) for maximum detail",t&&P.jsx("span",{className:"text-purple-300",children:" (duplicates auto-enabled)"})]})]})]}),P.jsx("button",{onClick:()=>h(!t),className:`
              relative w-12 h-6 rounded-full transition-colors
              ${t?"bg-purple-500":"bg-gray-600"}
            `,children:P.jsx("span",{className:`
                absolute top-1 w-4 h-4 bg-white rounded-full transition-transform
                ${t?"translate-x-7":"translate-x-1"}
              `})})]}),l&&n==="high"&&a>T&&P.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-900/30 border border-green-700/50 rounded-lg",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx(Yg,{className:"w-5 h-5 text-green-400"}),P.jsxs("div",{children:[P.jsxs("div",{className:"text-sm font-medium text-green-300",children:["Use All ",a," Tiles"]}),P.jsx("div",{className:"text-xs text-green-500",children:"Maximum quality with all uploaded images"})]})]}),P.jsx("button",{onClick:()=>w(!o),className:`
                relative w-12 h-6 rounded-full transition-colors
                ${o?"bg-green-500":"bg-gray-600"}
              `,children:P.jsx("span",{className:`
                  absolute top-1 w-4 h-4 bg-white rounded-full transition-transform
                  ${o?"translate-x-7":"translate-x-1"}
                `})})]})]}),!x&&P.jsxs("div",{className:"text-yellow-400 text-sm bg-yellow-400/10 rounded-lg px-3 py-2",children:["Not enough tiles for ",n," quality without duplicates. Enable duplicates or upload more images."]}),!l&&n==="high"&&a>T&&P.jsxs("div",{className:"text-green-400 text-sm bg-green-400/10 rounded-lg px-3 py-2",children:["You have ",a-T," extra tiles! All ",a," tiles will be used for maximum quality."]})]})}function mv({onClick:e,isGenerating:i,disabled:t,tileCount:n,selectedResolution:r,recommendedCount:s,allowDuplicates:a,useAllTiles:o,manualMode:l}){const u=a||n>=s,c=r==="high"&&n>s;let h="";n===0?h="Upload tile images first":u||(h=`Need ${s-n} more tiles (or enable duplicates)`);const d=t||!u||n===0;let w=s;return c&&(!l||o)?w=n:w=Math.min(s,n),P.jsxs("div",{className:"space-y-2",children:[P.jsx("button",{onClick:e,disabled:d||i,className:`
          w-full py-4 px-6 rounded-lg font-medium text-lg transition-all
          flex items-center justify-center gap-3
          ${d||i?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white shadow-lg hover:shadow-xl"}
        `,children:i?P.jsxs(P.Fragment,{children:[P.jsx(yd,{className:"w-6 h-6 animate-spin"}),"Generating Mosaic..."]}):P.jsxs(P.Fragment,{children:[P.jsx(iv,{className:"w-6 h-6"}),"Generate ",r.charAt(0).toUpperCase()+r.slice(1)," Quality Mosaic"]})}),h&&!i&&P.jsx("p",{className:"text-center text-sm text-gray-500",children:h}),!h&&!i&&!d&&P.jsxs("p",{className:"text-center text-sm text-gray-400",children:["Will use ",P.jsx("span",{className:"text-blue-400 font-medium",children:w})," tiles",c&&(!l||o)&&P.jsx("span",{className:"text-green-400",children:" (all uploaded images!)"})]}),i&&P.jsx("p",{className:"text-center text-sm text-blue-400",children:"This may take a minute for high-resolution mosaics..."})]})}var xd={exports:{}};(function(e){//! openseadragon 4.1.1
//! Built on 2024-04-01
//! Git commit: v4.1.1-0-f90d9814
//! http://openseadragon.github.io
//! License: http://openseadragon.github.io/license/
function i(t){return new i.Viewer(t)}(function(t){t.version={versionStr:"4.1.1",major:parseInt("4",10),minor:parseInt("1",10),revision:parseInt("1",10)};var n={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object AsyncFunction]":"function","[object Promise]":"promise","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},r=Object.prototype.toString,s=Object.prototype.hasOwnProperty;t.isFunction=function(a){return t.type(a)==="function"},t.isArray=Array.isArray||function(a){return t.type(a)==="array"},t.isWindow=function(a){return a&&typeof a=="object"&&"setInterval"in a},t.type=function(a){return a==null?String(a):n[r.call(a)]||"object"},t.isPlainObject=function(a){if(!a||i.type(a)!=="object"||a.nodeType||t.isWindow(a)||a.constructor&&!s.call(a,"constructor")&&!s.call(a.constructor.prototype,"isPrototypeOf"))return!1;var o;for(var l in a)o=l;return o===void 0||s.call(a,o)},t.isEmptyObject=function(a){for(var o in a)return!1;return!0},t.freezeObject=function(a){return Object.freeze?t.freezeObject=Object.freeze:t.freezeObject=function(o){return o},t.freezeObject(a)},t.supportsCanvas=function(){var a=document.createElement("canvas");return!!(t.isFunction(a.getContext)&&a.getContext("2d"))}(),t.isCanvasTainted=function(a){var o=!1;try{a.getContext("2d").getImageData(0,0,1,1)}catch{o=!0}return o},t.supportsAddEventListener=function(){return!!(document.documentElement.addEventListener&&document.addEventListener)}(),t.supportsRemoveEventListener=function(){return!!(document.documentElement.removeEventListener&&document.removeEventListener)}(),t.supportsEventListenerOptions=function(){var a=0;if(t.supportsAddEventListener)try{var o={get capture(){return a++,!1},get once(){return a++,!1},get passive(){return a++,!1}};window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch{a=0}return a>=3}(),t.getCurrentPixelDensityRatio=function(){if(t.supportsCanvas){var a=document.createElement("canvas").getContext("2d"),o=window.devicePixelRatio||1,l=a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;return Math.max(o,1)/l}else return 1},t.pixelDensityRatio=t.getCurrentPixelDensityRatio()})(i),function(t){t.extend=function(){var l,u,c,h,d,w,v=arguments[0]||{},T=arguments.length,x=!1,m=1;for(typeof v=="boolean"&&(x=v,v=arguments[1]||{},m=2),typeof v!="object"&&!i.isFunction(v)&&(v={}),T===m&&(v=this,--m);m<T;m++)if(l=arguments[m],l!==null||l!==void 0)for(u in l){var y=Object.getOwnPropertyDescriptor(l,u);if(y!==void 0){if(y.get||y.set){Object.defineProperty(v,u,y);continue}h=y.value}else{t.console.warn('Could not copy inherited property "'+u+'".');continue}v!==h&&(x&&h&&(i.isPlainObject(h)||(d=i.isArray(h)))?(c=v[u],d?(d=!1,w=c&&i.isArray(c)?c:[]):w=c&&i.isPlainObject(c)?c:{},v[u]=i.extend(x,w,h)):h!==void 0&&(v[u]=h))}return v};var n=function(){if(typeof navigator!="object")return!1;var l=navigator.userAgent;return typeof l!="string"?!1:l.indexOf("iPhone")!==-1||l.indexOf("iPad")!==-1||l.indexOf("iPod")!==-1};t.extend(t,{DEFAULT_SETTINGS:{xmlPath:null,tileSources:null,tileHost:null,initialPage:0,crossOriginPolicy:!1,ajaxWithCredentials:!1,loadTilesWithAjax:!1,ajaxHeaders:{},splitHashDataForPost:!1,panHorizontal:!0,panVertical:!0,constrainDuringPan:!1,wrapHorizontal:!1,wrapVertical:!1,visibilityRatio:.5,minPixelRatio:.5,defaultZoomLevel:0,minZoomLevel:null,maxZoomLevel:null,homeFillsViewer:!1,clickTimeThreshold:300,clickDistThreshold:5,dblClickTimeThreshold:300,dblClickDistThreshold:20,springStiffness:6.5,animationTime:1.2,gestureSettingsMouse:{dragToPan:!0,scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsTouch:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!0,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsPen:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!0,dblClickToZoom:!1,dblClickDragToZoom:!1,pinchToZoom:!1,zoomToRefPoint:!0,flickEnabled:!1,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},gestureSettingsUnknown:{dragToPan:!0,scrollToZoom:!1,clickToZoom:!1,dblClickToZoom:!0,dblClickDragToZoom:!1,pinchToZoom:!0,zoomToRefPoint:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25,pinchRotate:!1},zoomPerClick:2,zoomPerScroll:1.2,zoomPerDblClickDrag:1.2,zoomPerSecond:1,blendTime:0,alwaysBlend:!1,autoHideControls:!0,immediateRender:!1,minZoomImageRatio:.9,maxZoomPixelRatio:1.1,smoothTileEdgesMinZoom:1.1,iOSDevice:n(),pixelsPerWheelLine:40,pixelsPerArrowPress:40,autoResize:!0,preserveImageSizeOnResize:!1,minScrollDeltaTime:50,rotationIncrement:90,showSequenceControl:!0,sequenceControlAnchor:null,preserveViewport:!1,preserveOverlays:!1,navPrevNextWrap:!1,showNavigationControl:!0,navigationControlAnchor:null,showZoomControl:!0,showHomeControl:!0,showFullPageControl:!0,showRotationControl:!1,showFlipControl:!1,controlsFadeDelay:2e3,controlsFadeLength:1500,mouseNavEnabled:!0,showNavigator:!1,navigatorElement:null,navigatorId:null,navigatorPosition:null,navigatorSizeRatio:.2,navigatorMaintainSizeRatio:!1,navigatorTop:null,navigatorLeft:null,navigatorHeight:null,navigatorWidth:null,navigatorAutoResize:!0,navigatorAutoFade:!0,navigatorRotate:!0,navigatorBackground:"#000",navigatorOpacity:.8,navigatorBorderColor:"#555",navigatorDisplayRegionColor:"#900",degrees:0,flipped:!1,opacity:1,preload:!1,compositeOperation:null,imageSmoothingEnabled:!0,placeholderFillStyle:null,subPixelRoundingForTransparency:null,showReferenceStrip:!1,referenceStripScroll:"horizontal",referenceStripElement:null,referenceStripHeight:null,referenceStripWidth:null,referenceStripPosition:"BOTTOM_LEFT",referenceStripSizeRatio:.2,collectionRows:3,collectionColumns:0,collectionLayout:"horizontal",collectionMode:!1,collectionTileSize:800,collectionTileMargin:80,imageLoaderLimit:0,maxImageCacheCount:200,timeout:3e4,useCanvas:!0,tileRetryMax:0,tileRetryDelay:2500,prefixUrl:"/images/",navImages:{zoomIn:{REST:"zoomin_rest.png",GROUP:"zoomin_grouphover.png",HOVER:"zoomin_hover.png",DOWN:"zoomin_pressed.png"},zoomOut:{REST:"zoomout_rest.png",GROUP:"zoomout_grouphover.png",HOVER:"zoomout_hover.png",DOWN:"zoomout_pressed.png"},home:{REST:"home_rest.png",GROUP:"home_grouphover.png",HOVER:"home_hover.png",DOWN:"home_pressed.png"},fullpage:{REST:"fullpage_rest.png",GROUP:"fullpage_grouphover.png",HOVER:"fullpage_hover.png",DOWN:"fullpage_pressed.png"},rotateleft:{REST:"rotateleft_rest.png",GROUP:"rotateleft_grouphover.png",HOVER:"rotateleft_hover.png",DOWN:"rotateleft_pressed.png"},rotateright:{REST:"rotateright_rest.png",GROUP:"rotateright_grouphover.png",HOVER:"rotateright_hover.png",DOWN:"rotateright_pressed.png"},flip:{REST:"flip_rest.png",GROUP:"flip_grouphover.png",HOVER:"flip_hover.png",DOWN:"flip_pressed.png"},previous:{REST:"previous_rest.png",GROUP:"previous_grouphover.png",HOVER:"previous_hover.png",DOWN:"previous_pressed.png"},next:{REST:"next_rest.png",GROUP:"next_grouphover.png",HOVER:"next_hover.png",DOWN:"next_pressed.png"}},debugMode:!1,debugGridColor:["#437AB2","#1B9E77","#D95F02","#7570B3","#E7298A","#66A61E","#E6AB02","#A6761D","#666666"],silenceMultiImageWarnings:!1},SIGNAL:"----seadragon----",delegate:function(l,u){return function(){var c=arguments;return c===void 0&&(c=[]),u.apply(l,c)}},BROWSERS:{UNKNOWN:0,IE:1,FIREFOX:2,SAFARI:3,CHROME:4,OPERA:5,EDGE:6,CHROMEEDGE:7},SUBPIXEL_ROUNDING_OCCURRENCES:{NEVER:0,ONLY_AT_REST:1,ALWAYS:2},_viewers:new Map,getViewer:function(l){return t._viewers.get(this.getElement(l))},getElement:function(l){return typeof l=="string"&&(l=document.getElementById(l)),l},getElementPosition:function(l){var u=new t.Point,c,h;for(l=t.getElement(l),c=t.getElementStyle(l).position==="fixed",h=o(l,c);h;)u.x+=l.offsetLeft,u.y+=l.offsetTop,c&&(u=u.plus(t.getPageScroll())),l=h,c=t.getElementStyle(l).position==="fixed",h=o(l,c);return u},getElementOffset:function(l){l=t.getElement(l);var u=l&&l.ownerDocument,c,h,d={top:0,left:0};return u?(c=u.documentElement,typeof l.getBoundingClientRect<"u"&&(d=l.getBoundingClientRect()),h=u===u.window?u:u.nodeType===9?u.defaultView||u.parentWindow:!1,new t.Point(d.left+(h.pageXOffset||c.scrollLeft)-(c.clientLeft||0),d.top+(h.pageYOffset||c.scrollTop)-(c.clientTop||0))):new t.Point},getElementSize:function(l){return l=t.getElement(l),new t.Point(l.clientWidth,l.clientHeight)},getElementStyle:document.documentElement.currentStyle?function(l){return l=t.getElement(l),l.currentStyle}:function(l){return l=t.getElement(l),window.getComputedStyle(l,"")},getCssPropertyWithVendorPrefix:function(l){var u={};return t.getCssPropertyWithVendorPrefix=function(c){if(u[c]!==void 0)return u[c];var h=document.createElement("div").style,d=null;if(h[c]!==void 0)d=c;else for(var w=["Webkit","Moz","MS","O","webkit","moz","ms","o"],v=t.capitalizeFirstLetter(c),T=0;T<w.length;T++){var x=w[T]+v;if(h[x]!==void 0){d=x;break}}return u[c]=d,d},t.getCssPropertyWithVendorPrefix(l)},capitalizeFirstLetter:function(l){return l.charAt(0).toUpperCase()+l.slice(1)},positiveModulo:function(l,u){var c=l%u;return c<0&&(c+=u),c},pointInElement:function(l,u){l=t.getElement(l);var c=t.getElementOffset(l),h=t.getElementSize(l);return u.x>=c.x&&u.x<c.x+h.x&&u.y<c.y+h.y&&u.y>=c.y},getMousePosition:function(l){if(typeof l.pageX=="number")t.getMousePosition=function(u){var c=new t.Point;return c.x=u.pageX,c.y=u.pageY,c};else if(typeof l.clientX=="number")t.getMousePosition=function(u){var c=new t.Point;return c.x=u.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,c.y=u.clientY+document.body.scrollTop+document.documentElement.scrollTop,c};else throw new Error("Unknown event mouse position, no known technique.");return t.getMousePosition(l)},getPageScroll:function(){var l=document.documentElement||{},u=document.body||{};if(typeof window.pageXOffset=="number")t.getPageScroll=function(){return new t.Point(window.pageXOffset,window.pageYOffset)};else if(u.scrollLeft||u.scrollTop)t.getPageScroll=function(){return new t.Point(document.body.scrollLeft,document.body.scrollTop)};else if(l.scrollLeft||l.scrollTop)t.getPageScroll=function(){return new t.Point(document.documentElement.scrollLeft,document.documentElement.scrollTop)};else return new t.Point(0,0);return t.getPageScroll()},setPageScroll:function(l){if(typeof window.scrollTo<"u")t.setPageScroll=function(h){window.scrollTo(h.x,h.y)};else{var u=t.getPageScroll();if(u.x===l.x&&u.y===l.y)return;document.body.scrollLeft=l.x,document.body.scrollTop=l.y;var c=t.getPageScroll();if(c.x!==u.x&&c.y!==u.y){t.setPageScroll=function(h){document.body.scrollLeft=h.x,document.body.scrollTop=h.y};return}if(document.documentElement.scrollLeft=l.x,document.documentElement.scrollTop=l.y,c=t.getPageScroll(),c.x!==u.x&&c.y!==u.y){t.setPageScroll=function(h){document.documentElement.scrollLeft=h.x,document.documentElement.scrollTop=h.y};return}t.setPageScroll=function(h){}}t.setPageScroll(l)},getWindowSize:function(){var l=document.documentElement||{},u=document.body||{};if(typeof window.innerWidth=="number")t.getWindowSize=function(){return new t.Point(window.innerWidth,window.innerHeight)};else if(l.clientWidth||l.clientHeight)t.getWindowSize=function(){return new t.Point(document.documentElement.clientWidth,document.documentElement.clientHeight)};else if(u.clientWidth||u.clientHeight)t.getWindowSize=function(){return new t.Point(document.body.clientWidth,document.body.clientHeight)};else throw new Error("Unknown window size, no known technique.");return t.getWindowSize()},makeCenteredNode:function(l){l=t.getElement(l);var u=[t.makeNeutralElement("div"),t.makeNeutralElement("div"),t.makeNeutralElement("div")];return t.extend(u[0].style,{display:"table",height:"100%",width:"100%"}),t.extend(u[1].style,{display:"table-row"}),t.extend(u[2].style,{display:"table-cell",verticalAlign:"middle",textAlign:"center"}),u[0].appendChild(u[1]),u[1].appendChild(u[2]),u[2].appendChild(l),u[0]},makeNeutralElement:function(l){var u=document.createElement(l),c=u.style;return c.background="transparent none",c.border="none",c.margin="0px",c.padding="0px",c.position="static",u},now:function(){return Date.now?t.now=Date.now:t.now=function(){return new Date().getTime()},t.now()},makeTransparentImage:function(l){var u=t.makeNeutralElement("img");return u.src=l,u},setElementOpacity:function(l,u,c){var h,d;l=t.getElement(l),c&&!t.Browser.alpha&&(u=Math.round(u)),t.Browser.opacity?l.style.opacity=u<1?u:"":u<1?(h=Math.round(100*u),d="alpha(opacity="+h+")",l.style.filter=d):l.style.filter=""},setElementTouchActionNone:function(l){l=t.getElement(l),typeof l.style.touchAction<"u"?l.style.touchAction="none":typeof l.style.msTouchAction<"u"&&(l.style.msTouchAction="none")},setElementPointerEvents:function(l,u){l=t.getElement(l),typeof l.style<"u"&&typeof l.style.pointerEvents<"u"&&(l.style.pointerEvents=u)},setElementPointerEventsNone:function(l){t.setElementPointerEvents(l,"none")},addClass:function(l,u){l=t.getElement(l),l.className?(" "+l.className+" ").indexOf(" "+u+" ")===-1&&(l.className+=" "+u):l.className=u},indexOf:function(l,u,c){return Array.prototype.indexOf?this.indexOf=function(h,d,w){return h.indexOf(d,w)}:this.indexOf=function(h,d,w){var v,T=w||0,x;if(!h)throw new TypeError;if(x=h.length,x===0||T>=x)return-1;for(T<0&&(T=x-Math.abs(T)),v=T;v<x;v++)if(h[v]===d)return v;return-1},this.indexOf(l,u,c)},removeClass:function(l,u){var c,h=[],d;for(l=t.getElement(l),c=l.className.split(/\s+/),d=0;d<c.length;d++)c[d]&&c[d]!==u&&h.push(c[d]);l.className=h.join(" ")},normalizeEventListenerOptions:function(l){var u;return typeof l<"u"?typeof l=="boolean"?u=t.supportsEventListenerOptions?{capture:l}:l:u=t.supportsEventListenerOptions?l:typeof l.capture<"u"?l.capture:!1:u=t.supportsEventListenerOptions?{capture:!1}:!1,u},addEvent:function(){if(t.supportsAddEventListener)return function(l,u,c,h){h=t.normalizeEventListenerOptions(h),l=t.getElement(l),l.addEventListener(u,c,h)};if(document.documentElement.attachEvent&&document.attachEvent)return function(l,u,c){l=t.getElement(l),l.attachEvent("on"+u,c)};throw new Error("No known event model.")}(),removeEvent:function(){if(t.supportsRemoveEventListener)return function(l,u,c,h){h=t.normalizeEventListenerOptions(h),l=t.getElement(l),l.removeEventListener(u,c,h)};if(document.documentElement.detachEvent&&document.detachEvent)return function(l,u,c){l=t.getElement(l),l.detachEvent("on"+u,c)};throw new Error("No known event model.")}(),cancelEvent:function(l){l.preventDefault()},eventIsCanceled:function(l){return l.defaultPrevented},stopEvent:function(l){l.stopPropagation()},createCallback:function(l,u){var c=[],h;for(h=2;h<arguments.length;h++)c.push(arguments[h]);return function(){var d=c.concat([]),w;for(w=0;w<arguments.length;w++)d.push(arguments[w]);return u.apply(l,d)}},getUrlParameter:function(l){var u=a[l];return u||null},getUrlProtocol:function(l){var u=l.match(/^([a-z]+:)\/\//i);return u===null?window.location.protocol:u[1].toLowerCase()},createAjaxRequest:function(l){var u;try{u=!!new ActiveXObject("Microsoft.XMLHTTP")}catch{u=!1}if(u)window.XMLHttpRequest?t.createAjaxRequest=function(c){return c?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest}:t.createAjaxRequest=function(){return new ActiveXObject("Microsoft.XMLHTTP")};else if(window.XMLHttpRequest)t.createAjaxRequest=function(){return new XMLHttpRequest};else throw new Error("Browser doesn't support XMLHttpRequest.");return t.createAjaxRequest(l)},makeAjaxRequest:function(l,u,c){var h,d,w,v;t.isPlainObject(l)&&(u=l.success,c=l.error,h=l.withCredentials,d=l.headers,w=l.responseType||null,v=l.postData||null,l=l.url);var T=t.getUrlProtocol(l),x=t.createAjaxRequest(T==="file:");if(!t.isFunction(u))throw new Error("makeAjaxRequest requires a success callback");x.onreadystatechange=function(){x.readyState===4&&(x.onreadystatechange=function(){},x.status>=200&&x.status<300||x.status===0&&T!=="http:"&&T!=="https:"?u(x):t.isFunction(c)?c(x):t.console.error("AJAX request returned %d: %s",x.status,l))};var m=v?"POST":"GET";try{if(x.open(m,l,!0),w&&(x.responseType=w),d)for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&d[y]&&x.setRequestHeader(y,d[y]);h&&(x.withCredentials=!0),x.send(v)}catch(S){t.console.error("%s while making AJAX request: %s",S.name,S.message),x.onreadystatechange=function(){},t.isFunction(c)&&c(x,S)}return x},jsonp:function(l){var u,c=l.url,h=document.head||document.getElementsByTagName("head")[0]||document.documentElement,d=l.callbackName||"openseadragon"+t.now(),w=window[d],v="$1"+d+"$2",T=l.param||"callback",x=l.callback;c=c.replace(/(=)\?(&|$)|\?\?/i,v),c+=(/\?/.test(c)?"&":"?")+T+"="+d,window[d]=function(m){if(w)window[d]=w;else try{delete window[d]}catch{}x&&t.isFunction(x)&&x(m)},u=document.createElement("script"),(l.async!==void 0||l.async!==!1)&&(u.async="async"),l.scriptCharset&&(u.charset=l.scriptCharset),u.src=c,u.onload=u.onreadystatechange=function(m,y){(y||!u.readyState||/loaded|complete/.test(u.readyState))&&(u.onload=u.onreadystatechange=null,h&&u.parentNode&&h.removeChild(u),u=void 0)},h.insertBefore(u,h.firstChild)},createFromDZI:function(){throw"OpenSeadragon.createFromDZI is deprecated, use Viewer.open."},parseXml:function(l){if(window.DOMParser)t.parseXml=function(u){var c=null,h;return h=new DOMParser,c=h.parseFromString(u,"text/xml"),c};else if(window.ActiveXObject)t.parseXml=function(u){var c=null;return c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(u),c};else throw new Error("Browser doesn't support XML DOM.");return t.parseXml(l)},parseJSON:function(l){return t.parseJSON=window.JSON.parse,t.parseJSON(l)},imageFormatSupported:function(l){return l=l||"",!!s[l.toLowerCase()]},setImageFormatsSupported:function(l){t.extend(s,l)}});var r=function(l){};t.console=window.console||{log:r,debug:r,info:r,warn:r,error:r,assert:r},t.Browser={vendor:t.BROWSERS.UNKNOWN,version:0,alpha:!0};var s={bmp:!1,jpeg:!0,jpg:!0,png:!0,tif:!1,wdp:!1},a={};(function(){var l=navigator.appVersion,u=navigator.userAgent,c;switch(navigator.appName){case"Microsoft Internet Explorer":window.attachEvent&&window.ActiveXObject&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(u.substring(u.indexOf("MSIE")+5,u.indexOf(";",u.indexOf("MSIE")))));break;case"Netscape":window.addEventListener&&(u.indexOf("Edge")>=0?(t.Browser.vendor=t.BROWSERS.EDGE,t.Browser.version=parseFloat(u.substring(u.indexOf("Edge")+5))):u.indexOf("Edg")>=0?(t.Browser.vendor=t.BROWSERS.CHROMEEDGE,t.Browser.version=parseFloat(u.substring(u.indexOf("Edg")+4))):u.indexOf("Firefox")>=0?(t.Browser.vendor=t.BROWSERS.FIREFOX,t.Browser.version=parseFloat(u.substring(u.indexOf("Firefox")+8))):u.indexOf("Safari")>=0?(t.Browser.vendor=u.indexOf("Chrome")>=0?t.BROWSERS.CHROME:t.BROWSERS.SAFARI,t.Browser.version=parseFloat(u.substring(u.substring(0,u.indexOf("Safari")).lastIndexOf("/")+1,u.indexOf("Safari")))):(c=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),c.exec(u)!==null&&(t.Browser.vendor=t.BROWSERS.IE,t.Browser.version=parseFloat(RegExp.$1))));break;case"Opera":t.Browser.vendor=t.BROWSERS.OPERA,t.Browser.version=parseFloat(l);break}var h=window.location.search.substring(1),d=h.split("&"),w,v,T;for(T=0;T<d.length;T++)if(w=d[T],v=w.indexOf("="),v>0){var x=w.substring(0,v),m=w.substring(v+1);try{a[x]=decodeURIComponent(m)}catch{t.console.error("Ignoring malformed URL parameter: %s=%s",x,m)}}t.Browser.alpha=!(t.Browser.vendor===t.BROWSERS.CHROME&&t.Browser.version<2),t.Browser.opacity=!0,t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version<11&&t.console.error("Internet Explorer versions < 11 are not supported by OpenSeadragon")})(),function(l){var u=l.requestAnimationFrame||l.mozRequestAnimationFrame||l.webkitRequestAnimationFrame||l.msRequestAnimationFrame,c=l.cancelAnimationFrame||l.mozCancelAnimationFrame||l.webkitCancelAnimationFrame||l.msCancelAnimationFrame;if(u&&c)t.requestAnimationFrame=function(){return u.apply(l,arguments)},t.cancelAnimationFrame=function(){return c.apply(l,arguments)};else{var h=[],d=[],w=0,v;t.requestAnimationFrame=function(T){return h.push([++w,T]),v||(v=setInterval(function(){if(h.length){var x=t.now(),m=d;for(d=h,h=m;d.length;)d.shift()[1](x)}else clearInterval(v),v=void 0},1e3/50)),w},t.cancelAnimationFrame=function(T){var x,m;for(x=0,m=h.length;x<m;x+=1)if(h[x][0]===T){h.splice(x,1);return}for(x=0,m=d.length;x<m;x+=1)if(d[x][0]===T){d.splice(x,1);return}}}}(window);function o(l,u){return u&&l!==document.body?document.body:l.offsetParent}}(i),function(t,n){e.exports?e.exports=n():t.OpenSeadragon=n()}(Td,function(){return i}),function(t){var n={supportsFullScreen:!1,isFullScreen:function(){return!1},getFullScreenElement:function(){return null},requestFullScreen:function(){},exitFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",fullScreenErrorEventName:""};document.exitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.fullscreenElement},n.requestFullScreen=function(r){return r.requestFullscreen()},n.exitFullScreen=function(){document.exitFullscreen()},n.fullScreenEventName="fullscreenchange",n.fullScreenErrorEventName="fullscreenerror"):document.msExitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.msFullscreenElement},n.requestFullScreen=function(r){return r.msRequestFullscreen()},n.exitFullScreen=function(){document.msExitFullscreen()},n.fullScreenEventName="MSFullscreenChange",n.fullScreenErrorEventName="MSFullscreenError"):document.webkitExitFullscreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.webkitFullscreenElement},n.requestFullScreen=function(r){return r.webkitRequestFullscreen()},n.exitFullScreen=function(){document.webkitExitFullscreen()},n.fullScreenEventName="webkitfullscreenchange",n.fullScreenErrorEventName="webkitfullscreenerror"):document.webkitCancelFullScreen?(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.webkitCurrentFullScreenElement},n.requestFullScreen=function(r){return r.webkitRequestFullScreen()},n.exitFullScreen=function(){document.webkitCancelFullScreen()},n.fullScreenEventName="webkitfullscreenchange",n.fullScreenErrorEventName="webkitfullscreenerror"):document.mozCancelFullScreen&&(n.supportsFullScreen=!0,n.getFullScreenElement=function(){return document.mozFullScreenElement},n.requestFullScreen=function(r){return r.mozRequestFullScreen()},n.exitFullScreen=function(){document.mozCancelFullScreen()},n.fullScreenEventName="mozfullscreenchange",n.fullScreenErrorEventName="mozfullscreenerror"),n.isFullScreen=function(){return n.getFullScreenElement()!==null},n.cancelFullScreen=function(){t.console.error("cancelFullScreen is deprecated. Use exitFullScreen instead."),n.exitFullScreen()},t.extend(t,n)}(i),function(t){t.EventSource=function(){this.events={}},t.EventSource.prototype={addOnceHandler:function(n,r,s,a,o){var l=this;a=a||1;var u=0,c=function(h){return u++,u===a&&l.removeHandler(n,c),r(h)};this.addHandler(n,c,s,o)},addHandler:function(n,r,s,a){var o=this.events[n];if(o||(this.events[n]=o=[]),r&&t.isFunction(r)){var l=o.length,u={handler:r,userData:s||null,priority:a||0};for(o[l]=u;l>0&&o[l-1].priority<o[l].priority;)o[l]=o[l-1],o[l-1]=u,l--}},removeHandler:function(n,r){var s=this.events[n],a=[],o;if(s&&t.isArray(s)){for(o=0;o<s.length;o++)s[o].handler!==r&&a.push(s[o]);this.events[n]=a}},numberOfHandlers:function(n){var r=this.events[n];return r?r.length:0},removeAllHandlers:function(n){if(n)this.events[n]=[];else for(var r in this.events)this.events[r]=[]},getHandler:function(n){var r=this.events[n];return!r||!r.length?null:(r=r.length===1?[r[0]]:Array.apply(null,r),function(s,a){var o,l=r.length;for(o=0;o<l;o++)r[o]&&(a.eventSource=s,a.userData=r[o].userData,r[o].handler(a))})},raiseEvent:function(n,r){var s=this.getHandler(n);if(s)return s(this,r||{})}}}(i),function(t){var n={};t.MouseTracker=function(g){var p=arguments;t.isPlainObject(g)||(g={element:p[0],clickTimeThreshold:p[1],clickDistThreshold:p[2]}),this.hash=Math.random(),this.element=t.getElement(g.element),this.clickTimeThreshold=g.clickTimeThreshold||t.DEFAULT_SETTINGS.clickTimeThreshold,this.clickDistThreshold=g.clickDistThreshold||t.DEFAULT_SETTINGS.clickDistThreshold,this.dblClickTimeThreshold=g.dblClickTimeThreshold||t.DEFAULT_SETTINGS.dblClickTimeThreshold,this.dblClickDistThreshold=g.dblClickDistThreshold||t.DEFAULT_SETTINGS.dblClickDistThreshold,this.userData=g.userData||null,this.stopDelay=g.stopDelay||50,this.preProcessEventHandler=g.preProcessEventHandler||null,this.contextMenuHandler=g.contextMenuHandler||null,this.enterHandler=g.enterHandler||null,this.leaveHandler=g.leaveHandler||null,this.exitHandler=g.exitHandler||null,this.overHandler=g.overHandler||null,this.outHandler=g.outHandler||null,this.pressHandler=g.pressHandler||null,this.nonPrimaryPressHandler=g.nonPrimaryPressHandler||null,this.releaseHandler=g.releaseHandler||null,this.nonPrimaryReleaseHandler=g.nonPrimaryReleaseHandler||null,this.moveHandler=g.moveHandler||null,this.scrollHandler=g.scrollHandler||null,this.clickHandler=g.clickHandler||null,this.dblClickHandler=g.dblClickHandler||null,this.dragHandler=g.dragHandler||null,this.dragEndHandler=g.dragEndHandler||null,this.pinchHandler=g.pinchHandler||null,this.stopHandler=g.stopHandler||null,this.keyDownHandler=g.keyDownHandler||null,this.keyUpHandler=g.keyUpHandler||null,this.keyHandler=g.keyHandler||null,this.focusHandler=g.focusHandler||null,this.blurHandler=g.blurHandler||null;var E=this;n[this.hash]={click:function(R){S(E,R)},dblclick:function(R){_(E,R)},keydown:function(R){b(E,R)},keyup:function(R){O(E,R)},keypress:function(R){z(E,R)},focus:function(R){M(E,R)},blur:function(R){U(E,R)},contextmenu:function(R){W(E,R)},wheel:function(R){te(E,R)},mousewheel:function(R){ne(E,R)},DOMMouseScroll:function(R){ne(E,R)},MozMousePixelScroll:function(R){ne(E,R)},losecapture:function(R){Te(E,R)},mouseenter:function(R){K(E,R)},mouseleave:function(R){Oe(E,R)},mouseover:function(R){ft(E,R)},mouseout:function(R){ot(E,R)},mousedown:function(R){pt(E,R)},mouseup:function(R){$n(E,R)},mousemove:function(R){tr(E,R)},touchstart:function(R){st(E,R)},touchend:function(R){ce(E,R)},touchmove:function(R){ke(E,R)},touchcancel:function(R){L(E,R)},gesturestart:function(R){V(E,R)},gesturechange:function(R){q(E,R)},gotpointercapture:function(R){$(E,R)},lostpointercapture:function(R){re(E,R)},pointerenter:function(R){K(E,R)},pointerleave:function(R){Oe(E,R)},pointerover:function(R){ft(E,R)},pointerout:function(R){ot(E,R)},pointerdown:function(R){pt(E,R)},pointerup:function(R){$n(E,R)},pointermove:function(R){tr(E,R)},pointercancel:function(R){Ds(E,R)},pointerupcaptured:function(R){ks(E,R)},pointermovecaptured:function(R){Ns(E,R)},tracking:!1,activePointersLists:[],lastClickPos:null,dblClickTimeOut:null,pinchGPoints:[],lastPinchDist:0,currentPinchDist:0,lastPinchCenter:null,currentPinchCenter:null,sentDragEvent:!1},this.hasGestureHandlers=!!(this.pressHandler||this.nonPrimaryPressHandler||this.releaseHandler||this.nonPrimaryReleaseHandler||this.clickHandler||this.dblClickHandler||this.dragHandler||this.dragEndHandler||this.pinchHandler),this.hasScrollHandler=!!this.scrollHandler,t.MouseTracker.havePointerEvents&&t.setElementPointerEvents(this.element,"auto"),this.exitHandler&&t.console.error("MouseTracker.exitHandler is deprecated. Use MouseTracker.leaveHandler instead."),g.startDisabled||this.setTracking(!0)},t.MouseTracker.prototype={destroy:function(){l(this),this.element=null,n[this.hash]=null,delete n[this.hash]},isTracking:function(){return n[this.hash].tracking},setTracking:function(g){return g?o(this):l(this),this},getActivePointersListByType:function(g){var p=n[this.hash],E,R=p.activePointersLists.length,D;for(E=0;E<R;E++)if(p.activePointersLists[E].type===g)return p.activePointersLists[E];return D=new t.MouseTracker.GesturePointList(g),p.activePointersLists.push(D),D},getActivePointerCount:function(){var g=n[this.hash],p,E=g.activePointersLists.length,R=0;for(p=0;p<E;p++)R+=g.activePointersLists[p].getLength();return R},preProcessEventHandler:function(){},contextMenuHandler:function(){},enterHandler:function(){},leaveHandler:function(){},exitHandler:function(){},overHandler:function(){},outHandler:function(){},pressHandler:function(){},nonPrimaryPressHandler:function(){},releaseHandler:function(){},nonPrimaryReleaseHandler:function(){},moveHandler:function(){},scrollHandler:function(){},clickHandler:function(){},dblClickHandler:function(){},dragHandler:function(){},dragEndHandler:function(){},pinchHandler:function(){},stopHandler:function(){},keyDownHandler:function(){},keyUpHandler:function(){},keyHandler:function(){},focusHandler:function(){},blurHandler:function(){}};var r=function(){try{return window.self!==window.top}catch{return!0}}();function s(g){try{return g.addEventListener&&g.removeEventListener}catch{return!1}}t.MouseTracker.gesturePointVelocityTracker=function(){var g=[],p=0,E=0,R=function(le,Q){return le.hash.toString()+Q.type+Q.id.toString()},D=function(){var le,Q=g.length,Je,Ne,Ci=t.now(),ia,na,ra;for(ia=Ci-E,E=Ci,le=0;le<Q;le++)Je=g[le],Ne=Je.gPoint,Ne.direction=Math.atan2(Ne.currentPos.y-Je.lastPos.y,Ne.currentPos.x-Je.lastPos.x),na=Je.lastPos.distanceTo(Ne.currentPos),Je.lastPos=Ne.currentPos,ra=1e3*na/(ia+1),Ne.speed=.75*ra+.25*Ne.speed},A=function(le,Q){var Je=R(le,Q);g.push({guid:Je,gPoint:Q,lastPos:Q.currentPos}),g.length===1&&(E=t.now(),p=window.setInterval(D,50))},Z=function(le,Q){var Je=R(le,Q),Ne,Ci=g.length;for(Ne=0;Ne<Ci;Ne++)if(g[Ne].guid===Je){g.splice(Ne,1),Ci--,Ci===0&&window.clearInterval(p);break}};return{addPoint:A,removePoint:Z}}(),t.MouseTracker.captureElement=document,t.MouseTracker.wheelEventName=t.Browser.vendor===t.BROWSERS.IE&&t.Browser.version>8||"onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll",t.MouseTracker.subscribeEvents=["click","dblclick","keydown","keyup","keypress","focus","blur","contextmenu",t.MouseTracker.wheelEventName],t.MouseTracker.wheelEventName==="DOMMouseScroll"&&t.MouseTracker.subscribeEvents.push("MozMousePixelScroll"),window.PointerEvent?(t.MouseTracker.havePointerEvents=!0,t.MouseTracker.subscribeEvents.push("pointerenter","pointerleave","pointerover","pointerout","pointerdown","pointerup","pointermove","pointercancel"),t.MouseTracker.havePointerCapture=function(){var g=document.createElement("div");return t.isFunction(g.setPointerCapture)&&t.isFunction(g.releasePointerCapture)}(),t.MouseTracker.havePointerCapture&&t.MouseTracker.subscribeEvents.push("gotpointercapture","lostpointercapture")):(t.MouseTracker.havePointerEvents=!1,t.MouseTracker.subscribeEvents.push("mouseenter","mouseleave","mouseover","mouseout","mousedown","mouseup","mousemove"),t.MouseTracker.mousePointerId="legacy-mouse",t.MouseTracker.havePointerCapture=function(){var g=document.createElement("div");return t.isFunction(g.setCapture)&&t.isFunction(g.releaseCapture)}(),t.MouseTracker.havePointerCapture&&t.MouseTracker.subscribeEvents.push("losecapture"),"ontouchstart"in window&&t.MouseTracker.subscribeEvents.push("touchstart","touchend","touchmove","touchcancel"),"ongesturestart"in window&&t.MouseTracker.subscribeEvents.push("gesturestart","gesturechange")),t.MouseTracker.GesturePointList=function(g){this._gPoints=[],this.type=g,this.buttons=0,this.contacts=0,this.clicks=0,this.captureCount=0},t.MouseTracker.GesturePointList.prototype={getLength:function(){return this._gPoints.length},asArray:function(){return this._gPoints},add:function(g){return this._gPoints.push(g)},removeById:function(g){var p,E=this._gPoints.length;for(p=0;p<E;p++)if(this._gPoints[p].id===g){this._gPoints.splice(p,1);break}return this._gPoints.length},getByIndex:function(g){return g<this._gPoints.length?this._gPoints[g]:null},getById:function(g){var p,E=this._gPoints.length;for(p=0;p<E;p++)if(this._gPoints[p].id===g)return this._gPoints[p];return null},getPrimary:function(g){var p,E=this._gPoints.length;for(p=0;p<E;p++)if(this._gPoints[p].isPrimary)return this._gPoints[p];return null},addContact:function(){++this.contacts,this.contacts>1&&(this.type==="mouse"||this.type==="pen")&&(t.console.warn("GesturePointList.addContact() Implausible contacts value"),this.contacts=1)},removeContact:function(){--this.contacts,this.contacts<0&&(this.contacts=0)}};function a(g){var p=n[g.hash],E,R,D,A,Z,le=p.activePointersLists.length;for(E=0;E<le;E++)if(D=p.activePointersLists[E],D.getLength()>0){for(Z=[],A=D.asArray(),R=0;R<A.length;R++)Z.push(A[R]);for(R=0;R<Z.length;R++)Ei(g,D,Z[R])}for(E=0;E<le;E++)p.activePointersLists.pop();p.sentDragEvent=!1}function o(g){var p=n[g.hash],E,R;if(!p.tracking){for(R=0;R<t.MouseTracker.subscribeEvents.length;R++)E=t.MouseTracker.subscribeEvents[R],t.addEvent(g.element,E,p[E],E===t.MouseTracker.wheelEventName?{passive:!1,capture:!1}:!1);a(g),p.tracking=!0}}function l(g){var p=n[g.hash],E,R;if(p.tracking){for(R=0;R<t.MouseTracker.subscribeEvents.length;R++)E=t.MouseTracker.subscribeEvents[R],t.removeEvent(g.element,E,p[E],!1);a(g),p.tracking=!1}}function u(g,p){var E=n[g.hash];if(p==="pointerevent")return{upName:"pointerup",upHandler:E.pointerupcaptured,moveName:"pointermove",moveHandler:E.pointermovecaptured};if(p==="mouse")return{upName:"pointerup",upHandler:E.pointerupcaptured,moveName:"pointermove",moveHandler:E.pointermovecaptured};if(p==="touch")return{upName:"touchend",upHandler:E.touchendcaptured,moveName:"touchmove",moveHandler:E.touchmovecaptured};throw new Error("MouseTracker.getCaptureEventParams: Unknown pointer type.")}function c(g,p){var E;if(t.MouseTracker.havePointerCapture)if(t.MouseTracker.havePointerEvents)try{g.element.setPointerCapture(p.id)}catch{t.console.warn("setPointerCapture() called on invalid pointer ID");return}else g.element.setCapture(!0);else E=u(g,t.MouseTracker.havePointerEvents?"pointerevent":p.type),r&&s(window.top)&&t.addEvent(window.top,E.upName,E.upHandler,!0),t.addEvent(t.MouseTracker.captureElement,E.upName,E.upHandler,!0),t.addEvent(t.MouseTracker.captureElement,E.moveName,E.moveHandler,!0);k(g,p,!0)}function h(g,p){var E,R,D;if(t.MouseTracker.havePointerCapture)if(t.MouseTracker.havePointerEvents){if(R=g.getActivePointersListByType(p.type),D=R.getById(p.id),!D||!D.captured)return;try{g.element.releasePointerCapture(p.id)}catch{}}else g.element.releaseCapture();else E=u(g,t.MouseTracker.havePointerEvents?"pointerevent":p.type),r&&s(window.top)&&t.removeEvent(window.top,E.upName,E.upHandler,!0),t.removeEvent(t.MouseTracker.captureElement,E.moveName,E.moveHandler,!0),t.removeEvent(t.MouseTracker.captureElement,E.upName,E.upHandler,!0);k(g,p,!1)}function d(g){return t.MouseTracker.havePointerEvents?g.pointerId:t.MouseTracker.mousePointerId}function w(g){return t.MouseTracker.havePointerEvents?g.pointerType||(t.Browser.vendor===t.BROWSERS.IE?"mouse":""):"mouse"}function v(g){return t.MouseTracker.havePointerEvents?g.isPrimary:!0}function T(g){return t.getMousePosition(g)}function x(g,p){return m(T(g),p)}function m(g,p){var E=t.getElementOffset(p);return g.minus(E)}function y(g,p){return new t.Point((g.x+p.x)/2,(g.y+p.y)/2)}function S(g,p){var E={originalEvent:p,eventType:"click",pointerType:"mouse",isEmulated:!1};C(g,E),E.preventDefault&&!E.defaultPrevented&&t.cancelEvent(p),E.stopPropagation&&t.stopEvent(p)}function _(g,p){var E={originalEvent:p,eventType:"dblclick",pointerType:"mouse",isEmulated:!1};C(g,E),E.preventDefault&&!E.defaultPrevented&&t.cancelEvent(p),E.stopPropagation&&t.stopEvent(p)}function b(g,p){var E=null,R={originalEvent:p,eventType:"keydown",pointerType:"",isEmulated:!1};C(g,R),g.keyDownHandler&&!R.preventGesture&&!R.defaultPrevented&&(E={eventSource:g,keyCode:p.keyCode?p.keyCode:p.charCode,ctrl:p.ctrlKey,shift:p.shiftKey,alt:p.altKey,meta:p.metaKey,originalEvent:p,preventDefault:R.preventDefault||R.defaultPrevented,userData:g.userData},g.keyDownHandler(E)),(E&&E.preventDefault||R.preventDefault&&!R.defaultPrevented)&&t.cancelEvent(p),R.stopPropagation&&t.stopEvent(p)}function O(g,p){var E=null,R={originalEvent:p,eventType:"keyup",pointerType:"",isEmulated:!1};C(g,R),g.keyUpHandler&&!R.preventGesture&&!R.defaultPrevented&&(E={eventSource:g,keyCode:p.keyCode?p.keyCode:p.charCode,ctrl:p.ctrlKey,shift:p.shiftKey,alt:p.altKey,meta:p.metaKey,originalEvent:p,preventDefault:R.preventDefault||R.defaultPrevented,userData:g.userData},g.keyUpHandler(E)),(E&&E.preventDefault||R.preventDefault&&!R.defaultPrevented)&&t.cancelEvent(p),R.stopPropagation&&t.stopEvent(p)}function z(g,p){var E=null,R={originalEvent:p,eventType:"keypress",pointerType:"",isEmulated:!1};C(g,R),g.keyHandler&&!R.preventGesture&&!R.defaultPrevented&&(E={eventSource:g,keyCode:p.keyCode?p.keyCode:p.charCode,ctrl:p.ctrlKey,shift:p.shiftKey,alt:p.altKey,meta:p.metaKey,originalEvent:p,preventDefault:R.preventDefault||R.defaultPrevented,userData:g.userData},g.keyHandler(E)),(E&&E.preventDefault||R.preventDefault&&!R.defaultPrevented)&&t.cancelEvent(p),R.stopPropagation&&t.stopEvent(p)}function M(g,p){var E={originalEvent:p,eventType:"focus",pointerType:"",isEmulated:!1};C(g,E),g.focusHandler&&!E.preventGesture&&g.focusHandler({eventSource:g,originalEvent:p,userData:g.userData})}function U(g,p){var E={originalEvent:p,eventType:"blur",pointerType:"",isEmulated:!1};C(g,E),g.blurHandler&&!E.preventGesture&&g.blurHandler({eventSource:g,originalEvent:p,userData:g.userData})}function W(g,p){var E=null,R={originalEvent:p,eventType:"contextmenu",pointerType:"mouse",isEmulated:!1};C(g,R),g.contextMenuHandler&&!R.preventGesture&&!R.defaultPrevented&&(E={eventSource:g,position:m(T(p),g.element),originalEvent:R.originalEvent,preventDefault:R.preventDefault||R.defaultPrevented,userData:g.userData},g.contextMenuHandler(E)),(E&&E.preventDefault||R.preventDefault&&!R.defaultPrevented)&&t.cancelEvent(p),R.stopPropagation&&t.stopEvent(p)}function te(g,p){de(g,p,p)}function ne(g,p){var E={target:p.target||p.srcElement,type:"wheel",shiftKey:p.shiftKey||!1,clientX:p.clientX,clientY:p.clientY,pageX:p.pageX?p.pageX:p.clientX,pageY:p.pageY?p.pageY:p.clientY,deltaMode:p.type==="MozMousePixelScroll"?0:1,deltaX:0,deltaZ:0};t.MouseTracker.wheelEventName==="mousewheel"?E.deltaY=-p.wheelDelta/t.DEFAULT_SETTINGS.pixelsPerWheelLine:E.deltaY=p.detail,de(g,E,p)}function de(g,p,E){var R=0,D,A=null;R=p.deltaY<0?1:-1,D={originalEvent:p,eventType:"wheel",pointerType:"mouse",isEmulated:p!==E},C(g,D),g.scrollHandler&&!D.preventGesture&&!D.defaultPrevented&&(A={eventSource:g,pointerType:"mouse",position:x(p,g.element),scroll:R,shift:p.shiftKey,isTouchEvent:!1,originalEvent:E,preventDefault:D.preventDefault||D.defaultPrevented,userData:g.userData},g.scrollHandler(A)),D.stopPropagation&&t.stopEvent(E),(A&&A.preventDefault||D.preventDefault&&!D.defaultPrevented)&&t.cancelEvent(E)}function Te(g,p){var E={id:t.MouseTracker.mousePointerId,type:"mouse"},R={originalEvent:p,eventType:"lostpointercapture",pointerType:"mouse",isEmulated:!1};C(g,R),p.target===g.element&&k(g,E,!1),R.stopPropagation&&t.stopEvent(p)}function st(g,p){var E,R,D=p.changedTouches.length,A,Z=g.getActivePointersListByType("touch");E=t.now(),Z.getLength()>p.touches.length-D&&t.console.warn("Tracked touch contact count doesn't match event.touches.length");var le={originalEvent:p,eventType:"pointerdown",pointerType:"touch",isEmulated:!1};for(C(g,le),R=0;R<D;R++)A={id:p.changedTouches[R].identifier,type:"touch",isPrimary:Z.getLength()===0,currentPos:T(p.changedTouches[R]),currentTime:E},H(g,le,A),oe(g,le,A,0),k(g,A,!0);le.preventDefault&&!le.defaultPrevented&&t.cancelEvent(p),le.stopPropagation&&t.stopEvent(p)}function ce(g,p){var E,R,D=p.changedTouches.length,A;E=t.now();var Z={originalEvent:p,eventType:"pointerup",pointerType:"touch",isEmulated:!1};for(C(g,Z),R=0;R<D;R++)A={id:p.changedTouches[R].identifier,type:"touch",currentPos:T(p.changedTouches[R]),currentTime:E},he(g,Z,A,0),k(g,A,!1),I(g,Z,A);Z.preventDefault&&!Z.defaultPrevented&&t.cancelEvent(p),Z.stopPropagation&&t.stopEvent(p)}function ke(g,p){var E,R,D=p.changedTouches.length,A;E=t.now();var Z={originalEvent:p,eventType:"pointermove",pointerType:"touch",isEmulated:!1};for(C(g,Z),R=0;R<D;R++)A={id:p.changedTouches[R].identifier,type:"touch",currentPos:T(p.changedTouches[R]),currentTime:E},pe(g,Z,A);Z.preventDefault&&!Z.defaultPrevented&&t.cancelEvent(p),Z.stopPropagation&&t.stopEvent(p)}function L(g,p){var E=p.changedTouches.length,R,D,A={originalEvent:p,eventType:"pointercancel",pointerType:"touch",isEmulated:!1};for(C(g,A),R=0;R<E;R++)D={id:p.changedTouches[R].identifier,type:"touch"},Y(g,A,D);A.stopPropagation&&t.stopEvent(p)}function V(g,p){return t.eventIsCanceled(p)||p.preventDefault(),!1}function q(g,p){return t.eventIsCanceled(p)||p.preventDefault(),!1}function $(g,p){var E={originalEvent:p,eventType:"gotpointercapture",pointerType:w(p),isEmulated:!1};C(g,E),p.target===g.element&&k(g,{id:p.pointerId,type:w(p)},!0),E.stopPropagation&&t.stopEvent(p)}function re(g,p){var E={originalEvent:p,eventType:"lostpointercapture",pointerType:w(p),isEmulated:!1};C(g,E),p.target===g.element&&k(g,{id:p.pointerId,type:w(p)},!1),E.stopPropagation&&t.stopEvent(p)}function K(g,p){var E={id:d(p),type:w(p),isPrimary:v(p),currentPos:T(p),currentTime:t.now()},R={originalEvent:p,eventType:"pointerenter",pointerType:E.type,isEmulated:!1};C(g,R),H(g,R,E)}function Oe(g,p){var E={id:d(p),type:w(p),isPrimary:v(p),currentPos:T(p),currentTime:t.now()},R={originalEvent:p,eventType:"pointerleave",pointerType:E.type,isEmulated:!1};C(g,R),I(g,R,E)}function ft(g,p){var E={id:d(p),type:w(p),isPrimary:v(p),currentPos:T(p),currentTime:t.now()},R={originalEvent:p,eventType:"pointerover",pointerType:E.type,isEmulated:!1};C(g,R),G(g,R,E),R.preventDefault&&!R.defaultPrevented&&t.cancelEvent(p),R.stopPropagation&&t.stopEvent(p)}function ot(g,p){var E={id:d(p),type:w(p),isPrimary:v(p),currentPos:T(p),currentTime:t.now()},R={originalEvent:p,eventType:"pointerout",pointerType:E.type,isEmulated:!1};C(g,R),j(g,R,E),R.preventDefault&&!R.defaultPrevented&&t.cancelEvent(p),R.stopPropagation&&t.stopEvent(p)}function pt(g,p){var E={id:d(p),type:w(p),isPrimary:v(p),currentPos:T(p),currentTime:t.now()},R=t.MouseTracker.havePointerEvents&&E.type==="touch"&&t.Browser.vendor!==t.BROWSERS.IE,D={originalEvent:p,eventType:"pointerdown",pointerType:E.type,isEmulated:!1};C(g,D),oe(g,D,E,p.button),D.preventDefault&&!D.defaultPrevented&&t.cancelEvent(p),D.stopPropagation&&t.stopEvent(p),D.shouldCapture&&(R?k(g,E,!0):c(g,E))}function $n(g,p){er(g,p)}function ks(g,p){var E=g.getActivePointersListByType(w(p));E.getById(p.pointerId)&&er(g,p),t.stopEvent(p)}function er(g,p){var E;E={id:d(p),type:w(p),isPrimary:v(p),currentPos:T(p),currentTime:t.now()};var R={originalEvent:p,eventType:"pointerup",pointerType:E.type,isEmulated:!1};C(g,R),he(g,R,E,p.button),R.preventDefault&&!R.defaultPrevented&&t.cancelEvent(p),R.stopPropagation&&t.stopEvent(p),R.shouldReleaseCapture&&(p.target===g.element?h(g,E):k(g,E,!1))}function tr(g,p){ir(g,p)}function Ns(g,p){var E=g.getActivePointersListByType(w(p));E.getById(p.pointerId)&&ir(g,p),t.stopEvent(p)}function ir(g,p){var E={id:d(p),type:w(p),isPrimary:v(p),currentPos:T(p),currentTime:t.now()},R={originalEvent:p,eventType:"pointermove",pointerType:E.type,isEmulated:!1};C(g,R),pe(g,R,E),R.preventDefault&&!R.defaultPrevented&&t.cancelEvent(p),R.stopPropagation&&t.stopEvent(p)}function Ds(g,p){var E={id:p.pointerId,type:w(p)},R={originalEvent:p,eventType:"pointercancel",pointerType:E.type,isEmulated:!1};C(g,R),Y(g,R,E),R.stopPropagation&&t.stopEvent(p)}function rn(g,p){return p.speed=0,p.direction=0,p.contactPos=p.currentPos,p.contactTime=p.currentTime,p.lastPos=p.currentPos,p.lastTime=p.currentTime,g.add(p)}function Ei(g,p,E){var R,D=p.getById(E.id);return D?(D.captured&&(t.console.warn("stopTrackingPointer() called on captured pointer"),h(g,D)),p.removeContact(),R=p.removeById(E.id)):R=p.getLength(),R}function f(g,p){switch(p.eventType){case"pointermove":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!1,p.preventGesture=!g.hasGestureHandlers,p.stopPropagation=!1;break;case"pointerover":case"pointerout":case"contextmenu":case"keydown":case"keyup":case"keypress":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!1,p.preventGesture=!1,p.stopPropagation=!1;break;case"pointerdown":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!1,p.preventGesture=!g.hasGestureHandlers,p.stopPropagation=!1;break;case"pointerup":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!1,p.preventGesture=!g.hasGestureHandlers,p.stopPropagation=!1;break;case"wheel":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!1,p.preventGesture=!g.hasScrollHandler,p.stopPropagation=!1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":p.isStoppable=!0,p.isCancelable=!1,p.preventDefault=!1,p.preventGesture=!1,p.stopPropagation=!1;break;case"click":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!!g.clickHandler,p.preventGesture=!1,p.stopPropagation=!1;break;case"dblclick":p.isStoppable=!0,p.isCancelable=!0,p.preventDefault=!!g.dblClickHandler,p.preventGesture=!1,p.stopPropagation=!1;break;case"focus":case"blur":case"pointerenter":case"pointerleave":default:p.isStoppable=!1,p.isCancelable=!1,p.preventDefault=!1,p.preventGesture=!1,p.stopPropagation=!1;break}}function C(g,p){p.eventSource=g,p.eventPhase=p.originalEvent&&typeof p.originalEvent.eventPhase<"u"?p.originalEvent.eventPhase:0,p.defaultPrevented=t.eventIsCanceled(p.originalEvent),p.shouldCapture=!1,p.shouldReleaseCapture=!1,p.userData=g.userData,f(g,p),g.preProcessEventHandler&&g.preProcessEventHandler(p)}function k(g,p,E){var R=g.getActivePointersListByType(p.type),D=R.getById(p.id);D?E&&!D.captured?(D.captured=!0,R.captureCount++):!E&&D.captured&&(D.captured=!1,R.captureCount--,R.captureCount<0&&(R.captureCount=0,t.console.warn("updatePointerCaptured() - pointsList.captureCount went negative"))):t.console.warn("updatePointerCaptured() called on untracked pointer")}function H(g,p,E){var R=g.getActivePointersListByType(E.type),D;D=R.getById(E.id),D?(D.insideElement=!0,D.lastPos=D.currentPos,D.lastTime=D.currentTime,D.currentPos=E.currentPos,D.currentTime=E.currentTime,E=D):(E.captured=!1,E.insideElementPressed=!1,E.insideElement=!0,rn(R,E)),g.enterHandler&&g.enterHandler({eventSource:g,pointerType:E.type,position:m(E.currentPos,g.element),buttons:R.buttons,pointers:g.getActivePointerCount(),insideElementPressed:E.insideElementPressed,buttonDownAny:R.buttons!==0,isTouchEvent:E.type==="touch",originalEvent:p.originalEvent,userData:g.userData})}function I(g,p,E){var R=g.getActivePointersListByType(E.type),D,A;D=R.getById(E.id),D?(D.captured?(D.insideElement=!1,D.lastPos=D.currentPos,D.lastTime=D.currentTime,D.currentPos=E.currentPos,D.currentTime=E.currentTime):Ei(g,R,D),E=D):(E.captured=!1,E.insideElementPressed=!1),(g.leaveHandler||g.exitHandler)&&(A={eventSource:g,pointerType:E.type,position:E.currentPos&&m(E.currentPos,g.element),buttons:R.buttons,pointers:g.getActivePointerCount(),insideElementPressed:E.insideElementPressed,buttonDownAny:R.buttons!==0,isTouchEvent:E.type==="touch",originalEvent:p.originalEvent,userData:g.userData},g.leaveHandler&&g.leaveHandler(A),g.exitHandler&&g.exitHandler(A))}function G(g,p,E){var R,D;R=g.getActivePointersListByType(E.type),D=R.getById(E.id),D?E=D:(E.captured=!1,E.insideElementPressed=!1),g.overHandler&&g.overHandler({eventSource:g,pointerType:E.type,position:m(E.currentPos,g.element),buttons:R.buttons,pointers:g.getActivePointerCount(),insideElementPressed:E.insideElementPressed,buttonDownAny:R.buttons!==0,isTouchEvent:E.type==="touch",originalEvent:p.originalEvent,userData:g.userData})}function j(g,p,E){var R,D;R=g.getActivePointersListByType(E.type),D=R.getById(E.id),D?E=D:(E.captured=!1,E.insideElementPressed=!1),g.outHandler&&g.outHandler({eventSource:g,pointerType:E.type,position:E.currentPos&&m(E.currentPos,g.element),buttons:R.buttons,pointers:g.getActivePointerCount(),insideElementPressed:E.insideElementPressed,buttonDownAny:R.buttons!==0,isTouchEvent:E.type==="touch",originalEvent:p.originalEvent,userData:g.userData})}function oe(g,p,E,R){var D=n[g.hash],A=g.getActivePointersListByType(E.type),Z;if(typeof p.originalEvent.buttons<"u"?A.buttons=p.originalEvent.buttons:R===0?A.buttons|=1:R===1?A.buttons|=4:R===2?A.buttons|=2:R===3?A.buttons|=8:R===4?A.buttons|=16:R===5&&(A.buttons|=32),R!==0){p.shouldCapture=!1,p.shouldReleaseCapture=!1,g.nonPrimaryPressHandler&&!p.preventGesture&&!p.defaultPrevented&&(p.preventDefault=!0,g.nonPrimaryPressHandler({eventSource:g,pointerType:E.type,position:m(E.currentPos,g.element),button:R,buttons:A.buttons,isTouchEvent:E.type==="touch",originalEvent:p.originalEvent,userData:g.userData}));return}Z=A.getById(E.id),Z?(Z.insideElementPressed=!0,Z.insideElement=!0,Z.originalTarget=p.originalEvent.target,Z.contactPos=E.currentPos,Z.contactTime=E.currentTime,Z.lastPos=Z.currentPos,Z.lastTime=Z.currentTime,Z.currentPos=E.currentPos,Z.currentTime=E.currentTime,E=Z):(E.captured=!1,E.insideElementPressed=!0,E.insideElement=!0,E.originalTarget=p.originalEvent.target,rn(A,E)),A.addContact(),!p.preventGesture&&!p.defaultPrevented?(p.shouldCapture=!0,p.shouldReleaseCapture=!1,p.preventDefault=!0,(g.dragHandler||g.dragEndHandler||g.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.addPoint(g,E),A.contacts===1?g.pressHandler&&!p.preventGesture&&g.pressHandler({eventSource:g,pointerType:E.type,position:m(E.contactPos,g.element),buttons:A.buttons,isTouchEvent:E.type==="touch",originalEvent:p.originalEvent,userData:g.userData}):A.contacts===2&&g.pinchHandler&&E.type==="touch"&&(D.pinchGPoints=A.asArray(),D.lastPinchDist=D.currentPinchDist=D.pinchGPoints[0].currentPos.distanceTo(D.pinchGPoints[1].currentPos),D.lastPinchCenter=D.currentPinchCenter=y(D.pinchGPoints[0].currentPos,D.pinchGPoints[1].currentPos))):(p.shouldCapture=!1,p.shouldReleaseCapture=!1)}function he(g,p,E,R){var D=n[g.hash],A=g.getActivePointersListByType(E.type),Z,le,Q,Je=!1,Ne;if(typeof p.originalEvent.buttons<"u"?A.buttons=p.originalEvent.buttons:R===0?A.buttons^=-2:R===1?A.buttons^=-5:R===2?A.buttons^=-3:R===3?A.buttons^=-9:R===4?A.buttons^=-17:R===5&&(A.buttons^=-33),p.shouldCapture=!1,R!==0){p.shouldReleaseCapture=!1,g.nonPrimaryReleaseHandler&&!p.preventGesture&&!p.defaultPrevented&&(p.preventDefault=!0,g.nonPrimaryReleaseHandler({eventSource:g,pointerType:E.type,position:m(E.currentPos,g.element),button:R,buttons:A.buttons,isTouchEvent:E.type==="touch",originalEvent:p.originalEvent,userData:g.userData}));return}Q=A.getById(E.id),Q?(A.removeContact(),Q.captured&&(Je=!0),Q.lastPos=Q.currentPos,Q.lastTime=Q.currentTime,Q.currentPos=E.currentPos,Q.currentTime=E.currentTime,Q.insideElement||Ei(g,A,Q),Z=Q.currentPos,le=Q.currentTime):(E.captured=!1,E.insideElementPressed=!1,E.insideElement=!0,rn(A,E),Q=E),!p.preventGesture&&!p.defaultPrevented&&(Je?(p.shouldReleaseCapture=!0,p.preventDefault=!0,(g.dragHandler||g.dragEndHandler||g.pinchHandler)&&t.MouseTracker.gesturePointVelocityTracker.removePoint(g,Q),A.contacts===0?(g.releaseHandler&&Z&&g.releaseHandler({eventSource:g,pointerType:Q.type,position:m(Z,g.element),buttons:A.buttons,insideElementPressed:Q.insideElementPressed,insideElementReleased:Q.insideElement,isTouchEvent:Q.type==="touch",originalEvent:p.originalEvent,userData:g.userData}),g.dragEndHandler&&D.sentDragEvent&&g.dragEndHandler({eventSource:g,pointerType:Q.type,position:m(Q.currentPos,g.element),speed:Q.speed,direction:Q.direction,shift:p.originalEvent.shiftKey,isTouchEvent:Q.type==="touch",originalEvent:p.originalEvent,userData:g.userData}),D.sentDragEvent=!1,(g.clickHandler||g.dblClickHandler)&&Q.insideElement&&(Ne=le-Q.contactTime<=g.clickTimeThreshold&&Q.contactPos.distanceTo(Z)<=g.clickDistThreshold,g.clickHandler&&g.clickHandler({eventSource:g,pointerType:Q.type,position:m(Q.currentPos,g.element),quick:Ne,shift:p.originalEvent.shiftKey,isTouchEvent:Q.type==="touch",originalEvent:p.originalEvent,originalTarget:Q.originalTarget,userData:g.userData}),g.dblClickHandler&&Ne&&(A.clicks++,A.clicks===1?(D.lastClickPos=Z,D.dblClickTimeOut=setTimeout(function(){A.clicks=0},g.dblClickTimeThreshold)):A.clicks===2&&(clearTimeout(D.dblClickTimeOut),A.clicks=0,D.lastClickPos.distanceTo(Z)<=g.dblClickDistThreshold&&g.dblClickHandler({eventSource:g,pointerType:Q.type,position:m(Q.currentPos,g.element),shift:p.originalEvent.shiftKey,isTouchEvent:Q.type==="touch",originalEvent:p.originalEvent,userData:g.userData}),D.lastClickPos=null)))):A.contacts===2&&g.pinchHandler&&Q.type==="touch"&&(D.pinchGPoints=A.asArray(),D.lastPinchDist=D.currentPinchDist=D.pinchGPoints[0].currentPos.distanceTo(D.pinchGPoints[1].currentPos),D.lastPinchCenter=D.currentPinchCenter=y(D.pinchGPoints[0].currentPos,D.pinchGPoints[1].currentPos))):(p.shouldReleaseCapture=!1,g.releaseHandler&&Z&&(g.releaseHandler({eventSource:g,pointerType:Q.type,position:m(Z,g.element),buttons:A.buttons,insideElementPressed:Q.insideElementPressed,insideElementReleased:Q.insideElement,isTouchEvent:Q.type==="touch",originalEvent:p.originalEvent,userData:g.userData}),p.preventDefault=!0)))}function pe(g,p,E){var R=n[g.hash],D=g.getActivePointersListByType(E.type),A,Z,le;if(typeof p.originalEvent.buttons<"u"&&(D.buttons=p.originalEvent.buttons),A=D.getById(E.id),A)A.lastPos=A.currentPos,A.lastTime=A.currentTime,A.currentPos=E.currentPos,A.currentTime=E.currentTime;else return;p.shouldCapture=!1,p.shouldReleaseCapture=!1,g.stopHandler&&E.type==="mouse"&&(clearTimeout(g.stopTimeOut),g.stopTimeOut=setTimeout(function(){Ee(g,p.originalEvent,E.type)},g.stopDelay)),D.contacts===0?g.moveHandler&&g.moveHandler({eventSource:g,pointerType:E.type,position:m(E.currentPos,g.element),buttons:D.buttons,isTouchEvent:E.type==="touch",originalEvent:p.originalEvent,userData:g.userData}):D.contacts===1?(g.moveHandler&&(A=D.asArray()[0],g.moveHandler({eventSource:g,pointerType:A.type,position:m(A.currentPos,g.element),buttons:D.buttons,isTouchEvent:A.type==="touch",originalEvent:p.originalEvent,userData:g.userData})),g.dragHandler&&!p.preventGesture&&!p.defaultPrevented&&(A=D.asArray()[0],le=A.currentPos.minus(A.lastPos),g.dragHandler({eventSource:g,pointerType:A.type,position:m(A.currentPos,g.element),buttons:D.buttons,delta:le,speed:A.speed,direction:A.direction,shift:p.originalEvent.shiftKey,isTouchEvent:A.type==="touch",originalEvent:p.originalEvent,userData:g.userData}),p.preventDefault=!0,R.sentDragEvent=!0)):D.contacts===2&&(g.moveHandler&&(Z=D.asArray(),g.moveHandler({eventSource:g,pointerType:Z[0].type,position:m(y(Z[0].currentPos,Z[1].currentPos),g.element),buttons:D.buttons,isTouchEvent:Z[0].type==="touch",originalEvent:p.originalEvent,userData:g.userData})),g.pinchHandler&&E.type==="touch"&&!p.preventGesture&&!p.defaultPrevented&&(le=R.pinchGPoints[0].currentPos.distanceTo(R.pinchGPoints[1].currentPos),le!==R.currentPinchDist&&(R.lastPinchDist=R.currentPinchDist,R.currentPinchDist=le,R.lastPinchCenter=R.currentPinchCenter,R.currentPinchCenter=y(R.pinchGPoints[0].currentPos,R.pinchGPoints[1].currentPos),g.pinchHandler({eventSource:g,pointerType:"touch",gesturePoints:R.pinchGPoints,lastCenter:m(R.lastPinchCenter,g.element),center:m(R.currentPinchCenter,g.element),lastDistance:R.lastPinchDist,distance:R.currentPinchDist,shift:p.originalEvent.shiftKey,originalEvent:p.originalEvent,userData:g.userData}),p.preventDefault=!0)))}function Y(g,p,E){var R=g.getActivePointersListByType(E.type),D;D=R.getById(E.id),D&&Ei(g,R,D)}function Ee(g,p,E){g.stopHandler&&g.stopHandler({eventSource:g,pointerType:E,position:x(p,g.element),buttons:g.getActivePointersListByType(E).buttons,isTouchEvent:E==="touch",originalEvent:p,userData:g.userData})}}(i),function(t){t.ControlAnchor={NONE:0,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,ABSOLUTE:5},t.Control=function(n,r,s){var a=n.parentNode;typeof r=="number"&&(t.console.error("Passing an anchor directly into the OpenSeadragon.Control constructor is deprecated; please use an options object instead.  Support for this deprecated variant is scheduled for removal in December 2013"),r={anchor:r}),r.attachToViewer=typeof r.attachToViewer>"u"?!0:r.attachToViewer,this.autoFade=typeof r.autoFade>"u"?!0:r.autoFade,this.element=n,this.anchor=r.anchor,this.container=s,this.anchor===t.ControlAnchor.ABSOLUTE?(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.position="absolute",this.wrapper.style.top=typeof r.top=="number"?r.top+"px":r.top,this.wrapper.style.left=typeof r.left=="number"?r.left+"px":r.left,this.wrapper.style.height=typeof r.height=="number"?r.height+"px":r.height,this.wrapper.style.width=typeof r.width=="number"?r.width+"px":r.width,this.wrapper.style.margin="0px",this.wrapper.style.padding="0px",this.element.style.position="relative",this.element.style.top="0px",this.element.style.left="0px",this.element.style.height="100%",this.element.style.width="100%"):(this.wrapper=t.makeNeutralElement("div"),this.wrapper.style.display="inline-block",this.anchor===t.ControlAnchor.NONE&&(this.wrapper.style.width=this.wrapper.style.height="100%")),this.wrapper.appendChild(this.element),r.attachToViewer?this.anchor===t.ControlAnchor.TOP_RIGHT||this.anchor===t.ControlAnchor.BOTTOM_RIGHT?this.container.insertBefore(this.wrapper,this.container.firstChild):this.container.appendChild(this.wrapper):a.appendChild(this.wrapper)},t.Control.prototype={destroy:function(){this.wrapper.removeChild(this.element),this.anchor!==t.ControlAnchor.NONE&&this.container.removeChild(this.wrapper)},isVisible:function(){return this.wrapper.style.display!=="none"},setVisible:function(n){this.wrapper.style.display=n?this.anchor===t.ControlAnchor.ABSOLUTE?"block":"inline-block":"none"},setOpacity:function(n){this.element[t.SIGNAL]&&t.Browser.vendor===t.BROWSERS.IE?t.setElementOpacity(this.element,n,!0):t.setElementOpacity(this.wrapper,n,!0)}}}(i),function(t){t.ControlDock=function(r){var s=["topleft","topright","bottomright","bottomleft"],a,o;for(t.extend(!0,this,{id:"controldock-"+t.now()+"-"+Math.floor(Math.random()*1e6),container:t.makeNeutralElement("div"),controls:[]},r),this.container.onsubmit=function(){return!1},this.element&&(this.element=t.getElement(this.element),this.element.appendChild(this.container),this.element.style.position="relative",this.container.style.width="100%",this.container.style.height="100%"),o=0;o<s.length;o++)a=s[o],this.controls[a]=t.makeNeutralElement("div"),this.controls[a].style.position="absolute",a.match("left")&&(this.controls[a].style.left="0px"),a.match("right")&&(this.controls[a].style.right="0px"),a.match("top")&&(this.controls[a].style.top="0px"),a.match("bottom")&&(this.controls[a].style.bottom="0px");this.container.appendChild(this.controls.topleft),this.container.appendChild(this.controls.topright),this.container.appendChild(this.controls.bottomright),this.container.appendChild(this.controls.bottomleft)},t.ControlDock.prototype={addControl:function(r,s){r=t.getElement(r);var a=null;if(!(n(this,r)>=0)){switch(s.anchor){case t.ControlAnchor.TOP_RIGHT:a=this.controls.topright,r.style.position="relative",r.style.paddingRight="0px",r.style.paddingTop="0px";break;case t.ControlAnchor.BOTTOM_RIGHT:a=this.controls.bottomright,r.style.position="relative",r.style.paddingRight="0px",r.style.paddingBottom="0px";break;case t.ControlAnchor.BOTTOM_LEFT:a=this.controls.bottomleft,r.style.position="relative",r.style.paddingLeft="0px",r.style.paddingBottom="0px";break;case t.ControlAnchor.TOP_LEFT:a=this.controls.topleft,r.style.position="relative",r.style.paddingLeft="0px",r.style.paddingTop="0px";break;case t.ControlAnchor.ABSOLUTE:a=this.container,r.style.margin="0px",r.style.padding="0px";break;default:case t.ControlAnchor.NONE:a=this.container,r.style.margin="0px",r.style.padding="0px";break}this.controls.push(new t.Control(r,s,a)),r.style.display="inline-block"}},removeControl:function(r){r=t.getElement(r);var s=n(this,r);return s>=0&&(this.controls[s].destroy(),this.controls.splice(s,1)),this},clearControls:function(){for(;this.controls.length>0;)this.controls.pop().destroy();return this},areControlsEnabled:function(){var r;for(r=this.controls.length-1;r>=0;r--)if(this.controls[r].isVisible())return!0;return!1},setControlsEnabled:function(r){var s;for(s=this.controls.length-1;s>=0;s--)this.controls[s].setVisible(r);return this}};function n(r,s){var a=r.controls,o;for(o=a.length-1;o>=0;o--)if(a[o].element===s)return o;return-1}}(i),function(t){t.Placement=t.freezeObject({CENTER:0,TOP_LEFT:1,TOP:2,TOP_RIGHT:3,RIGHT:4,BOTTOM_RIGHT:5,BOTTOM:6,BOTTOM_LEFT:7,LEFT:8,properties:{0:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1},1:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},2:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!0,isVerticallyCentered:!1,isBottom:!1},3:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!0,isVerticallyCentered:!1,isBottom:!1},4:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!0,isBottom:!1},5:{isLeft:!1,isHorizontallyCentered:!1,isRight:!0,isTop:!1,isVerticallyCentered:!1,isBottom:!0},6:{isLeft:!1,isHorizontallyCentered:!0,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},7:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!1,isBottom:!0},8:{isLeft:!0,isHorizontallyCentered:!1,isRight:!1,isTop:!1,isVerticallyCentered:!0,isBottom:!1}}})}(i),function(t){var n={},r=1;t.Viewer=function(f){var C=arguments,k=this,H;if(t.isPlainObject(f)||(f={id:C[0],xmlPath:C.length>1?C[1]:void 0,prefixUrl:C.length>2?C[2]:void 0,controls:C.length>3?C[3]:void 0,overlays:C.length>4?C[4]:void 0}),f.config&&(t.extend(!0,f,f.config),delete f.config),t.extend(!0,this,{id:f.id,hash:f.hash||r++,initialPage:0,element:null,container:null,canvas:null,overlays:[],overlaysContainer:null,previousBody:[],customControls:[],source:null,drawer:null,world:null,viewport:null,navigator:null,collectionViewport:null,collectionDrawer:null,navImages:null,buttonGroup:null,profiler:null},t.DEFAULT_SETTINGS,f),typeof this.hash>"u")throw new Error("A hash must be defined, either by specifying options.id or options.hash.");for(typeof n[this.hash]<"u"&&t.console.warn("Hash "+this.hash+" has already been used."),n[this.hash]={fsBoundsDelta:new t.Point(1,1),prevContainerSize:null,animating:!1,forceRedraw:!1,needsResize:!1,forceResize:!1,mouseInside:!1,group:null,zooming:!1,zoomFactor:null,lastZoomTime:null,fullPage:!1,onfullscreenchange:null,lastClickTime:null,draggingToZoom:!1},this._sequenceIndex=0,this._firstOpen=!0,this._updateRequestId=null,this._loadQueue=[],this.currentOverlays=[],this._updatePixelDensityRatioBind=null,this._lastScrollTime=t.now(),t.EventSource.call(this),this.addHandler("open-failed",function(I){var G=t.getString("Errors.OpenFailed",I.eventSource,I.message);k._showMessage(G)}),t.ControlDock.call(this,f),this.xmlPath&&(this.tileSources=[this.xmlPath]),this.element=this.element||document.getElementById(this.id),this.canvas=t.makeNeutralElement("div"),this.canvas.className="openseadragon-canvas",function(I){I.width="100%",I.height="100%",I.overflow="hidden",I.position="absolute",I.top="0px",I.left="0px"}(this.canvas.style),t.setElementTouchActionNone(this.canvas),f.tabIndex!==""&&(this.canvas.tabIndex=f.tabIndex===void 0?0:f.tabIndex),this.container.className="openseadragon-container",function(I){I.width="100%",I.height="100%",I.position="relative",I.overflow="hidden",I.left="0px",I.top="0px",I.textAlign="left"}(this.container.style),t.setElementTouchActionNone(this.container),this.container.insertBefore(this.canvas,this.container.firstChild),this.element.appendChild(this.container),this.bodyWidth=document.body.style.width,this.bodyHeight=document.body.style.height,this.bodyOverflow=document.body.style.overflow,this.docOverflow=document.documentElement.style.overflow,this.innerTracker=new t.MouseTracker({userData:"Viewer.innerTracker",element:this.canvas,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,contextMenuHandler:t.delegate(this,x),keyDownHandler:t.delegate(this,m),keyHandler:t.delegate(this,y),clickHandler:t.delegate(this,S),dblClickHandler:t.delegate(this,_),dragHandler:t.delegate(this,b),dragEndHandler:t.delegate(this,O),enterHandler:t.delegate(this,z),leaveHandler:t.delegate(this,M),pressHandler:t.delegate(this,U),releaseHandler:t.delegate(this,W),nonPrimaryPressHandler:t.delegate(this,te),nonPrimaryReleaseHandler:t.delegate(this,ne),scrollHandler:t.delegate(this,ce),pinchHandler:t.delegate(this,de),focusHandler:t.delegate(this,Te),blurHandler:t.delegate(this,st)}),this.outerTracker=new t.MouseTracker({userData:"Viewer.outerTracker",element:this.container,startDisabled:!this.mouseNavEnabled,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,dblClickTimeThreshold:this.dblClickTimeThreshold,dblClickDistThreshold:this.dblClickDistThreshold,enterHandler:t.delegate(this,ke),leaveHandler:t.delegate(this,L)}),this.toolbar&&(this.toolbar=new t.ControlDock({element:this.toolbar})),this.bindStandardControls(),n[this.hash].prevContainerSize=s(this.container),window.ResizeObserver?(this._autoResizePolling=!1,this._resizeObserver=new ResizeObserver(function(){n[k.hash].needsResize=!0}),this._resizeObserver.observe(this.container,{})):this._autoResizePolling=!0,this.world=new t.World({viewer:this}),this.world.addHandler("add-item",function(I){k.source=k.world.getItemAt(0).source,n[k.hash].forceRedraw=!0,k._updateRequestId||(k._updateRequestId=u(k,V))}),this.world.addHandler("remove-item",function(I){k.world.getItemCount()?k.source=k.world.getItemAt(0).source:k.source=null,n[k.hash].forceRedraw=!0}),this.world.addHandler("metrics-change",function(I){k.viewport&&k.viewport._setContentBounds(k.world.getHomeBounds(),k.world.getContentFactor())}),this.world.addHandler("item-index-change",function(I){k.source=k.world.getItemAt(0).source}),this.viewport=new t.Viewport({containerSize:n[this.hash].prevContainerSize,springStiffness:this.springStiffness,animationTime:this.animationTime,minZoomImageRatio:this.minZoomImageRatio,maxZoomPixelRatio:this.maxZoomPixelRatio,visibilityRatio:this.visibilityRatio,wrapHorizontal:this.wrapHorizontal,wrapVertical:this.wrapVertical,defaultZoomLevel:this.defaultZoomLevel,minZoomLevel:this.minZoomLevel,maxZoomLevel:this.maxZoomLevel,viewer:this,degrees:this.degrees,flipped:this.flipped,navigatorRotate:this.navigatorRotate,homeFillsViewer:this.homeFillsViewer,margins:this.viewportMargins,silenceMultiImageWarnings:this.silenceMultiImageWarnings}),this.viewport._setContentBounds(this.world.getHomeBounds(),this.world.getContentFactor()),this.imageLoader=new t.ImageLoader({jobLimit:this.imageLoaderLimit,timeout:f.timeout,tileRetryMax:this.tileRetryMax,tileRetryDelay:this.tileRetryDelay}),this.tileCache=new t.TileCache({maxImageCacheCount:this.maxImageCacheCount}),this.drawer=new t.Drawer({viewer:this,viewport:this.viewport,element:this.canvas,debugGridColor:this.debugGridColor}),this.overlaysContainer=t.makeNeutralElement("div"),this.canvas.appendChild(this.overlaysContainer),this.drawer.canRotate()||(this.rotateLeft&&(H=this.buttonGroup.buttons.indexOf(this.rotateLeft),this.buttonGroup.buttons.splice(H,1),this.buttonGroup.element.removeChild(this.rotateLeft.element)),this.rotateRight&&(H=this.buttonGroup.buttons.indexOf(this.rotateRight),this.buttonGroup.buttons.splice(H,1),this.buttonGroup.element.removeChild(this.rotateRight.element))),this._addUpdatePixelDensityRatioEvent(),this.showNavigator&&(this.navigator=new t.Navigator({element:this.navigatorElement,id:this.navigatorId,position:this.navigatorPosition,sizeRatio:this.navigatorSizeRatio,maintainSizeRatio:this.navigatorMaintainSizeRatio,top:this.navigatorTop,left:this.navigatorLeft,width:this.navigatorWidth,height:this.navigatorHeight,autoResize:this.navigatorAutoResize,autoFade:this.navigatorAutoFade,prefixUrl:this.prefixUrl,viewer:this,navigatorRotate:this.navigatorRotate,background:this.navigatorBackground,opacity:this.navigatorOpacity,borderColor:this.navigatorBorderColor,displayRegionColor:this.navigatorDisplayRegionColor,crossOriginPolicy:this.crossOriginPolicy,animationTime:this.animationTime})),this.sequenceMode&&this.bindSequenceControls(),this.tileSources&&this.open(this.tileSources),H=0;H<this.customControls.length;H++)this.addControl(this.customControls[H].id,{anchor:this.customControls[H].anchor});t.requestAnimationFrame(function(){h(k)}),this.imageSmoothingEnabled!==void 0&&!this.imageSmoothingEnabled&&this.drawer.setImageSmoothingEnabled(this.imageSmoothingEnabled),t._viewers.set(this.element,this)},t.extend(t.Viewer.prototype,t.EventSource.prototype,t.ControlDock.prototype,{isOpen:function(){return!!this.world.getItemCount()},openDzi:function(f){return t.console.error("[Viewer.openDzi] this function is deprecated; use Viewer.open() instead."),this.open(f)},openTileSource:function(f){return t.console.error("[Viewer.openTileSource] this function is deprecated; use Viewer.open() instead."),this.open(f)},get buttons(){return t.console.warn("Viewer.buttons is deprecated; Please use Viewer.buttonGroup"),this.buttonGroup},open:function(f,C){var k=this;if(this.close(),!f)return this;if(this.sequenceMode&&t.isArray(f))return this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),typeof C<"u"&&!isNaN(C)&&(this.initialPage=C),this.tileSources=f,this._sequenceIndex=Math.max(0,Math.min(this.tileSources.length-1,this.initialPage)),this.tileSources.length&&(this.open(this.tileSources[this._sequenceIndex]),this.showReferenceStrip&&this.addReferenceStrip()),this._updateSequenceButtons(this._sequenceIndex),this;if(t.isArray(f)||(f=[f]),!f.length)return this;this._opening=!0;for(var H=f.length,I=0,G=0,j,oe=function(){if(I+G===H)if(I){(k._firstOpen||!k.preserveViewport)&&(k.viewport.goHome(!0),k.viewport.update()),k._firstOpen=!1;var Y=f[0];if(Y.tileSource&&(Y=Y.tileSource),k.overlays&&!k.preserveOverlays)for(var Ee=0;Ee<k.overlays.length;Ee++)k.currentOverlays[Ee]=o(k,k.overlays[Ee]);k._drawOverlays(),k._opening=!1,k.raiseEvent("open",{source:Y})}else k._opening=!1,k.raiseEvent("open-failed",j)},he=function(Y){(!t.isPlainObject(Y)||!Y.tileSource)&&(Y={tileSource:Y}),Y.index!==void 0&&(t.console.error("[Viewer.open] setting indexes here is not supported; use addTiledImage instead"),delete Y.index),Y.collectionImmediately===void 0&&(Y.collectionImmediately=!0);var Ee=Y.success;Y.success=function(p){if(I++,Y.tileSource.overlays)for(var E=0;E<Y.tileSource.overlays.length;E++)k.addOverlay(Y.tileSource.overlays[E]);Ee&&Ee(p),oe()};var g=Y.error;Y.error=function(p){G++,j||(j=p),g&&g(p),oe()},k.addTiledImage(Y)},pe=0;pe<f.length;pe++)he(f[pe]);return this},close:function(){return n[this.hash]?(this._opening=!1,this.navigator&&this.navigator.close(),this.preserveOverlays||(this.clearOverlays(),this.overlaysContainer.innerHTML=""),n[this.hash].animating=!1,this.world.removeAll(),this.imageLoader.clear(),this.raiseEvent("close"),this):this},destroy:function(){if(n[this.hash]){if(this.raiseEvent("before-destroy"),this._removeUpdatePixelDensityRatioEvent(),this.close(),this.clearOverlays(),this.overlaysContainer.innerHTML="",this._resizeObserver&&this._resizeObserver.disconnect(),this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null),this._updateRequestId!==null&&(t.cancelAnimationFrame(this._updateRequestId),this._updateRequestId=null),this.drawer&&this.drawer.destroy(),this.navigator&&(this.navigator.destroy(),n[this.navigator.hash]=null,delete n[this.navigator.hash],this.navigator=null),this.buttonGroup)this.buttonGroup.destroy();else if(this.customButtons)for(;this.customButtons.length;)this.customButtons.pop().destroy();if(this.paging&&this.paging.destroy(),this.element)for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.container.onsubmit=null,this.clearControls(),this.innerTracker&&this.innerTracker.destroy(),this.outerTracker&&this.outerTracker.destroy(),n[this.hash]=null,delete n[this.hash],this.canvas=null,this.container=null,t._viewers.delete(this.element),this.element=null,this.raiseEvent("destroy"),this.removeAllHandlers()}},isMouseNavEnabled:function(){return this.innerTracker.isTracking()},setMouseNavEnabled:function(f){return this.innerTracker.setTracking(f),this.outerTracker.setTracking(f),this.raiseEvent("mouse-enabled",{enabled:f}),this},areControlsEnabled:function(){var f=this.controls.length,C;for(C=0;C<this.controls.length;C++)f=f&&this.controls[C].isVisible();return f},setControlsEnabled:function(f){return f?w(this):h(this),this.raiseEvent("controls-enabled",{enabled:f}),this},setDebugMode:function(f){for(var C=0;C<this.world.getItemCount();C++)this.world.getItemAt(C).debugMode=f;this.debugMode=f,this.forceRedraw()},setAjaxHeaders:function(f,C){if(f===null&&(f={}),!t.isPlainObject(f)){console.error("[Viewer.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}if(C===void 0&&(C=!0),this.ajaxHeaders=f,C){for(var k=0;k<this.world.getItemCount();k++)this.world.getItemAt(k)._updateAjaxHeaders(!0);if(this.navigator&&this.navigator.setAjaxHeaders(this.ajaxHeaders,!0),this.referenceStrip&&this.referenceStrip.miniViewers)for(var H in this.referenceStrip.miniViewers)this.referenceStrip.miniViewers[H].setAjaxHeaders(this.ajaxHeaders,!0)}},addButton:function(f){this.buttonGroup.addButton(f)},isFullPage:function(){return n[this.hash].fullPage},setFullPage:function(f){var C=document.body,k=C.style,H=document.documentElement.style,I=this,G,j;if(f===this.isFullPage())return this;var oe={fullPage:f,preventDefaultAction:!1};if(this.raiseEvent("pre-full-page",oe),oe.preventDefaultAction)return this;if(f){for(this.elementSize=t.getElementSize(this.element),this.pageScroll=t.getPageScroll(),this.elementMargin=this.element.style.margin,this.element.style.margin="0",this.elementPadding=this.element.style.padding,this.element.style.padding="0",this.bodyMargin=k.margin,this.docMargin=H.margin,k.margin="0",H.margin="0",this.bodyPadding=k.padding,this.docPadding=H.padding,k.padding="0",H.padding="0",this.bodyWidth=k.width,this.docWidth=H.width,k.width="100%",H.width="100%",this.bodyHeight=k.height,this.docHeight=H.height,k.height="100%",H.height="100%",this.bodyDisplay=k.display,k.display="block",this.previousBody=[],n[this.hash].prevElementParent=this.element.parentNode,n[this.hash].prevNextSibling=this.element.nextSibling,n[this.hash].prevElementWidth=this.element.style.width,n[this.hash].prevElementHeight=this.element.style.height,G=C.childNodes.length,j=0;j<G;j++)this.previousBody.push(C.childNodes[0]),C.removeChild(C.childNodes[0]);this.toolbar&&this.toolbar.element&&(this.toolbar.parentNode=this.toolbar.element.parentNode,this.toolbar.nextSibling=this.toolbar.element.nextSibling,C.appendChild(this.toolbar.element),t.addClass(this.toolbar.element,"fullpage")),t.addClass(this.element,"fullpage"),C.appendChild(this.element),this.element.style.height="100vh",this.element.style.width="100vw",this.toolbar&&this.toolbar.element&&(this.element.style.height=t.getElementSize(this.element).y-t.getElementSize(this.toolbar.element).y+"px"),n[this.hash].fullPage=!0,t.delegate(this,ke)({})}else{for(this.element.style.margin=this.elementMargin,this.element.style.padding=this.elementPadding,k.margin=this.bodyMargin,H.margin=this.docMargin,k.padding=this.bodyPadding,H.padding=this.docPadding,k.width=this.bodyWidth,H.width=this.docWidth,k.height=this.bodyHeight,H.height=this.docHeight,k.display=this.bodyDisplay,C.removeChild(this.element),G=this.previousBody.length,j=0;j<G;j++)C.appendChild(this.previousBody.shift());t.removeClass(this.element,"fullpage"),n[this.hash].prevElementParent.insertBefore(this.element,n[this.hash].prevNextSibling),this.toolbar&&this.toolbar.element&&(C.removeChild(this.toolbar.element),t.removeClass(this.toolbar.element,"fullpage"),this.toolbar.parentNode.insertBefore(this.toolbar.element,this.toolbar.nextSibling),delete this.toolbar.parentNode,delete this.toolbar.nextSibling),this.element.style.width=n[this.hash].prevElementWidth,this.element.style.height=n[this.hash].prevElementHeight;var he=0,pe=function(){t.setPageScroll(I.pageScroll);var Y=t.getPageScroll();he++,he<10&&(Y.x!==I.pageScroll.x||Y.y!==I.pageScroll.y)&&t.requestAnimationFrame(pe)};t.requestAnimationFrame(pe),n[this.hash].fullPage=!1,t.delegate(this,L)({})}return this.navigator&&this.viewport&&this.navigator.update(this.viewport),this.raiseEvent("full-page",{fullPage:f}),this},setFullScreen:function(f){var C=this;if(!t.supportsFullScreen)return this.setFullPage(f);if(t.isFullScreen()===f)return this;var k={fullScreen:f,preventDefaultAction:!1};if(this.raiseEvent("pre-full-screen",k),k.preventDefaultAction)return this;if(f){if(this.setFullPage(!0),!this.isFullPage())return this;this.fullPageStyleWidth=this.element.style.width,this.fullPageStyleHeight=this.element.style.height,this.element.style.width="100%",this.element.style.height="100%";var H=function(){var I=t.isFullScreen();I||(t.removeEvent(document,t.fullScreenEventName,H),t.removeEvent(document,t.fullScreenErrorEventName,H),C.setFullPage(!1),C.isFullPage()&&(C.element.style.width=C.fullPageStyleWidth,C.element.style.height=C.fullPageStyleHeight)),C.navigator&&C.viewport&&setTimeout(function(){C.navigator.update(C.viewport)}),C.raiseEvent("full-screen",{fullScreen:I})};t.addEvent(document,t.fullScreenEventName,H),t.addEvent(document,t.fullScreenErrorEventName,H),t.requestFullScreen(document.body)}else t.exitFullScreen();return this},isVisible:function(){return this.container.style.visibility!=="hidden"},isFullScreen:function(){return t.isFullScreen()&&this.isFullPage()},setVisible:function(f){return this.container.style.visibility=f?"":"hidden",this.raiseEvent("visible",{visible:f}),this},addTiledImage:function(f){t.console.assert(f,"[Viewer.addTiledImage] options is required"),t.console.assert(f.tileSource,"[Viewer.addTiledImage] options.tileSource is required"),t.console.assert(!f.replace||f.index>-1&&f.index<this.world.getItemCount(),"[Viewer.addTiledImage] if options.replace is used, options.index must be a valid index in Viewer.world");var C=this;f.replace&&(f.replaceItem=C.world.getItemAt(f.index)),this._hideMessage(),f.placeholderFillStyle===void 0&&(f.placeholderFillStyle=this.placeholderFillStyle),f.opacity===void 0&&(f.opacity=this.opacity),f.preload===void 0&&(f.preload=this.preload),f.compositeOperation===void 0&&(f.compositeOperation=this.compositeOperation),f.crossOriginPolicy===void 0&&(f.crossOriginPolicy=f.tileSource.crossOriginPolicy!==void 0?f.tileSource.crossOriginPolicy:this.crossOriginPolicy),f.ajaxWithCredentials===void 0&&(f.ajaxWithCredentials=this.ajaxWithCredentials),f.loadTilesWithAjax===void 0&&(f.loadTilesWithAjax=this.loadTilesWithAjax),t.isPlainObject(f.ajaxHeaders)||(f.ajaxHeaders={});var k={options:f};function H(j){for(var oe=0;oe<C._loadQueue.length;oe++)if(C._loadQueue[oe]===k){C._loadQueue.splice(oe,1);break}C._loadQueue.length===0&&I(k),C.raiseEvent("add-item-failed",j),f.error&&f.error(j)}function I(j){C.collectionMode&&(C.world.arrange({immediately:j.options.collectionImmediately,rows:C.collectionRows,columns:C.collectionColumns,layout:C.collectionLayout,tileSize:C.collectionTileSize,tileMargin:C.collectionTileMargin}),C.world.setAutoRefigureSizes(!0))}if(t.isArray(f.tileSource)){setTimeout(function(){H({message:"[Viewer.addTiledImage] Sequences can not be added; add them one at a time instead.",source:f.tileSource,options:f})});return}this._loadQueue.push(k);function G(){for(var j,oe,he;C._loadQueue.length&&(j=C._loadQueue[0],!!j.tileSource);){if(C._loadQueue.splice(0,1),j.options.replace){var pe=C.world.getIndexOfItem(j.options.replaceItem);pe!==-1&&(j.options.index=pe),C.world.removeItem(j.options.replaceItem)}oe=new t.TiledImage({viewer:C,source:j.tileSource,viewport:C.viewport,drawer:C.drawer,tileCache:C.tileCache,imageLoader:C.imageLoader,x:j.options.x,y:j.options.y,width:j.options.width,height:j.options.height,fitBounds:j.options.fitBounds,fitBoundsPlacement:j.options.fitBoundsPlacement,clip:j.options.clip,placeholderFillStyle:j.options.placeholderFillStyle,opacity:j.options.opacity,preload:j.options.preload,degrees:j.options.degrees,flipped:j.options.flipped,compositeOperation:j.options.compositeOperation,springStiffness:C.springStiffness,animationTime:C.animationTime,minZoomImageRatio:C.minZoomImageRatio,wrapHorizontal:C.wrapHorizontal,wrapVertical:C.wrapVertical,immediateRender:C.immediateRender,blendTime:C.blendTime,alwaysBlend:C.alwaysBlend,minPixelRatio:C.minPixelRatio,smoothTileEdgesMinZoom:C.smoothTileEdgesMinZoom,iOSDevice:C.iOSDevice,crossOriginPolicy:j.options.crossOriginPolicy,ajaxWithCredentials:j.options.ajaxWithCredentials,loadTilesWithAjax:j.options.loadTilesWithAjax,ajaxHeaders:j.options.ajaxHeaders,debugMode:C.debugMode,subPixelRoundingForTransparency:C.subPixelRoundingForTransparency}),C.collectionMode&&C.world.setAutoRefigureSizes(!1),C.navigator&&(he=t.extend({},j.options,{replace:!1,originalTiledImage:oe,tileSource:j.tileSource}),C.navigator.addTiledImage(he)),C.world.addItem(oe,{index:j.options.index}),C._loadQueue.length===0&&I(j),C.world.getItemCount()===1&&!C.preserveViewport&&C.viewport.goHome(!0),j.options.success&&j.options.success({item:oe})}}a(this,f.tileSource,f,function(j){k.tileSource=j,G()},function(j){j.options=f,H(j),G()})},addSimpleImage:function(f){t.console.assert(f,"[Viewer.addSimpleImage] options is required"),t.console.assert(f.url,"[Viewer.addSimpleImage] options.url is required");var C=t.extend({},f,{tileSource:{type:"image",url:f.url}});delete C.url,this.addTiledImage(C)},addLayer:function(f){var C=this;t.console.error("[Viewer.addLayer] this function is deprecated; use Viewer.addTiledImage() instead.");var k=t.extend({},f,{success:function(H){C.raiseEvent("add-layer",{options:f,drawer:H.item})},error:function(H){C.raiseEvent("add-layer-failed",H)}});return this.addTiledImage(k),this},getLayerAtLevel:function(f){return t.console.error("[Viewer.getLayerAtLevel] this function is deprecated; use World.getItemAt() instead."),this.world.getItemAt(f)},getLevelOfLayer:function(f){return t.console.error("[Viewer.getLevelOfLayer] this function is deprecated; use World.getIndexOfItem() instead."),this.world.getIndexOfItem(f)},getLayersCount:function(){return t.console.error("[Viewer.getLayersCount] this function is deprecated; use World.getItemCount() instead."),this.world.getItemCount()},setLayerLevel:function(f,C){return t.console.error("[Viewer.setLayerLevel] this function is deprecated; use World.setItemIndex() instead."),this.world.setItemIndex(f,C)},removeLayer:function(f){return t.console.error("[Viewer.removeLayer] this function is deprecated; use World.removeItem() instead."),this.world.removeItem(f)},forceRedraw:function(){return n[this.hash].forceRedraw=!0,this},forceResize:function(){n[this.hash].needsResize=!0,n[this.hash].forceResize=!0},bindSequenceControls:function(){var f=t.delegate(this,v),C=t.delegate(this,T),k=t.delegate(this,this.goToNextPage),H=t.delegate(this,this.goToPreviousPage),I=this.navImages,G=!0;return this.showSequenceControl&&((this.previousButton||this.nextButton)&&(G=!1),this.previousButton=new t.Button({element:this.previousButton?t.getElement(this.previousButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.PreviousPage"),srcRest:K(this.prefixUrl,I.previous.REST),srcGroup:K(this.prefixUrl,I.previous.GROUP),srcHover:K(this.prefixUrl,I.previous.HOVER),srcDown:K(this.prefixUrl,I.previous.DOWN),onRelease:H,onFocus:f,onBlur:C}),this.nextButton=new t.Button({element:this.nextButton?t.getElement(this.nextButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.NextPage"),srcRest:K(this.prefixUrl,I.next.REST),srcGroup:K(this.prefixUrl,I.next.GROUP),srcHover:K(this.prefixUrl,I.next.HOVER),srcDown:K(this.prefixUrl,I.next.DOWN),onRelease:k,onFocus:f,onBlur:C}),this.navPrevNextWrap||this.previousButton.disable(),(!this.tileSources||!this.tileSources.length)&&this.nextButton.disable(),G&&(this.paging=new t.ButtonGroup({buttons:[this.previousButton,this.nextButton],clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.pagingControl=this.paging.element,this.toolbar?this.toolbar.addControl(this.pagingControl,{anchor:t.ControlAnchor.BOTTOM_RIGHT}):this.addControl(this.pagingControl,{anchor:this.sequenceControlAnchor||t.ControlAnchor.TOP_LEFT}))),this},bindStandardControls:function(){var f=t.delegate(this,Oe),C=t.delegate(this,ot),k=t.delegate(this,ks),H=t.delegate(this,ft),I=t.delegate(this,er),G=t.delegate(this,Ns),j=t.delegate(this,ir),oe=t.delegate(this,Ds),he=t.delegate(this,rn),pe=t.delegate(this,Ei),Y=t.delegate(this,v),Ee=t.delegate(this,T),g=this.navImages,p=[],E=!0;return this.showNavigationControl&&((this.zoomInButton||this.zoomOutButton||this.homeButton||this.fullPageButton||this.rotateLeftButton||this.rotateRightButton||this.flipButton)&&(E=!1),this.showZoomControl&&(p.push(this.zoomInButton=new t.Button({element:this.zoomInButton?t.getElement(this.zoomInButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomIn"),srcRest:K(this.prefixUrl,g.zoomIn.REST),srcGroup:K(this.prefixUrl,g.zoomIn.GROUP),srcHover:K(this.prefixUrl,g.zoomIn.HOVER),srcDown:K(this.prefixUrl,g.zoomIn.DOWN),onPress:f,onRelease:C,onClick:k,onEnter:f,onExit:C,onFocus:Y,onBlur:Ee})),p.push(this.zoomOutButton=new t.Button({element:this.zoomOutButton?t.getElement(this.zoomOutButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.ZoomOut"),srcRest:K(this.prefixUrl,g.zoomOut.REST),srcGroup:K(this.prefixUrl,g.zoomOut.GROUP),srcHover:K(this.prefixUrl,g.zoomOut.HOVER),srcDown:K(this.prefixUrl,g.zoomOut.DOWN),onPress:H,onRelease:C,onClick:I,onEnter:H,onExit:C,onFocus:Y,onBlur:Ee}))),this.showHomeControl&&p.push(this.homeButton=new t.Button({element:this.homeButton?t.getElement(this.homeButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.Home"),srcRest:K(this.prefixUrl,g.home.REST),srcGroup:K(this.prefixUrl,g.home.GROUP),srcHover:K(this.prefixUrl,g.home.HOVER),srcDown:K(this.prefixUrl,g.home.DOWN),onRelease:G,onFocus:Y,onBlur:Ee})),this.showFullPageControl&&p.push(this.fullPageButton=new t.Button({element:this.fullPageButton?t.getElement(this.fullPageButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.FullPage"),srcRest:K(this.prefixUrl,g.fullpage.REST),srcGroup:K(this.prefixUrl,g.fullpage.GROUP),srcHover:K(this.prefixUrl,g.fullpage.HOVER),srcDown:K(this.prefixUrl,g.fullpage.DOWN),onRelease:j,onFocus:Y,onBlur:Ee})),this.showRotationControl&&(p.push(this.rotateLeftButton=new t.Button({element:this.rotateLeftButton?t.getElement(this.rotateLeftButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.RotateLeft"),srcRest:K(this.prefixUrl,g.rotateleft.REST),srcGroup:K(this.prefixUrl,g.rotateleft.GROUP),srcHover:K(this.prefixUrl,g.rotateleft.HOVER),srcDown:K(this.prefixUrl,g.rotateleft.DOWN),onRelease:oe,onFocus:Y,onBlur:Ee})),p.push(this.rotateRightButton=new t.Button({element:this.rotateRightButton?t.getElement(this.rotateRightButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.RotateRight"),srcRest:K(this.prefixUrl,g.rotateright.REST),srcGroup:K(this.prefixUrl,g.rotateright.GROUP),srcHover:K(this.prefixUrl,g.rotateright.HOVER),srcDown:K(this.prefixUrl,g.rotateright.DOWN),onRelease:he,onFocus:Y,onBlur:Ee}))),this.showFlipControl&&p.push(this.flipButton=new t.Button({element:this.flipButton?t.getElement(this.flipButton):null,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,tooltip:t.getString("Tooltips.Flip"),srcRest:K(this.prefixUrl,g.flip.REST),srcGroup:K(this.prefixUrl,g.flip.GROUP),srcHover:K(this.prefixUrl,g.flip.HOVER),srcDown:K(this.prefixUrl,g.flip.DOWN),onRelease:pe,onFocus:Y,onBlur:Ee})),E?(this.buttonGroup=new t.ButtonGroup({buttons:p,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold}),this.navControl=this.buttonGroup.element,this.addHandler("open",t.delegate(this,tr)),this.toolbar?this.toolbar.addControl(this.navControl,{anchor:this.navigationControlAnchor||t.ControlAnchor.TOP_LEFT}):this.addControl(this.navControl,{anchor:this.navigationControlAnchor||t.ControlAnchor.TOP_LEFT})):this.customButtons=p),this},currentPage:function(){return this._sequenceIndex},goToPage:function(f){return this.tileSources&&f>=0&&f<this.tileSources.length&&(this._sequenceIndex=f,this._updateSequenceButtons(f),this.open(this.tileSources[f]),this.referenceStrip&&this.referenceStrip.setFocus(f),this.raiseEvent("page",{page:f})),this},addOverlay:function(f,C,k,H){var I;if(t.isPlainObject(f)?I=f:I={element:f,location:C,placement:k,onDraw:H},f=t.getElement(I.element),l(this.currentOverlays,f)>=0)return this;var G=o(this,I);return this.currentOverlays.push(G),G.drawHTML(this.overlaysContainer,this.viewport),this.raiseEvent("add-overlay",{element:f,location:I.location,placement:I.placement}),this},updateOverlay:function(f,C,k){var H;return f=t.getElement(f),H=l(this.currentOverlays,f),H>=0&&(this.currentOverlays[H].update(C,k),n[this.hash].forceRedraw=!0,this.raiseEvent("update-overlay",{element:f,location:C,placement:k})),this},removeOverlay:function(f){var C;return f=t.getElement(f),C=l(this.currentOverlays,f),C>=0&&(this.currentOverlays[C].destroy(),this.currentOverlays.splice(C,1),n[this.hash].forceRedraw=!0,this.raiseEvent("remove-overlay",{element:f})),this},clearOverlays:function(){for(;this.currentOverlays.length>0;)this.currentOverlays.pop().destroy();return n[this.hash].forceRedraw=!0,this.raiseEvent("clear-overlay",{}),this},getOverlayById:function(f){var C;return f=t.getElement(f),C=l(this.currentOverlays,f),C>=0?this.currentOverlays[C]:null},_updateSequenceButtons:function(f){this.nextButton&&(!this.tileSources||this.tileSources.length-1===f?this.navPrevNextWrap||this.nextButton.disable():this.nextButton.enable()),this.previousButton&&(f>0?this.previousButton.enable():this.navPrevNextWrap||this.previousButton.disable())},_showMessage:function(f){this._hideMessage();var C=t.makeNeutralElement("div");C.appendChild(document.createTextNode(f)),this.messageDiv=t.makeCenteredNode(C),t.addClass(this.messageDiv,"openseadragon-message"),this.container.appendChild(this.messageDiv)},_hideMessage:function(){var f=this.messageDiv;f&&(f.parentNode.removeChild(f),delete this.messageDiv)},gestureSettingsByDeviceType:function(f){switch(f){case"mouse":return this.gestureSettingsMouse;case"touch":return this.gestureSettingsTouch;case"pen":return this.gestureSettingsPen;default:return this.gestureSettingsUnknown}},_drawOverlays:function(){var f,C=this.currentOverlays.length;for(f=0;f<C;f++)this.currentOverlays[f].drawHTML(this.overlaysContainer,this.viewport)},_cancelPendingImages:function(){this._loadQueue=[]},removeReferenceStrip:function(){this.showReferenceStrip=!1,this.referenceStrip&&(this.referenceStrip.destroy(),this.referenceStrip=null)},addReferenceStrip:function(){if(this.showReferenceStrip=!0,this.sequenceMode){if(this.referenceStrip)return;this.tileSources.length&&this.tileSources.length>1&&(this.referenceStrip=new t.ReferenceStrip({id:this.referenceStripElement,position:this.referenceStripPosition,sizeRatio:this.referenceStripSizeRatio,scroll:this.referenceStripScroll,height:this.referenceStripHeight,width:this.referenceStripWidth,tileSources:this.tileSources,prefixUrl:this.prefixUrl,useCanvas:this.useCanvas,viewer:this}),this.referenceStrip.setFocus(this._sequenceIndex))}else t.console.warn('Attempting to display a reference strip while "sequenceMode" is off.')},_addUpdatePixelDensityRatioEvent:function(){this._updatePixelDensityRatioBind=this._updatePixelDensityRatio.bind(this),t.addEvent(window,"resize",this._updatePixelDensityRatioBind)},_removeUpdatePixelDensityRatioEvent:function(){t.removeEvent(window,"resize",this._updatePixelDensityRatioBind)},_updatePixelDensityRatio:function(){var f=t.pixelDensityRatio,C=t.getCurrentPixelDensityRatio();f!==C&&(t.pixelDensityRatio=C,this.world.resetItems(),this.forceRedraw())},goToPreviousPage:function(){var f=this._sequenceIndex-1;this.navPrevNextWrap&&f<0&&(f+=this.tileSources.length),this.goToPage(f)},goToNextPage:function(){var f=this._sequenceIndex+1;this.navPrevNextWrap&&f>=this.tileSources.length&&(f=0),this.goToPage(f)},isAnimating:function(){return n[this.hash].animating}});function s(f){return f=t.getElement(f),new t.Point(f.clientWidth===0?1:f.clientWidth,f.clientHeight===0?1:f.clientHeight)}function a(f,C,k,H,I){var G=f;if(t.type(C)==="string"){if(C.match(/^\s*<.*>\s*$/))C=t.parseXml(C);else if(C.match(/^\s*[{[].*[}\]]\s*$/))try{var j=t.parseJSON(C);C=j}catch{}}function oe(he,pe){he.ready?H(he):(he.addHandler("ready",function(){H(he)}),he.addHandler("open-failed",function(Y){I({message:Y.message,source:pe})}))}setTimeout(function(){if(t.type(C)==="string")C=new t.TileSource({url:C,crossOriginPolicy:k.crossOriginPolicy!==void 0?k.crossOriginPolicy:f.crossOriginPolicy,ajaxWithCredentials:f.ajaxWithCredentials,ajaxHeaders:k.ajaxHeaders?k.ajaxHeaders:f.ajaxHeaders,splitHashDataForPost:f.splitHashDataForPost,useCanvas:f.useCanvas,success:function(Ee){H(Ee.tileSource)}}),C.addHandler("open-failed",function(Ee){I(Ee)});else if(t.isPlainObject(C)||C.nodeType)if(C.crossOriginPolicy===void 0&&(k.crossOriginPolicy!==void 0||f.crossOriginPolicy!==void 0)&&(C.crossOriginPolicy=k.crossOriginPolicy!==void 0?k.crossOriginPolicy:f.crossOriginPolicy),C.ajaxWithCredentials===void 0&&(C.ajaxWithCredentials=f.ajaxWithCredentials),C.useCanvas===void 0&&(C.useCanvas=f.useCanvas),t.isFunction(C.getTileUrl)){var he=new t.TileSource(C);he.getTileUrl=C.getTileUrl,H(he)}else{var pe=t.TileSource.determineType(G,C);if(!pe){I({message:"Unable to load TileSource",source:C});return}var Y=pe.prototype.configure.apply(G,[C]);oe(new pe(Y),C)}else oe(C,C)})}function o(f,C){if(C instanceof t.Overlay)return C;var k=null;if(C.element)k=t.getElement(C.element);else{var H=C.id?C.id:"openseadragon-overlay-"+Math.floor(Math.random()*1e7);k=t.getElement(C.id),k||(k=document.createElement("a"),k.href="#/overlay/"+H),k.id=H,t.addClass(k,C.className?C.className:"openseadragon-overlay")}var I=C.location,G=C.width,j=C.height;if(!I){var oe=C.x,he=C.y;if(C.px!==void 0){var pe=f.viewport.imageToViewportRectangle(new t.Rect(C.px,C.py,G||0,j||0));oe=pe.x,he=pe.y,G=G!==void 0?pe.width:void 0,j=j!==void 0?pe.height:void 0}I=new t.Point(oe,he)}var Y=C.placement;return Y&&t.type(Y)==="string"&&(Y=t.Placement[C.placement.toUpperCase()]),new t.Overlay({element:k,location:I,placement:Y,onDraw:C.onDraw,checkResize:C.checkResize,width:G,height:j,rotationMode:C.rotationMode})}function l(f,C){var k;for(k=f.length-1;k>=0;k--)if(f[k].element===C)return k;return-1}function u(f,C){return t.requestAnimationFrame(function(){C(f)})}function c(f){t.requestAnimationFrame(function(){d(f)})}function h(f){f.autoHideControls&&(f.controlsShouldFade=!0,f.controlsFadeBeginTime=t.now()+f.controlsFadeDelay,window.setTimeout(function(){c(f)},f.controlsFadeDelay))}function d(f){var C,k,H,I;if(f.controlsShouldFade){for(C=t.now(),k=C-f.controlsFadeBeginTime,H=1-k/f.controlsFadeLength,H=Math.min(1,H),H=Math.max(0,H),I=f.controls.length-1;I>=0;I--)f.controls[I].autoFade&&f.controls[I].setOpacity(H);H>0&&c(f)}}function w(f){var C;for(f.controlsShouldFade=!1,C=f.controls.length-1;C>=0;C--)f.controls[C].setOpacity(1)}function v(){w(this)}function T(){h(this)}function x(f){var C={tracker:f.eventSource,position:f.position,originalEvent:f.originalEvent,preventDefault:f.preventDefault};this.raiseEvent("canvas-contextmenu",C),f.preventDefault=C.preventDefault}function m(f){var C={originalEvent:f.originalEvent,preventDefaultAction:!1,preventVerticalPan:f.preventVerticalPan||!this.panVertical,preventHorizontalPan:f.preventHorizontalPan||!this.panHorizontal};if(this.raiseEvent("canvas-key",C),!C.preventDefaultAction&&!f.ctrl&&!f.alt&&!f.meta)switch(f.keyCode){case 38:C.preventVerticalPan||(f.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,-this.pixelsPerArrowPress))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 40:C.preventVerticalPan||(f.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,this.pixelsPerArrowPress))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 37:C.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(-this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 39:C.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(this.pixelsPerArrowPress,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 187:this.viewport.zoomBy(1.1),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 189:this.viewport.zoomBy(.9),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 48:this.viewport.goHome(),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 87:C.preventVerticalPan||(f.shift?this.viewport.zoomBy(1.1):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,-40))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 83:C.preventVerticalPan||(f.shift?this.viewport.zoomBy(.9):this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(0,40))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 65:C.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(-40,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 68:C.preventHorizontalPan||(this.viewport.panBy(this.viewport.deltaPointsFromPixels(new t.Point(40,0))),this.viewport.applyConstraints()),f.preventDefault=!0;break;case 82:f.shift?this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.flipped?this.viewport.setRotation(this.viewport.getRotation()-this.rotationIncrement):this.viewport.setRotation(this.viewport.getRotation()+this.rotationIncrement),this.viewport.applyConstraints(),f.preventDefault=!0;break;case 70:this.viewport.toggleFlip(),f.preventDefault=!0;break;case 74:this.goToPreviousPage();break;case 75:this.goToNextPage();break;default:f.preventDefault=!1;break}else f.preventDefault=!1}function y(f){var C={originalEvent:f.originalEvent};this.raiseEvent("canvas-key-press",C)}function S(f){var C,k=document.activeElement===this.canvas;k||this.canvas.focus(),this.viewport.flipped&&(f.position.x=this.viewport.getContainerSize().x-f.position.x);var H={tracker:f.eventSource,position:f.position,quick:f.quick,shift:f.shift,originalEvent:f.originalEvent,originalTarget:f.originalTarget,preventDefaultAction:!1};this.raiseEvent("canvas-click",H),!H.preventDefaultAction&&this.viewport&&f.quick&&(C=this.gestureSettingsByDeviceType(f.pointerType),C.clickToZoom===!0&&(this.viewport.zoomBy(f.shift?1/this.zoomPerClick:this.zoomPerClick,C.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints()),C.dblClickDragToZoom&&(n[this.hash].draggingToZoom===!0?(n[this.hash].lastClickTime=null,n[this.hash].draggingToZoom=!1):n[this.hash].lastClickTime=t.now()))}function _(f){var C,k={tracker:f.eventSource,position:f.position,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};this.raiseEvent("canvas-double-click",k),!k.preventDefaultAction&&this.viewport&&(C=this.gestureSettingsByDeviceType(f.pointerType),C.dblClickToZoom&&(this.viewport.zoomBy(f.shift?1/this.zoomPerClick:this.zoomPerClick,C.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints()))}function b(f){var C,k={tracker:f.eventSource,pointerType:f.pointerType,position:f.position,delta:f.delta,speed:f.speed,direction:f.direction,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag",k),C=this.gestureSettingsByDeviceType(f.pointerType),!k.preventDefaultAction&&this.viewport){if(C.dblClickDragToZoom&&n[this.hash].draggingToZoom){var H=Math.pow(this.zoomPerDblClickDrag,f.delta.y/50);this.viewport.zoomBy(H)}else if(C.dragToPan&&!n[this.hash].draggingToZoom){if(this.panHorizontal||(f.delta.x=0),this.panVertical||(f.delta.y=0),this.viewport.flipped&&(f.delta.x=-f.delta.x),this.constrainDuringPan){var I=this.viewport.deltaPointsFromPixels(f.delta.negate());this.viewport.centerSpringX.target.value+=I.x,this.viewport.centerSpringY.target.value+=I.y;var G=this.viewport.getConstrainedBounds();this.viewport.centerSpringX.target.value-=I.x,this.viewport.centerSpringY.target.value-=I.y,G.xConstrained&&(f.delta.x=0),G.yConstrained&&(f.delta.y=0)}this.viewport.panBy(this.viewport.deltaPointsFromPixels(f.delta.negate()),C.flickEnabled&&!this.constrainDuringPan)}}}function O(f){var C,k={tracker:f.eventSource,pointerType:f.pointerType,position:f.position,speed:f.speed,direction:f.direction,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1};if(this.raiseEvent("canvas-drag-end",k),C=this.gestureSettingsByDeviceType(f.pointerType),!k.preventDefaultAction&&this.viewport){if(!n[this.hash].draggingToZoom&&C.flickEnabled&&f.speed>=C.flickMinSpeed){var H=0;this.panHorizontal&&(H=C.flickMomentum*f.speed*Math.cos(f.direction));var I=0;this.panVertical&&(I=C.flickMomentum*f.speed*Math.sin(f.direction));var G=this.viewport.pixelFromPoint(this.viewport.getCenter(!0)),j=this.viewport.pointFromPixel(new t.Point(G.x-H,G.y-I));this.viewport.panTo(j,!1)}this.viewport.applyConstraints()}C.dblClickDragToZoom&&n[this.hash].draggingToZoom===!0&&(n[this.hash].draggingToZoom=!1)}function z(f){this.raiseEvent("canvas-enter",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function M(f){this.raiseEvent("canvas-exit",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function U(f){var C;if(this.raiseEvent("canvas-press",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElementReleased,originalEvent:f.originalEvent}),C=this.gestureSettingsByDeviceType(f.pointerType),C.dblClickDragToZoom){var k=n[this.hash].lastClickTime,H=t.now();if(k===null)return;H-k<this.dblClickTimeThreshold&&(n[this.hash].draggingToZoom=!0),n[this.hash].lastClickTime=null}}function W(f){this.raiseEvent("canvas-release",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,insideElementPressed:f.insideElementPressed,insideElementReleased:f.insideElementReleased,originalEvent:f.originalEvent})}function te(f){this.raiseEvent("canvas-nonprimary-press",{tracker:f.eventSource,position:f.position,pointerType:f.pointerType,button:f.button,buttons:f.buttons,originalEvent:f.originalEvent})}function ne(f){this.raiseEvent("canvas-nonprimary-release",{tracker:f.eventSource,position:f.position,pointerType:f.pointerType,button:f.button,buttons:f.buttons,originalEvent:f.originalEvent})}function de(f){var C,k,H,I,G={tracker:f.eventSource,pointerType:f.pointerType,gesturePoints:f.gesturePoints,lastCenter:f.lastCenter,center:f.center,lastDistance:f.lastDistance,distance:f.distance,shift:f.shift,originalEvent:f.originalEvent,preventDefaultPanAction:!1,preventDefaultZoomAction:!1,preventDefaultRotateAction:!1};if(this.raiseEvent("canvas-pinch",G),this.viewport&&(C=this.gestureSettingsByDeviceType(f.pointerType),C.pinchToZoom&&(!G.preventDefaultPanAction||!G.preventDefaultZoomAction)&&(k=this.viewport.pointFromPixel(f.center,!0),C.zoomToRefPoint&&!G.preventDefaultPanAction&&(H=this.viewport.pointFromPixel(f.lastCenter,!0),I=H.minus(k),this.panHorizontal||(I.x=0),this.panVertical||(I.y=0),this.viewport.panBy(I,!0)),G.preventDefaultZoomAction||this.viewport.zoomBy(f.distance/f.lastDistance,k,!0),this.viewport.applyConstraints()),C.pinchRotate&&!G.preventDefaultRotateAction)){var j=Math.atan2(f.gesturePoints[0].currentPos.y-f.gesturePoints[1].currentPos.y,f.gesturePoints[0].currentPos.x-f.gesturePoints[1].currentPos.x),oe=Math.atan2(f.gesturePoints[0].lastPos.y-f.gesturePoints[1].lastPos.y,f.gesturePoints[0].lastPos.x-f.gesturePoints[1].lastPos.x);k=this.viewport.pointFromPixel(f.center,!0),this.viewport.rotateTo(this.viewport.getRotation(!0)+(j-oe)*(180/Math.PI),k,!0)}}function Te(f){this.raiseEvent("canvas-focus",{tracker:f.eventSource,originalEvent:f.originalEvent})}function st(f){this.raiseEvent("canvas-blur",{tracker:f.eventSource,originalEvent:f.originalEvent})}function ce(f){var C,k,H,I,G;I=t.now(),G=I-this._lastScrollTime,G>this.minScrollDeltaTime?(this._lastScrollTime=I,C={tracker:f.eventSource,position:f.position,scroll:f.scroll,shift:f.shift,originalEvent:f.originalEvent,preventDefaultAction:!1,preventDefault:!0},this.raiseEvent("canvas-scroll",C),!C.preventDefaultAction&&this.viewport&&(this.viewport.flipped&&(f.position.x=this.viewport.getContainerSize().x-f.position.x),k=this.gestureSettingsByDeviceType(f.pointerType),k.scrollToZoom&&(H=Math.pow(this.zoomPerScroll,f.scroll),this.viewport.zoomBy(H,k.zoomToRefPoint?this.viewport.pointFromPixel(f.position,!0):null),this.viewport.applyConstraints())),f.preventDefault=C.preventDefault):f.preventDefault=!0}function ke(f){n[this.hash].mouseInside=!0,w(this),this.raiseEvent("container-enter",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function L(f){f.pointers<1&&(n[this.hash].mouseInside=!1,n[this.hash].animating||h(this)),this.raiseEvent("container-exit",{tracker:f.eventSource,pointerType:f.pointerType,position:f.position,buttons:f.buttons,pointers:f.pointers,insideElementPressed:f.insideElementPressed,buttonDownAny:f.buttonDownAny,originalEvent:f.originalEvent})}function V(f){$(f),f.isOpen()?f._updateRequestId=u(f,V):f._updateRequestId=!1}function q(f,C){var k=f.viewport,H=k.getZoom(),I=k.getCenter();k.resize(C,f.preserveImageSizeOnResize),k.panTo(I,!0);var G;if(f.preserveImageSizeOnResize)G=n[f.hash].prevContainerSize.x/C.x;else{var j=new t.Point(0,0),oe=new t.Point(n[f.hash].prevContainerSize.x,n[f.hash].prevContainerSize.y).distanceTo(j),he=new t.Point(C.x,C.y).distanceTo(j);G=he/oe*n[f.hash].prevContainerSize.x/C.x}k.zoomTo(H*G,null,!0),n[f.hash].prevContainerSize=C,n[f.hash].forceRedraw=!0,n[f.hash].needsResize=!1,n[f.hash].forceResize=!1}function $(f){if(!(f._opening||!n[f.hash])){if(f.autoResize||n[f.hash].forceResize){var C;if(f._autoResizePolling){C=s(f.container);var k=n[f.hash].prevContainerSize;C.equals(k)||(n[f.hash].needsResize=!0)}n[f.hash].needsResize&&q(f,C||s(f.container))}var H=f.viewport.update(),I=f.world.update()||H;H&&f.raiseEvent("viewport-change"),f.referenceStrip&&(I=f.referenceStrip.update(f.viewport)||I);var G=n[f.hash].animating;!G&&I&&(f.raiseEvent("animation-start"),w(f));var j=G&&!I;j&&(n[f.hash].animating=!1),(I||j||n[f.hash].forceRedraw||f.world.needsDraw())&&(re(f),f._drawOverlays(),f.navigator&&f.navigator.update(f.viewport),n[f.hash].forceRedraw=!1,I&&f.raiseEvent("animation")),j&&(f.raiseEvent("animation-finish"),n[f.hash].mouseInside||h(f)),n[f.hash].animating=I}}function re(f){f.imageLoader.clear(),f.drawer.clear(),f.world.draw(),f.raiseEvent("update-viewport",{})}function K(f,C){return f?f+C:C}function Oe(){n[this.hash].lastZoomTime=t.now(),n[this.hash].zoomFactor=this.zoomPerSecond,n[this.hash].zooming=!0,pt(this)}function ft(){n[this.hash].lastZoomTime=t.now(),n[this.hash].zoomFactor=1/this.zoomPerSecond,n[this.hash].zooming=!0,pt(this)}function ot(){n[this.hash].zooming=!1}function pt(f){t.requestAnimationFrame(t.delegate(f,$n))}function $n(){var f,C,k;n[this.hash].zooming&&this.viewport&&(f=t.now(),C=f-n[this.hash].lastZoomTime,k=Math.pow(n[this.hash].zoomFactor,C/1e3),this.viewport.zoomBy(k),this.viewport.applyConstraints(),n[this.hash].lastZoomTime=f,pt(this))}function ks(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(this.zoomPerClick/1),this.viewport.applyConstraints())}function er(){this.viewport&&(n[this.hash].zooming=!1,this.viewport.zoomBy(1/this.zoomPerClick),this.viewport.applyConstraints())}function tr(){this.buttonGroup&&(this.buttonGroup.emulateEnter(),this.buttonGroup.emulateLeave())}function Ns(){this.viewport&&this.viewport.goHome()}function ir(){this.isFullPage()&&!t.isFullScreen()?this.setFullPage(!1):this.setFullScreen(!this.isFullPage()),this.buttonGroup&&this.buttonGroup.emulateLeave(),this.fullPageButton.element.focus(),this.viewport&&this.viewport.applyConstraints()}function Ds(){if(this.viewport){var f=this.viewport.getRotation();this.viewport.flipped?f+=this.rotationIncrement:f-=this.rotationIncrement,this.viewport.setRotation(f)}}function rn(){if(this.viewport){var f=this.viewport.getRotation();this.viewport.flipped?f-=this.rotationIncrement:f+=this.rotationIncrement,this.viewport.setRotation(f)}}function Ei(){this.viewport.toggleFlip()}}(i),function(t){t.Navigator=function(u){var c=u.viewer,h=this,d,w;u.element||u.id?(u.element?(u.id&&t.console.warn("Given option.id for Navigator was ignored since option.element was provided and is being used instead."),u.element.id?u.id=u.element.id:u.id="navigator-"+t.now(),this.element=u.element):this.element=document.getElementById(u.id),u.controlOptions={anchor:t.ControlAnchor.NONE,attachToViewer:!1,autoFade:!1}):(u.id="navigator-"+t.now(),this.element=t.makeNeutralElement("div"),u.controlOptions={anchor:t.ControlAnchor.TOP_RIGHT,attachToViewer:!0,autoFade:u.autoFade},u.position&&(u.position==="BOTTOM_RIGHT"?u.controlOptions.anchor=t.ControlAnchor.BOTTOM_RIGHT:u.position==="BOTTOM_LEFT"?u.controlOptions.anchor=t.ControlAnchor.BOTTOM_LEFT:u.position==="TOP_RIGHT"?u.controlOptions.anchor=t.ControlAnchor.TOP_RIGHT:u.position==="TOP_LEFT"?u.controlOptions.anchor=t.ControlAnchor.TOP_LEFT:u.position==="ABSOLUTE"&&(u.controlOptions.anchor=t.ControlAnchor.ABSOLUTE,u.controlOptions.top=u.top,u.controlOptions.left=u.left,u.controlOptions.height=u.height,u.controlOptions.width=u.width))),this.element.id=u.id,this.element.className+=" navigator",u=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.navigatorSizeRatio},u,{element:this.element,tabIndex:-1,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:u.animationTime,autoResize:!1,minZoomImageRatio:1,background:u.background,opacity:u.opacity,borderColor:u.borderColor,displayRegionColor:u.displayRegionColor}),u.minPixelRatio=this.minPixelRatio=c.minPixelRatio,t.setElementTouchActionNone(this.element),this.borderWidth=2,this.fudge=new t.Point(1,1),this.totalBorderWidths=new t.Point(this.borderWidth*2,this.borderWidth*2).minus(this.fudge),u.controlOptions.anchor!==t.ControlAnchor.NONE&&function(x,m){x.margin="0px",x.border=m+"px solid "+u.borderColor,x.padding="0px",x.background=u.background,x.opacity=u.opacity,x.overflow="hidden"}(this.element.style,this.borderWidth),this.displayRegion=t.makeNeutralElement("div"),this.displayRegion.id=this.element.id+"-displayregion",this.displayRegion.className="displayregion",function(x,m){x.position="relative",x.top="0px",x.left="0px",x.fontSize="0px",x.overflow="hidden",x.border=m+"px solid "+u.displayRegionColor,x.margin="0px",x.padding="0px",x.background="transparent",x.float="left",x.cssFloat="left",x.styleFloat="left",x.zIndex=999999999,x.cursor="default",x.boxSizing="content-box"}(this.displayRegion.style,this.borderWidth),t.setElementPointerEventsNone(this.displayRegion),t.setElementTouchActionNone(this.displayRegion),this.displayRegionContainer=t.makeNeutralElement("div"),this.displayRegionContainer.id=this.element.id+"-displayregioncontainer",this.displayRegionContainer.className="displayregioncontainer",this.displayRegionContainer.style.width="100%",this.displayRegionContainer.style.height="100%",t.setElementPointerEventsNone(this.displayRegionContainer),t.setElementTouchActionNone(this.displayRegionContainer),c.addControl(this.element,u.controlOptions),this._resizeWithViewer=u.controlOptions.anchor!==t.ControlAnchor.ABSOLUTE&&u.controlOptions.anchor!==t.ControlAnchor.NONE,u.width&&u.height?(this.setWidth(u.width),this.setHeight(u.height)):this._resizeWithViewer&&(d=t.getElementSize(c.element),this.element.style.height=Math.round(d.y*u.sizeRatio)+"px",this.element.style.width=Math.round(d.x*u.sizeRatio)+"px",this.oldViewerSize=d,w=t.getElementSize(this.element),this.elementArea=w.x*w.y),this.oldContainerSize=new t.Point(0,0),t.Viewer.apply(this,[u]),this.displayRegionContainer.appendChild(this.displayRegion),this.element.getElementsByTagName("div")[0].appendChild(this.displayRegionContainer);function v(x,m){o(h.displayRegionContainer,x),o(h.displayRegion,-x),h.viewport.setRotation(x,m)}if(u.navigatorRotate){var T=u.viewer.viewport?u.viewer.viewport.getRotation():u.viewer.degrees||0;v(T,!0),u.viewer.addHandler("rotate",function(x){v(x.degrees,x.immediately)})}this.innerTracker.destroy(),this.innerTracker=new t.MouseTracker({userData:"Navigator.innerTracker",element:this.element,dragHandler:t.delegate(this,r),clickHandler:t.delegate(this,n),releaseHandler:t.delegate(this,s),scrollHandler:t.delegate(this,a),preProcessEventHandler:function(x){x.eventType==="wheel"&&(x.preventDefault=!0)}}),this.outerTracker.userData="Navigator.outerTracker",t.setElementPointerEventsNone(this.canvas),t.setElementPointerEventsNone(this.container),this.addHandler("reset-size",function(){h.viewport&&h.viewport.goHome(!0)}),c.world.addHandler("item-index-change",function(x){window.setTimeout(function(){var m=h.world.getItemAt(x.previousIndex);h.world.setItemIndex(m,x.newIndex)},1)}),c.world.addHandler("remove-item",function(x){var m=x.item,y=h._getMatchingItem(m);y&&h.world.removeItem(y)}),this.update(c.viewport)},t.extend(t.Navigator.prototype,t.EventSource.prototype,t.Viewer.prototype,{updateSize:function(){if(this.viewport){var u=new t.Point(this.container.clientWidth===0?1:this.container.clientWidth,this.container.clientHeight===0?1:this.container.clientHeight);u.equals(this.oldContainerSize)||(this.viewport.resize(u,!0),this.viewport.goHome(!0),this.oldContainerSize=u,this.drawer.clear(),this.world.draw())}},setWidth:function(u){this.width=u,this.element.style.width=typeof u=="number"?u+"px":u,this._resizeWithViewer=!1,this.updateSize()},setHeight:function(u){this.height=u,this.element.style.height=typeof u=="number"?u+"px":u,this._resizeWithViewer=!1,this.updateSize()},setFlip:function(u){return this.viewport.setFlip(u),this.setDisplayTransform(this.viewer.viewport.getFlip()?"scale(-1,1)":"scale(1,1)"),this},setDisplayTransform:function(u){l(this.displayRegion,u),l(this.canvas,u),l(this.element,u)},update:function(u){var c,h,d,w,v,T;if(c=t.getElementSize(this.viewer.element),this._resizeWithViewer&&c.x&&c.y&&!c.equals(this.oldViewerSize)&&(this.oldViewerSize=c,this.maintainSizeRatio||!this.elementArea?(h=c.x*this.sizeRatio,d=c.y*this.sizeRatio):(h=Math.sqrt(this.elementArea*(c.x/c.y)),d=this.elementArea/h),this.element.style.width=Math.round(h)+"px",this.element.style.height=Math.round(d)+"px",this.elementArea||(this.elementArea=h*d),this.updateSize()),u&&this.viewport){if(w=u.getBoundsNoRotate(!0),v=this.viewport.pixelFromPointNoRotate(w.getTopLeft(),!1),T=this.viewport.pixelFromPointNoRotate(w.getBottomRight(),!1).minus(this.totalBorderWidths),!this.navigatorRotate){var x=u.getRotation(!0);o(this.displayRegion,-x)}var m=this.displayRegion.style;m.display=this.world.getItemCount()?"block":"none",m.top=v.y.toFixed(2)+"px",m.left=v.x.toFixed(2)+"px";var y=T.x-v.x,S=T.y-v.y;m.width=Math.round(Math.max(y,0))+"px",m.height=Math.round(Math.max(S,0))+"px"}},addTiledImage:function(u){var c=this,h=u.originalTiledImage;delete u.original;var d=t.extend({},u,{success:function(w){var v=w.item;v._originalForNavigator=h,c._matchBounds(v,h,!0),c._matchOpacity(v,h),c._matchCompositeOperation(v,h);function T(){c._matchBounds(v,h)}function x(){c._matchOpacity(v,h)}function m(){c._matchCompositeOperation(v,h)}h.addHandler("bounds-change",T),h.addHandler("clip-change",T),h.addHandler("opacity-change",x),h.addHandler("composite-operation-change",m)}});return t.Viewer.prototype.addTiledImage.apply(this,[d])},destroy:function(){return t.Viewer.prototype.destroy.apply(this)},_getMatchingItem:function(u){for(var c=this.world.getItemCount(),h,d=0;d<c;d++)if(h=this.world.getItemAt(d),h._originalForNavigator===u)return h;return null},_matchBounds:function(u,c,h){var d=c.getBoundsNoRotate();u.setPosition(d.getTopLeft(),h),u.setWidth(d.width,h),u.setRotation(c.getRotation(),h),u.setClip(c.getClip()),u.setFlip(c.getFlip())},_matchOpacity:function(u,c){u.setOpacity(c.opacity)},_matchCompositeOperation:function(u,c){u.setCompositeOperation(c.compositeOperation)}});function n(u){var c={tracker:u.eventSource,position:u.position,quick:u.quick,shift:u.shift,originalEvent:u.originalEvent,preventDefaultAction:!1};if(this.viewer.raiseEvent("navigator-click",c),!c.preventDefaultAction&&u.quick&&this.viewer.viewport&&(this.panVertical||this.panHorizontal)){this.viewer.viewport.flipped&&(u.position.x=this.viewport.getContainerSize().x-u.position.x);var h=this.viewport.pointFromPixel(u.position);this.panVertical?this.panHorizontal||(h.x=this.viewer.viewport.getCenter(!0).x):h.y=this.viewer.viewport.getCenter(!0).y,this.viewer.viewport.panTo(h),this.viewer.viewport.applyConstraints()}}function r(u){var c={tracker:u.eventSource,position:u.position,delta:u.delta,speed:u.speed,direction:u.direction,shift:u.shift,originalEvent:u.originalEvent,preventDefaultAction:!1};this.viewer.raiseEvent("navigator-drag",c),!c.preventDefaultAction&&this.viewer.viewport&&(this.panHorizontal||(u.delta.x=0),this.panVertical||(u.delta.y=0),this.viewer.viewport.flipped&&(u.delta.x=-u.delta.x),this.viewer.viewport.panBy(this.viewport.deltaPointsFromPixels(u.delta)),this.viewer.constrainDuringPan&&this.viewer.viewport.applyConstraints())}function s(u){u.insideElementPressed&&this.viewer.viewport&&this.viewer.viewport.applyConstraints()}function a(u){var c={tracker:u.eventSource,position:u.position,scroll:u.scroll,shift:u.shift,originalEvent:u.originalEvent,preventDefault:u.preventDefault};this.viewer.raiseEvent("navigator-scroll",c),u.preventDefault=c.preventDefault}function o(u,c){l(u,"rotate("+c+"deg)")}function l(u,c){u.style.webkitTransform=c,u.style.mozTransform=c,u.style.msTransform=c,u.style.oTransform=c,u.style.transform=c}}(i),function(t){var n={Errors:{Dzc:"Sorry, we don't support Deep Zoom Collections!",Dzi:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",Xml:"Hmm, this doesn't appear to be a valid Deep Zoom Image.",ImageFormat:"Sorry, we don't support {0}-based Deep Zoom Images.",Security:"It looks like a security restriction stopped us from loading this Deep Zoom Image.",Status:"This space unintentionally left blank ({0} {1}).",OpenFailed:"Unable to open {0}: {1}"},Tooltips:{FullPage:"Toggle full page",Home:"Go home",ZoomIn:"Zoom in",ZoomOut:"Zoom out",NextPage:"Next page",PreviousPage:"Previous page",RotateLeft:"Rotate left",RotateRight:"Rotate right",Flip:"Flip Horizontally"}};t.extend(t,{getString:function(r){var s=r.split("."),a=null,o=arguments,l=n,u;for(u=0;u<s.length-1;u++)l=l[s[u]]||{};return a=l[s[u]],typeof a!="string"&&(t.console.error("Untranslated source string:",r),a=""),a.replace(/\{\d+\}/g,function(c){var h=parseInt(c.match(/\d+/),10)+1;return h<o.length?o[h]:""})},setString:function(r,s){var a=r.split("."),o=n,l;for(l=0;l<a.length-1;l++)o[a[l]]||(o[a[l]]={}),o=o[a[l]];o[a[l]]=s}})}(i),function(t){t.Point=function(n,r){this.x=typeof n=="number"?n:0,this.y=typeof r=="number"?r:0},t.Point.prototype={clone:function(){return new t.Point(this.x,this.y)},plus:function(n){return new t.Point(this.x+n.x,this.y+n.y)},minus:function(n){return new t.Point(this.x-n.x,this.y-n.y)},times:function(n){return new t.Point(this.x*n,this.y*n)},divide:function(n){return new t.Point(this.x/n,this.y/n)},negate:function(){return new t.Point(-this.x,-this.y)},distanceTo:function(n){return Math.sqrt(Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2))},squaredDistanceTo:function(n){return Math.pow(this.x-n.x,2)+Math.pow(this.y-n.y,2)},apply:function(n){return new t.Point(n(this.x),n(this.y))},equals:function(n){return n instanceof t.Point&&this.x===n.x&&this.y===n.y},rotate:function(n,r){r=r||new t.Point(0,0);var s,a;if(n%90===0){var o=t.positiveModulo(n,360);switch(o){case 0:s=1,a=0;break;case 90:s=0,a=1;break;case 180:s=-1,a=0;break;case 270:s=0,a=-1;break}}else{var l=n*Math.PI/180;s=Math.cos(l),a=Math.sin(l)}var u=s*(this.x-r.x)-a*(this.y-r.y)+r.x,c=a*(this.x-r.x)+s*(this.y-r.y)+r.y;return new t.Point(u,c)},toString:function(){return"("+Math.round(this.x*100)/100+","+Math.round(this.y*100)/100+")"}}}(i),function(t){t.TileSource=function(r,s,a,o,l,u){var c=this,h=arguments,d,w;if(t.isPlainObject(r)?d=r:d={width:h[0],height:h[1],tileSize:h[2],tileOverlap:h[3],minLevel:h[4],maxLevel:h[5]},t.EventSource.call(this),t.extend(!0,this,d),!this.success){for(w=0;w<arguments.length;w++)if(t.isFunction(arguments[w])){this.success=arguments[w];break}}this.success&&this.addHandler("ready",function(v){c.success(v)}),t.type(arguments[0])==="string"&&(this.url=arguments[0]),this.url?(this.aspectRatio=1,this.dimensions=new t.Point(10,10),this._tileWidth=0,this._tileHeight=0,this.tileOverlap=0,this.minLevel=0,this.maxLevel=0,this.ready=!1,this.getImageInfo(this.url)):(this.ready=!0,this.aspectRatio=d.width&&d.height?d.width/d.height:1,this.dimensions=new t.Point(d.width,d.height),this.tileSize?(this._tileWidth=this._tileHeight=this.tileSize,delete this.tileSize):(this.tileWidth?(this._tileWidth=this.tileWidth,delete this.tileWidth):this._tileWidth=0,this.tileHeight?(this._tileHeight=this.tileHeight,delete this.tileHeight):this._tileHeight=0),this.tileOverlap=d.tileOverlap?d.tileOverlap:0,this.minLevel=d.minLevel?d.minLevel:0,this.maxLevel=d.maxLevel!==void 0&&d.maxLevel!==null?d.maxLevel:d.width&&d.height?Math.ceil(Math.log(Math.max(d.width,d.height))/Math.log(2)):0,this.success&&t.isFunction(this.success)&&this.success(this))},t.TileSource.prototype={getTileSize:function(r){return t.console.error("[TileSource.getTileSize] is deprecated. Use TileSource.getTileWidth() and TileSource.getTileHeight() instead"),this._tileWidth},getTileWidth:function(r){return this._tileWidth?this._tileWidth:this.getTileSize(r)},getTileHeight:function(r){return this._tileHeight?this._tileHeight:this.getTileSize(r)},setMaxLevel:function(r){this.maxLevel=r,this._memoizeLevelScale()},getLevelScale:function(r){return this._memoizeLevelScale(),this.getLevelScale(r)},_memoizeLevelScale:function(){var r={},s;for(s=0;s<=this.maxLevel;s++)r[s]=1/Math.pow(2,this.maxLevel-s);this.getLevelScale=function(a){return r[a]}},getNumTiles:function(r){var s=this.getLevelScale(r),a=Math.ceil(s*this.dimensions.x/this.getTileWidth(r)),o=Math.ceil(s*this.dimensions.y/this.getTileHeight(r));return new t.Point(a,o)},getPixelRatio:function(r){var s=this.dimensions.times(this.getLevelScale(r)),a=1/s.x*t.pixelDensityRatio,o=1/s.y*t.pixelDensityRatio;return new t.Point(a,o)},getClosestLevel:function(){var r,s;for(r=this.minLevel+1;r<=this.maxLevel&&(s=this.getNumTiles(r),!(s.x>1||s.y>1));r++);return r-1},getTileAtPoint:function(r,s){var a=s.x>=0&&s.x<=1&&s.y>=0&&s.y<=1/this.aspectRatio;t.console.assert(a,"[TileSource.getTileAtPoint] must be called with a valid point.");var o=this.dimensions.x*this.getLevelScale(r),l=s.x*o,u=s.y*o,c=Math.floor(l/this.getTileWidth(r)),h=Math.floor(u/this.getTileHeight(r));s.x>=1&&(c=this.getNumTiles(r).x-1);var d=1e-15;return s.y>=1/this.aspectRatio-d&&(h=this.getNumTiles(r).y-1),new t.Point(c,h)},getTileBounds:function(r,s,a,o){var l=this.dimensions.times(this.getLevelScale(r)),u=this.getTileWidth(r),c=this.getTileHeight(r),h=s===0?0:u*s-this.tileOverlap,d=a===0?0:c*a-this.tileOverlap,w=u+(s===0?1:2)*this.tileOverlap,v=c+(a===0?1:2)*this.tileOverlap,T=1/l.x;return w=Math.min(w,l.x-h),v=Math.min(v,l.y-d),o?new t.Rect(0,0,w,v):new t.Rect(h*T,d*T,w*T,v*T)},getImageInfo:function(r){var s=this,a,o,l,u,c,h,d;r&&(c=r.split("/"),h=c[c.length-1],d=h.lastIndexOf("."),d>-1&&(c[c.length-1]=h.slice(0,d)));var w=null;if(this.splitHashDataForPost){var v=r.indexOf("#");v!==-1&&(w=r.substring(v+1),r=r.substr(0,v))}o=function(T){typeof T=="string"&&(T=t.parseXml(T));var x=t.TileSource.determineType(s,T,r);if(!x){s.raiseEvent("open-failed",{message:"Unable to load TileSource",source:r});return}u=x.prototype.configure.apply(s,[T,r,w]),u.ajaxWithCredentials===void 0&&(u.ajaxWithCredentials=s.ajaxWithCredentials),l=new x(u),s.ready=!0,s.raiseEvent("ready",{tileSource:l})},r.match(/\.js$/)?(a=r.split("/").pop().replace(".js",""),t.jsonp({url:r,async:!1,callbackName:a,callback:o})):t.makeAjaxRequest({url:r,postData:w,withCredentials:this.ajaxWithCredentials,headers:this.ajaxHeaders,success:function(T){var x=n(T);o(x)},error:function(T,x){var m;try{m="HTTP "+T.status+" attempting to load TileSource: "+r}catch{var y;typeof x>"u"||!x.toString?y="Unknown error":y=x.toString(),m=y+" attempting to load TileSource: "+r}t.console.error(m),s.raiseEvent("open-failed",{message:m,source:r,postData:w})}})},supports:function(r,s){return!1},configure:function(r,s,a){throw new Error("Method not implemented.")},getTileUrl:function(r,s,a){throw new Error("Method not implemented.")},getTilePostData:function(r,s,a){return null},getTileAjaxHeaders:function(r,s,a){return{}},getTileHashKey:function(r,s,a,o,l,u){function c(h){return l?h+"+"+JSON.stringify(l):h}return c(typeof o!="string"?r+"/"+s+"_"+a:o)},tileExists:function(r,s,a){var o=this.getNumTiles(r);return r>=this.minLevel&&r<=this.maxLevel&&s>=0&&a>=0&&s<o.x&&a<o.y},hasTransparency:function(r,s,a,o){return!!r||s.match(".png")},downloadTileStart:function(r){var s=r.userData,a=new Image;s.image=a,s.request=null;var o=function(l){if(!a){r.finish(null,s.request,"Image load failed: undefined Image instance.");return}a.onload=a.onerror=a.onabort=null,r.finish(l?null:a,s.request,l)};a.onload=function(){o()},a.onabort=a.onerror=function(){o("Image load aborted.")},r.loadWithAjax?s.request=t.makeAjaxRequest({url:r.src,withCredentials:r.ajaxWithCredentials,headers:r.ajaxHeaders,responseType:"arraybuffer",postData:r.postData,success:function(l){var u;try{u=new window.Blob([l.response])}catch(d){var c=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(d.name==="TypeError"&&c){var h=new c;h.append(l.response),u=h.getBlob()}}u.size===0?o("Empty image response."):a.src=(window.URL||window.webkitURL).createObjectURL(u)},error:function(l){o("Image load aborted - XHR error")}}):(r.crossOriginPolicy!==!1&&(a.crossOrigin=r.crossOriginPolicy),a.src=r.src)},downloadTileAbort:function(r){r.userData.request&&r.userData.request.abort();var s=r.userData.image;r.userData.image&&(s.onload=s.onerror=s.onabort=null)},createTileCache:function(r,s,a){r._data=s},destroyTileCache:function(r){r._data=null,r._renderedContext=null},getTileCacheData:function(r){return r._data},getTileCacheDataAsImage:function(r){return r._data},getTileCacheDataAsContext2D:function(r){if(!r._renderedContext){var s=document.createElement("canvas");s.width=r._data.width,s.height=r._data.height,r._renderedContext=s.getContext("2d"),r._renderedContext.drawImage(r._data,0,0),r._data=null}return r._renderedContext}},t.extend(!0,t.TileSource.prototype,t.EventSource.prototype);function n(r){var s=r.responseText,a=r.status,o,l;if(r){if(r.status!==200&&r.status!==0)throw a=r.status,o=a===404?"Not Found":r.statusText,new Error(t.getString("Errors.Status",a,o))}else throw new Error(t.getString("Errors.Security"));if(s.match(/^\s*<.*/))try{l=r.responseXML&&r.responseXML.documentElement?r.responseXML:t.parseXml(s)}catch{l=r.responseText}else if(s.match(/\s*[{[].*/))try{l=t.parseJSON(s)}catch{l=s}else l=s;return l}t.TileSource.determineType=function(r,s,a){var o;for(o in i)if(o.match(/.+TileSource$/)&&t.isFunction(i[o])&&t.isFunction(i[o].prototype.supports)&&i[o].prototype.supports.call(r,s,a))return i[o];return t.console.error("No TileSource was able to open %s %s",a,s),null}}(i),function(t){t.DziTileSource=function(s,a,o,l,u,c,h,d,w){var v,T,x,m;if(t.isPlainObject(s)?m=s:m={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4],fileFormat:arguments[5],displayRects:arguments[6],minLevel:arguments[7],maxLevel:arguments[8]},this._levelRects={},this.tilesUrl=m.tilesUrl,this.fileFormat=m.fileFormat,this.displayRects=m.displayRects,this.displayRects)for(v=this.displayRects.length-1;v>=0;v--)for(T=this.displayRects[v],x=T.minLevel;x<=T.maxLevel;x++)this._levelRects[x]||(this._levelRects[x]=[]),this._levelRects[x].push(T);t.TileSource.apply(this,[m])},t.extend(t.DziTileSource.prototype,t.TileSource.prototype,{supports:function(s,a){var o;return s.Image?o=s.Image.xmlns:s.documentElement&&(s.documentElement.localName==="Image"||s.documentElement.tagName==="Image")&&(o=s.documentElement.namespaceURI),o=(o||"").toLowerCase(),o.indexOf("schemas.microsoft.com/deepzoom/2008")!==-1||o.indexOf("schemas.microsoft.com/deepzoom/2009")!==-1},configure:function(s,a,o){var l;return t.isPlainObject(s)?l=r(this,s):l=n(this,s),a&&!l.tilesUrl&&(l.tilesUrl=a.replace(/([^/]+?)(\.(dzi|xml|js)?(\?[^/]*)?)?\/?$/,"$1_files/"),a.search(/\.(dzi|xml|js)\?/)!==-1?l.queryParams=a.match(/\?.*/):l.queryParams=""),l},getTileUrl:function(s,a,o){return[this.tilesUrl,s,"/",a,"_",o,".",this.fileFormat,this.queryParams].join("")},tileExists:function(s,a,o){var l=this._levelRects[s],u,c,h,d,w,v,T;if(this.minLevel&&s<this.minLevel||this.maxLevel&&s>this.maxLevel)return!1;if(!l||!l.length)return!0;for(T=l.length-1;T>=0;T--)if(u=l[T],!(s<u.minLevel||s>u.maxLevel)&&(c=this.getLevelScale(s),h=u.x*c,d=u.y*c,w=h+u.width*c,v=d+u.height*c,h=Math.floor(h/this._tileWidth),d=Math.floor(d/this._tileWidth),w=Math.ceil(w/this._tileWidth),v=Math.ceil(v/this._tileWidth),h<=a&&a<w&&d<=o&&o<v))return!0;return!1}});function n(s,a){if(!a||!a.documentElement)throw new Error(t.getString("Errors.Xml"));var o=a.documentElement,l=o.localName||o.tagName,u=a.documentElement.namespaceURI,c=null,h=[],d,w,v,T,x;if(l==="Image")try{if(T=o.getElementsByTagName("Size")[0],T===void 0&&(T=o.getElementsByTagNameNS(u,"Size")[0]),c={Image:{xmlns:"http://schemas.microsoft.com/deepzoom/2008",Url:o.getAttribute("Url"),Format:o.getAttribute("Format"),DisplayRect:null,Overlap:parseInt(o.getAttribute("Overlap"),10),TileSize:parseInt(o.getAttribute("TileSize"),10),Size:{Height:parseInt(T.getAttribute("Height"),10),Width:parseInt(T.getAttribute("Width"),10)}}},!t.imageFormatSupported(c.Image.Format))throw new Error(t.getString("Errors.ImageFormat",c.Image.Format.toUpperCase()));for(d=o.getElementsByTagName("DisplayRect"),d===void 0&&(d=o.getElementsByTagNameNS(u,"DisplayRect")[0]),x=0;x<d.length;x++)w=d[x],v=w.getElementsByTagName("Rect")[0],v===void 0&&(v=w.getElementsByTagNameNS(u,"Rect")[0]),h.push({Rect:{X:parseInt(v.getAttribute("X"),10),Y:parseInt(v.getAttribute("Y"),10),Width:parseInt(v.getAttribute("Width"),10),Height:parseInt(v.getAttribute("Height"),10),MinLevel:parseInt(w.getAttribute("MinLevel"),10),MaxLevel:parseInt(w.getAttribute("MaxLevel"),10)}});return h.length&&(c.Image.DisplayRect=h),r(s,c)}catch(S){throw S instanceof Error?S:new Error(t.getString("Errors.Dzi"))}else{if(l==="Collection")throw new Error(t.getString("Errors.Dzc"));if(l==="Error"){var m=o.getElementsByTagName("Message")[0],y=m.firstChild.nodeValue;throw new Error(y)}}throw new Error(t.getString("Errors.Dzi"))}function r(s,a){var o=a.Image,l=o.Url,u=o.Format,c=o.Size,h=o.DisplayRect||[],d=parseInt(c.Width,10),w=parseInt(c.Height,10),v=parseInt(o.TileSize,10),T=parseInt(o.Overlap,10),x=[],m,y;for(y=0;y<h.length;y++)m=h[y].Rect,x.push(new t.DisplayRect(parseInt(m.X,10),parseInt(m.Y,10),parseInt(m.Width,10),parseInt(m.Height,10),parseInt(m.MinLevel,10),parseInt(m.MaxLevel,10)));return t.extend(!0,{width:d,height:w,tileSize:v,tileOverlap:T,minLevel:null,maxLevel:null,tilesUrl:l,fileFormat:u,displayRects:x},a)}}(i),function(t){t.IIIFTileSource=function(o){if(t.extend(!0,this,o),this._id=this["@id"]||this.id||this.identifier||null,!(this.height&&this.width&&this._id))throw new Error("IIIF required parameters (width, height, or id) not provided.");if(o.tileSizePerScaleFactor={},this.tileFormat=this.tileFormat||"jpg",this.version=o.version,this.tile_width&&this.tile_height)o.tileWidth=this.tile_width,o.tileHeight=this.tile_height;else if(this.tile_width)o.tileSize=this.tile_width;else if(this.tile_height)o.tileSize=this.tile_height;else if(this.tiles)if(this.tiles.length===1)o.tileWidth=this.tiles[0].width,o.tileHeight=this.tiles[0].height||this.tiles[0].width,this.scale_factors=this.tiles[0].scaleFactors;else{this.scale_factors=[];for(var l=0;l<this.tiles.length;l++)for(var u=0;u<this.tiles[l].scaleFactors.length;u++){var c=this.tiles[l].scaleFactors[u];this.scale_factors.push(c),o.tileSizePerScaleFactor[c]={width:this.tiles[l].width,height:this.tiles[l].height||this.tiles[l].width}}}else if(n(o)){for(var h=Math.min(this.height,this.width),d=[256,512,1024],w=[],v=0;v<d.length;v++)d[v]<=h&&w.push(d[v]);w.length>0?o.tileSize=Math.max.apply(null,w):o.tileSize=h}else this.sizes&&this.sizes.length>0?(this.emulateLegacyImagePyramid=!0,o.levels=r(this),t.extend(!0,o,{width:o.levels[o.levels.length-1].width,height:o.levels[o.levels.length-1].height,tileSize:Math.max(o.height,o.width),tileOverlap:0,minLevel:0,maxLevel:o.levels.length-1}),this.levels=o.levels):t.console.error("Nothing in the info.json to construct image pyramids from");if(!o.maxLevel&&!this.emulateLegacyImagePyramid)if(!this.scale_factors)o.maxLevel=Number(Math.round(Math.log(Math.max(this.width,this.height),2)));else{var T=Math.max.apply(null,this.scale_factors);o.maxLevel=Math.round(Math.log(T)*Math.LOG2E)}if(this.sizes){var x=this.sizes.length;(x===o.maxLevel||x===o.maxLevel+1)&&(this.levelSizes=this.sizes.slice().sort(function(m,y){return m.width-y.width}),x===o.maxLevel&&this.levelSizes.push({width:this.width,height:this.height}))}t.TileSource.apply(this,[o])},t.extend(t.IIIFTileSource.prototype,t.TileSource.prototype,{supports:function(o,l){return o.protocol&&o.protocol==="http://iiif.io/api/image"||o["@context"]&&(o["@context"]==="http://library.stanford.edu/iiif/image-api/1.1/context.json"||o["@context"]==="http://iiif.io/api/image/1/context.json")||o.profile&&o.profile.indexOf("http://library.stanford.edu/iiif/image-api/compliance.html")===0||o.identifier&&o.width&&o.height?!0:!!(o.documentElement&&o.documentElement.tagName==="info"&&o.documentElement.namespaceURI==="http://library.stanford.edu/iiif/image-api/ns/")},configure:function(o,l,u){if(t.isPlainObject(o)){if(!o["@context"])o["@context"]="http://iiif.io/api/image/1.0/context.json",o["@id"]=l.replace("/info.json",""),o.version=1;else{var h=o["@context"];if(Array.isArray(h)){for(var d=0;d<h.length;d++)if(typeof h[d]=="string"&&(/^http:\/\/iiif\.io\/api\/image\/[1-3]\/context\.json$/.test(h[d])||h[d]==="http://library.stanford.edu/iiif/image-api/1.1/context.json")){h=h[d];break}}switch(h){case"http://iiif.io/api/image/1/context.json":case"http://library.stanford.edu/iiif/image-api/1.1/context.json":o.version=1;break;case"http://iiif.io/api/image/2/context.json":o.version=2;break;case"http://iiif.io/api/image/3/context.json":o.version=3;break;default:t.console.error("Data has a @context property which contains no known IIIF context URI.")}}if(o.preferredFormats){for(var w=0;w<o.preferredFormats.length;w++)if(i.imageFormatSupported(o.preferredFormats[w])){o.tileFormat=o.preferredFormats[w];break}}return o}else{var c=s(o);return c["@context"]="http://iiif.io/api/image/1.0/context.json",c["@id"]=l.replace("/info.xml",""),c.version=1,c}},getTileWidth:function(o){if(this.emulateLegacyImagePyramid)return t.TileSource.prototype.getTileWidth.call(this,o);var l=Math.pow(2,this.maxLevel-o);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[l]?this.tileSizePerScaleFactor[l].width:this._tileWidth},getTileHeight:function(o){if(this.emulateLegacyImagePyramid)return t.TileSource.prototype.getTileHeight.call(this,o);var l=Math.pow(2,this.maxLevel-o);return this.tileSizePerScaleFactor&&this.tileSizePerScaleFactor[l]?this.tileSizePerScaleFactor[l].height:this._tileHeight},getLevelScale:function(o){if(this.emulateLegacyImagePyramid){var l=NaN;return this.levels.length>0&&o>=this.minLevel&&o<=this.maxLevel&&(l=this.levels[o].width/this.levels[this.maxLevel].width),l}return t.TileSource.prototype.getLevelScale.call(this,o)},getNumTiles:function(o){if(this.emulateLegacyImagePyramid){var l=this.getLevelScale(o);return l?new t.Point(1,1):new t.Point(0,0)}if(this.levelSizes){var u=this.levelSizes[o],c=Math.ceil(u.width/this.getTileWidth(o)),h=Math.ceil(u.height/this.getTileHeight(o));return new t.Point(c,h)}else return t.TileSource.prototype.getNumTiles.call(this,o)},getTileAtPoint:function(o,l){if(this.emulateLegacyImagePyramid)return new t.Point(0,0);if(this.levelSizes){var u=l.x>=0&&l.x<=1&&l.y>=0&&l.y<=1/this.aspectRatio;t.console.assert(u,"[TileSource.getTileAtPoint] must be called with a valid point.");var c=this.levelSizes[o].width,h=l.x*c,d=l.y*c,w=Math.floor(h/this.getTileWidth(o)),v=Math.floor(d/this.getTileHeight(o));l.x>=1&&(w=this.getNumTiles(o).x-1);var T=1e-15;return l.y>=1/this.aspectRatio-T&&(v=this.getNumTiles(o).y-1),new t.Point(w,v)}return t.TileSource.prototype.getTileAtPoint.call(this,o,l)},getTileUrl:function(o,l,u){if(this.emulateLegacyImagePyramid){var c=null;return this.levels.length>0&&o>=this.minLevel&&o<=this.maxLevel&&(c=this.levels[o].url),c}var h="0",d=Math.pow(.5,this.maxLevel-o),w,v,T,x,m,y,S,_,b,O,z,M,U,W,te,ne;return this.levelSizes?(w=this.levelSizes[o].width,v=this.levelSizes[o].height):(w=Math.ceil(this.width*d),v=Math.ceil(this.height*d)),T=this.getTileWidth(o),x=this.getTileHeight(o),m=Math.round(T/d),y=Math.round(x/d),this.version===1?te="native."+this.tileFormat:te="default."+this.tileFormat,w<T&&v<x?(this.version===2&&w===this.width?M="full":this.version===3&&w===this.width&&v===this.height?M="max":this.version===3?M=w+","+v:M=w+",",S="full"):(_=l*m,b=u*y,O=Math.min(m,this.width-_),z=Math.min(y,this.height-b),l===0&&u===0&&O===this.width&&z===this.height?S="full":S=[_,b,O,z].join(","),U=Math.min(T,w-l*T),W=Math.min(x,v-u*x),this.version===2&&U===this.width?M="full":this.version===3&&U===this.width&&W===this.height?M="max":this.version===3?M=U+","+W:M=U+","),ne=[this._id,S,M,h,te].join("/"),ne},__testonly__:{canBeTiled:n,constructLevels:r}});function n(o){var l=["http://library.stanford.edu/iiif/image-api/compliance.html#level0","http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0","http://iiif.io/api/image/2/level0.json","level0","https://iiif.io/api/image/3/level0.json"],u=Array.isArray(o.profile)?o.profile[0]:o.profile,c=l.indexOf(u)!==-1,h=!1;return o.version===2&&o.profile.length>1&&o.profile[1].supports&&(h=o.profile[1].supports.indexOf("sizeByW")!==-1),o.version===3&&o.extraFeatures&&(h=o.extraFeatures.indexOf("sizeByWh")!==-1),!c||h}function r(o){for(var l=[],u=0;u<o.sizes.length;u++)l.push({url:o._id+"/full/"+o.sizes[u].width+","+(o.version===3?o.sizes[u].height:"")+"/0/default."+o.tileFormat,width:o.sizes[u].width,height:o.sizes[u].height});return l.sort(function(c,h){return c.width-h.width})}function s(o){if(!o||!o.documentElement)throw new Error(t.getString("Errors.Xml"));var l=o.documentElement,u=l.tagName,c=null;if(u==="info")try{return c={},a(l,c),c}catch(h){throw h instanceof Error?h:new Error(t.getString("Errors.IIIF"))}throw new Error(t.getString("Errors.IIIF"))}function a(o,l,u){var c,h;if(o.nodeType===3&&u)h=o.nodeValue.trim(),h.match(/^\d*$/)&&(h=Number(h)),l[u]?(t.isArray(l[u])||(l[u]=[l[u]]),l[u].push(h)):l[u]=h;else if(o.nodeType===1)for(c=0;c<o.childNodes.length;c++)a(o.childNodes[c],l,o.nodeName)}}(i),function(t){t.OsmTileSource=function(n,r,s,a,o){var l;t.isPlainObject(n)?l=n:l={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]},(!l.width||!l.height)&&(l.width=65572864,l.height=65572864),l.tileSize||(l.tileSize=256,l.tileOverlap=0),l.tilesUrl||(l.tilesUrl="http://tile.openstreetmap.org/"),l.minLevel=8,t.TileSource.apply(this,[l])},t.extend(t.OsmTileSource.prototype,t.TileSource.prototype,{supports:function(n,r){return n.type&&n.type==="openstreetmaps"},configure:function(n,r,s){return n},getTileUrl:function(n,r,s){return this.tilesUrl+(n-8)+"/"+r+"/"+s+".png"}})}(i),function(t){t.TmsTileSource=function(n,r,s,a,o){var l;t.isPlainObject(n)?l=n:l={width:arguments[0],height:arguments[1],tileSize:arguments[2],tileOverlap:arguments[3],tilesUrl:arguments[4]};var u=Math.ceil(l.width/256)*256,c=Math.ceil(l.height/256)*256,h;u>c?h=u/256:h=c/256,l.maxLevel=Math.ceil(Math.log(h)/Math.log(2))-1,l.tileSize=256,l.width=u,l.height=c,t.TileSource.apply(this,[l])},t.extend(t.TmsTileSource.prototype,t.TileSource.prototype,{supports:function(n,r){return n.type&&n.type==="tiledmapservice"},configure:function(n,r,s){return n},getTileUrl:function(n,r,s){var a=this.getNumTiles(n).y-1;return this.tilesUrl+n+"/"+r+"/"+(a-s)+".png"}})}(i),function(t){t.ZoomifyTileSource=function(n){typeof n.tileSize>"u"&&(n.tileSize=256),typeof n.fileFormat>"u"&&(n.fileFormat="jpg",this.fileFormat=n.fileFormat);var r={x:n.width,y:n.height};for(n.imageSizes=[{x:n.width,y:n.height}],n.gridSize=[this._getGridSize(n.width,n.height,n.tileSize)];parseInt(r.x,10)>n.tileSize||parseInt(r.y,10)>n.tileSize;)r.x=Math.floor(r.x/2),r.y=Math.floor(r.y/2),n.imageSizes.push({x:r.x,y:r.y}),n.gridSize.push(this._getGridSize(r.x,r.y,n.tileSize));n.imageSizes.reverse(),n.gridSize.reverse(),n.minLevel=0,n.maxLevel=n.gridSize.length-1,i.TileSource.apply(this,[n])},t.extend(t.ZoomifyTileSource.prototype,t.TileSource.prototype,{_getGridSize:function(n,r,s){return{x:Math.ceil(n/s),y:Math.ceil(r/s)}},_calculateAbsoluteTileNumber:function(n,r,s){for(var a=0,o={},l=0;l<n;l++)o=this.gridSize[l],a+=o.x*o.y;return o=this.gridSize[n],a+=o.x*s+r,a},supports:function(n,r){return n.type&&n.type==="zoomifytileservice"},configure:function(n,r,s){return n},getTileUrl:function(n,r,s){var a=0,o=this._calculateAbsoluteTileNumber(n,r,s);return a=Math.floor(o/256),this.tilesUrl+"TileGroup"+a+"/"+n+"-"+r+"-"+s+"."+this.fileFormat}})}(i),function(t){t.LegacyTileSource=function(a){var o,l,u;t.isArray(a)&&(o={type:"legacy-image-pyramid",levels:a}),o.levels=n(o.levels),o.levels.length>0?(l=o.levels[o.levels.length-1].width,u=o.levels[o.levels.length-1].height):(l=0,u=0,t.console.error("No supported image formats found")),t.extend(!0,o,{width:l,height:u,tileSize:Math.max(u,l),tileOverlap:0,minLevel:0,maxLevel:o.levels.length>0?o.levels.length-1:0}),t.TileSource.apply(this,[o]),this.levels=o.levels},t.extend(t.LegacyTileSource.prototype,t.TileSource.prototype,{supports:function(a,o){return a.type&&a.type==="legacy-image-pyramid"||a.documentElement&&a.documentElement.getAttribute("type")==="legacy-image-pyramid"},configure:function(a,o,l){var u;return t.isPlainObject(a)?u=s(this,a):u=r(this,a),u},getLevelScale:function(a){var o=NaN;return this.levels.length>0&&a>=this.minLevel&&a<=this.maxLevel&&(o=this.levels[a].width/this.levels[this.maxLevel].width),o},getNumTiles:function(a){var o=this.getLevelScale(a);return o?new t.Point(1,1):new t.Point(0,0)},getTileUrl:function(a,o,l){var u=null;return this.levels.length>0&&a>=this.minLevel&&a<=this.maxLevel&&(u=this.levels[a].url),u}});function n(a){var o=[],l,u;for(u=0;u<a.length;u++)l=a[u],l.height&&l.width&&l.url?o.push({url:l.url,width:Number(l.width),height:Number(l.height)}):t.console.error("Unsupported image format: %s",l.url?l.url:"<no URL>");return o.sort(function(c,h){return c.height-h.height})}function r(a,o){if(!o||!o.documentElement)throw new Error(t.getString("Errors.Xml"));var l=o.documentElement,u=l.tagName,c=null,h=[],d,w;if(u==="image")try{for(c={type:l.getAttribute("type"),levels:[]},h=l.getElementsByTagName("level"),w=0;w<h.length;w++)d=h[w],c.levels.push({url:d.getAttribute("url"),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10)});return s(a,c)}catch(v){throw v instanceof Error?v:new Error("Unknown error parsing Legacy Image Pyramid XML.")}else{if(u==="collection")throw new Error("Legacy Image Pyramid Collections not yet supported.");if(u==="error")throw new Error("Error: "+o)}throw new Error("Unknown element "+u)}function s(a,o){return o.levels}}(i),function(t){t.ImageTileSource=function(n){n=t.extend({buildPyramid:!0,crossOriginPolicy:!1,ajaxWithCredentials:!1,useCanvas:!0},n),t.TileSource.apply(this,[n])},t.extend(t.ImageTileSource.prototype,t.TileSource.prototype,{supports:function(n,r){return n.type&&n.type==="image"},configure:function(n,r,s){return n},getImageInfo:function(n){var r=this._image=new Image,s=this;this.crossOriginPolicy&&(r.crossOrigin=this.crossOriginPolicy),this.ajaxWithCredentials&&(r.useCredentials=this.ajaxWithCredentials),t.addEvent(r,"load",function(){s.width=r.naturalWidth,s.height=r.naturalHeight,s.aspectRatio=s.width/s.height,s.dimensions=new t.Point(s.width,s.height),s._tileWidth=s.width,s._tileHeight=s.height,s.tileOverlap=0,s.minLevel=0,s.levels=s._buildLevels(),s.maxLevel=s.levels.length-1,s.ready=!0,s.raiseEvent("ready",{tileSource:s})}),t.addEvent(r,"error",function(){s.raiseEvent("open-failed",{message:"Error loading image at "+n,source:n})}),r.src=n},getLevelScale:function(n){var r=NaN;return n>=this.minLevel&&n<=this.maxLevel&&(r=this.levels[n].width/this.levels[this.maxLevel].width),r},getNumTiles:function(n){var r=this.getLevelScale(n);return r?new t.Point(1,1):new t.Point(0,0)},getTileUrl:function(n,r,s){var a=null;return n>=this.minLevel&&n<=this.maxLevel&&(a=this.levels[n].url),a},getContext2D:function(n,r,s){var a=null;return n>=this.minLevel&&n<=this.maxLevel&&(a=this.levels[n].context2D),a},destroy:function(){this._freeupCanvasMemory()},_buildLevels:function(){var n=[{url:this._image.src,width:this._image.naturalWidth,height:this._image.naturalHeight}];if(!this.buildPyramid||!t.supportsCanvas||!this.useCanvas)return delete this._image,n;var r=this._image.naturalWidth,s=this._image.naturalHeight,a=document.createElement("canvas"),o=a.getContext("2d");if(a.width=r,a.height=s,o.drawImage(this._image,0,0,r,s),n[0].context2D=o,delete this._image,t.isCanvasTainted(a))return n;for(;r>=2&&s>=2;){r=Math.floor(r/2),s=Math.floor(s/2);var l=document.createElement("canvas"),u=l.getContext("2d");l.width=r,l.height=s,u.drawImage(a,0,0,r,s),n.splice(0,0,{context2D:u,width:r,height:s}),a=l,o=u}return n},_freeupCanvasMemory:function(){for(var n=0;n<this.levels.length;n++)this.levels[n].context2D&&(this.levels[n].context2D.canvas.height=0,this.levels[n].context2D.canvas.width=0)}})}(i),function(t){t.TileSourceCollection=function(n,r,s,a){t.console.error("TileSourceCollection is deprecated; use World instead")}}(i),function(t){t.ButtonState={REST:0,GROUP:1,HOVER:2,DOWN:3},t.Button=function(u){var c=this;t.EventSource.call(this),t.extend(!0,this,{tooltip:null,srcRest:null,srcGroup:null,srcHover:null,srcDown:null,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,fadeDelay:0,fadeLength:2e3,onPress:null,onRelease:null,onClick:null,onEnter:null,onExit:null,onFocus:null,onBlur:null,userData:null},u),this.element=u.element||t.makeNeutralElement("div"),u.element||(this.imgRest=t.makeTransparentImage(this.srcRest),this.imgGroup=t.makeTransparentImage(this.srcGroup),this.imgHover=t.makeTransparentImage(this.srcHover),this.imgDown=t.makeTransparentImage(this.srcDown),this.imgRest.alt=this.imgGroup.alt=this.imgHover.alt=this.imgDown.alt=this.tooltip,t.setElementPointerEventsNone(this.imgRest),t.setElementPointerEventsNone(this.imgGroup),t.setElementPointerEventsNone(this.imgHover),t.setElementPointerEventsNone(this.imgDown),this.element.style.position="relative",t.setElementTouchActionNone(this.element),this.imgGroup.style.position=this.imgHover.style.position=this.imgDown.style.position="absolute",this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top="0px",this.imgGroup.style.left=this.imgHover.style.left=this.imgDown.style.left="0px",this.imgHover.style.visibility=this.imgDown.style.visibility="hidden",t.Browser.vendor===t.BROWSERS.FIREFOX&&t.Browser.version<3&&(this.imgGroup.style.top=this.imgHover.style.top=this.imgDown.style.top=""),this.element.appendChild(this.imgRest),this.element.appendChild(this.imgGroup),this.element.appendChild(this.imgHover),this.element.appendChild(this.imgDown)),this.addHandler("press",this.onPress),this.addHandler("release",this.onRelease),this.addHandler("click",this.onClick),this.addHandler("enter",this.onEnter),this.addHandler("exit",this.onExit),this.addHandler("focus",this.onFocus),this.addHandler("blur",this.onBlur),this.currentState=t.ButtonState.GROUP,this.fadeBeginTime=null,this.shouldFade=!1,this.element.style.display="inline-block",this.element.style.position="relative",this.element.title=this.tooltip,this.tracker=new t.MouseTracker({userData:"Button.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(h){h.insideElementPressed?(o(c,t.ButtonState.DOWN),c.raiseEvent("enter",{originalEvent:h.originalEvent})):h.buttonDownAny||o(c,t.ButtonState.HOVER)},focusHandler:function(h){c.tracker.enterHandler(h),c.raiseEvent("focus",{originalEvent:h.originalEvent})},leaveHandler:function(h){l(c,t.ButtonState.GROUP),h.insideElementPressed&&c.raiseEvent("exit",{originalEvent:h.originalEvent})},blurHandler:function(h){c.tracker.leaveHandler(h),c.raiseEvent("blur",{originalEvent:h.originalEvent})},pressHandler:function(h){o(c,t.ButtonState.DOWN),c.raiseEvent("press",{originalEvent:h.originalEvent})},releaseHandler:function(h){h.insideElementPressed&&h.insideElementReleased?(l(c,t.ButtonState.HOVER),c.raiseEvent("release",{originalEvent:h.originalEvent})):h.insideElementPressed?l(c,t.ButtonState.GROUP):o(c,t.ButtonState.HOVER)},clickHandler:function(h){h.quick&&c.raiseEvent("click",{originalEvent:h.originalEvent})},keyHandler:function(h){h.keyCode===13?(c.raiseEvent("click",{originalEvent:h.originalEvent}),c.raiseEvent("release",{originalEvent:h.originalEvent}),h.preventDefault=!0):h.preventDefault=!1}}),l(this,t.ButtonState.REST)},t.extend(t.Button.prototype,t.EventSource.prototype,{notifyGroupEnter:function(){o(this,t.ButtonState.GROUP)},notifyGroupExit:function(){l(this,t.ButtonState.REST)},disable:function(){this.notifyGroupExit(),this.element.disabled=!0,this.tracker.setTracking(!1),t.setElementOpacity(this.element,.2,!0)},enable:function(){this.element.disabled=!1,this.tracker.setTracking(!0),t.setElementOpacity(this.element,1,!0),this.notifyGroupEnter()},destroy:function(){this.imgRest&&(this.element.removeChild(this.imgRest),this.imgRest=null),this.imgGroup&&(this.element.removeChild(this.imgGroup),this.imgGroup=null),this.imgHover&&(this.element.removeChild(this.imgHover),this.imgHover=null),this.imgDown&&(this.element.removeChild(this.imgDown),this.imgDown=null),this.removeAllHandlers(),this.tracker.destroy(),this.element=null}});function n(u){t.requestAnimationFrame(function(){r(u)})}function r(u){var c,h,d;u.shouldFade&&(c=t.now(),h=c-u.fadeBeginTime,d=1-h/u.fadeLength,d=Math.min(1,d),d=Math.max(0,d),u.imgGroup&&t.setElementOpacity(u.imgGroup,d,!0),d>0&&n(u))}function s(u){u.shouldFade=!0,u.fadeBeginTime=t.now()+u.fadeDelay,window.setTimeout(function(){n(u)},u.fadeDelay)}function a(u){u.shouldFade=!1,u.imgGroup&&t.setElementOpacity(u.imgGroup,1,!0)}function o(u,c){u.element.disabled||(c>=t.ButtonState.GROUP&&u.currentState===t.ButtonState.REST&&(a(u),u.currentState=t.ButtonState.GROUP),c>=t.ButtonState.HOVER&&u.currentState===t.ButtonState.GROUP&&(u.imgHover&&(u.imgHover.style.visibility=""),u.currentState=t.ButtonState.HOVER),c>=t.ButtonState.DOWN&&u.currentState===t.ButtonState.HOVER&&(u.imgDown&&(u.imgDown.style.visibility=""),u.currentState=t.ButtonState.DOWN))}function l(u,c){u.element.disabled||(c<=t.ButtonState.HOVER&&u.currentState===t.ButtonState.DOWN&&(u.imgDown&&(u.imgDown.style.visibility="hidden"),u.currentState=t.ButtonState.HOVER),c<=t.ButtonState.GROUP&&u.currentState===t.ButtonState.HOVER&&(u.imgHover&&(u.imgHover.style.visibility="hidden"),u.currentState=t.ButtonState.GROUP),c<=t.ButtonState.REST&&u.currentState===t.ButtonState.GROUP&&(s(u),u.currentState=t.ButtonState.REST))}}(i),function(t){t.ButtonGroup=function(n){t.extend(!0,this,{buttons:[],clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold,clickDistThreshold:t.DEFAULT_SETTINGS.clickDistThreshold,labelText:""},n);var r=this.buttons.concat([]),s=this,a;if(this.element=n.element||t.makeNeutralElement("div"),!n.group)for(this.element.style.display="inline-block",a=0;a<r.length;a++)this.element.appendChild(r[a].element);t.setElementTouchActionNone(this.element),this.tracker=new t.MouseTracker({userData:"ButtonGroup.tracker",element:this.element,clickTimeThreshold:this.clickTimeThreshold,clickDistThreshold:this.clickDistThreshold,enterHandler:function(o){var l;for(l=0;l<s.buttons.length;l++)s.buttons[l].notifyGroupEnter()},leaveHandler:function(o){var l;if(!o.insideElementPressed)for(l=0;l<s.buttons.length;l++)s.buttons[l].notifyGroupExit()}})},t.ButtonGroup.prototype={addButton:function(n){this.buttons.push(n),this.element.appendChild(n.element)},emulateEnter:function(){this.tracker.enterHandler({eventSource:this.tracker})},emulateLeave:function(){this.tracker.leaveHandler({eventSource:this.tracker})},destroy:function(){for(;this.buttons.length;){var n=this.buttons.pop();this.element.removeChild(n.element),n.destroy()}this.tracker.destroy(),this.element=null}}}(i),function(t){t.Rect=function(n,r,s,a,o){this.x=typeof n=="number"?n:0,this.y=typeof r=="number"?r:0,this.width=typeof s=="number"?s:0,this.height=typeof a=="number"?a:0,this.degrees=typeof o=="number"?o:0,this.degrees=t.positiveModulo(this.degrees,360);var l,u;this.degrees>=270?(l=this.getTopRight(),this.x=l.x,this.y=l.y,u=this.height,this.height=this.width,this.width=u,this.degrees-=270):this.degrees>=180?(l=this.getBottomRight(),this.x=l.x,this.y=l.y,this.degrees-=180):this.degrees>=90&&(l=this.getBottomLeft(),this.x=l.x,this.y=l.y,u=this.height,this.height=this.width,this.width=u,this.degrees-=90)},t.Rect.fromSummits=function(n,r,s){var a=n.distanceTo(r),o=n.distanceTo(s),l=r.minus(n),u=Math.atan(l.y/l.x);return l.x<0?u+=Math.PI:l.y<0&&(u+=2*Math.PI),new t.Rect(n.x,n.y,a,o,u/Math.PI*180)},t.Rect.prototype={clone:function(){return new t.Rect(this.x,this.y,this.width,this.height,this.degrees)},getAspectRatio:function(){return this.width/this.height},getTopLeft:function(){return new t.Point(this.x,this.y)},getBottomRight:function(){return new t.Point(this.x+this.width,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getTopRight:function(){return new t.Point(this.x+this.width,this.y).rotate(this.degrees,this.getTopLeft())},getBottomLeft:function(){return new t.Point(this.x,this.y+this.height).rotate(this.degrees,this.getTopLeft())},getCenter:function(){return new t.Point(this.x+this.width/2,this.y+this.height/2).rotate(this.degrees,this.getTopLeft())},getSize:function(){return new t.Point(this.width,this.height)},equals:function(n){return n instanceof t.Rect&&this.x===n.x&&this.y===n.y&&this.width===n.width&&this.height===n.height&&this.degrees===n.degrees},times:function(n){return new t.Rect(this.x*n,this.y*n,this.width*n,this.height*n,this.degrees)},translate:function(n){return new t.Rect(this.x+n.x,this.y+n.y,this.width,this.height,this.degrees)},union:function(n){var r=this.getBoundingBox(),s=n.getBoundingBox(),a=Math.min(r.x,s.x),o=Math.min(r.y,s.y),l=Math.max(r.x+r.width,s.x+s.width),u=Math.max(r.y+r.height,s.y+s.height);return new t.Rect(a,o,l-a,u-o)},intersection:function(n){var r=1e-10,s=[],a=this.getTopLeft();n.containsPoint(a,r)&&s.push(a);var o=this.getTopRight();n.containsPoint(o,r)&&s.push(o);var l=this.getBottomLeft();n.containsPoint(l,r)&&s.push(l);var u=this.getBottomRight();n.containsPoint(u,r)&&s.push(u);var c=n.getTopLeft();this.containsPoint(c,r)&&s.push(c);var h=n.getTopRight();this.containsPoint(h,r)&&s.push(h);var d=n.getBottomLeft();this.containsPoint(d,r)&&s.push(d);var w=n.getBottomRight();this.containsPoint(w,r)&&s.push(w);for(var v=this._getSegments(),T=n._getSegments(),x=0;x<v.length;x++)for(var m=v[x],y=0;y<T.length;y++){var S=T[y],_=b(m[0],m[1],S[0],S[1]);_&&s.push(_)}function b(ne,de,Te,st){var ce=de.minus(ne),ke=st.minus(Te),L=-ke.x*ce.y+ce.x*ke.y;if(L===0)return null;var V=(ce.x*(ne.y-Te.y)-ce.y*(ne.x-Te.x))/L,q=(ke.x*(ne.y-Te.y)-ke.y*(ne.x-Te.x))/L;return-r<=V&&V<=1-r&&-r<=q&&q<=1-r?new t.Point(ne.x+q*ce.x,ne.y+q*ce.y):null}if(s.length===0)return null;for(var O=s[0].x,z=s[0].x,M=s[0].y,U=s[0].y,W=1;W<s.length;W++){var te=s[W];te.x<O&&(O=te.x),te.x>z&&(z=te.x),te.y<M&&(M=te.y),te.y>U&&(U=te.y)}return new t.Rect(O,M,z-O,U-M)},_getSegments:function(){var n=this.getTopLeft(),r=this.getTopRight(),s=this.getBottomLeft(),a=this.getBottomRight();return[[n,r],[r,a],[a,s],[s,n]]},rotate:function(n,r){if(n=t.positiveModulo(n,360),n===0)return this.clone();r=r||this.getCenter();var s=this.getTopLeft().rotate(n,r),a=this.getTopRight().rotate(n,r),o=a.minus(s);o=o.apply(function(u){var c=1e-15;return Math.abs(u)<c?0:u});var l=Math.atan(o.y/o.x);return o.x<0?l+=Math.PI:o.y<0&&(l+=2*Math.PI),new t.Rect(s.x,s.y,this.width,this.height,l/Math.PI*180)},getBoundingBox:function(){if(this.degrees===0)return this.clone();var n=this.getTopLeft(),r=this.getTopRight(),s=this.getBottomLeft(),a=this.getBottomRight(),o=Math.min(n.x,r.x,s.x,a.x),l=Math.max(n.x,r.x,s.x,a.x),u=Math.min(n.y,r.y,s.y,a.y),c=Math.max(n.y,r.y,s.y,a.y);return new t.Rect(o,u,l-o,c-u)},getIntegerBoundingBox:function(){var n=this.getBoundingBox(),r=Math.floor(n.x),s=Math.floor(n.y),a=Math.ceil(n.width+n.x-r),o=Math.ceil(n.height+n.y-s);return new t.Rect(r,s,a,o)},containsPoint:function(n,r){r=r||0;var s=this.getTopLeft(),a=this.getTopRight(),o=this.getBottomLeft(),l=a.minus(s),u=o.minus(s);return(n.x-s.x)*l.x+(n.y-s.y)*l.y>=-r&&(n.x-a.x)*l.x+(n.y-a.y)*l.y<=r&&(n.x-s.x)*u.x+(n.y-s.y)*u.y>=-r&&(n.x-o.x)*u.x+(n.y-o.y)*u.y<=r},toString:function(){return"["+Math.round(this.x*100)/100+", "+Math.round(this.y*100)/100+", "+Math.round(this.width*100)/100+"x"+Math.round(this.height*100)/100+", "+Math.round(this.degrees*100)/100+"deg]"}}}(i),function(t){var n={};t.ReferenceStrip=function(d){var w=this,v=d.viewer,T=t.getElementSize(v.element),x,m,y;for(d.id||(d.id="referencestrip-"+t.now(),this.element=t.makeNeutralElement("div"),this.element.id=d.id,this.element.className="referencestrip"),d=t.extend(!0,{sizeRatio:t.DEFAULT_SETTINGS.referenceStripSizeRatio,position:t.DEFAULT_SETTINGS.referenceStripPosition,scroll:t.DEFAULT_SETTINGS.referenceStripScroll,clickTimeThreshold:t.DEFAULT_SETTINGS.clickTimeThreshold},d,{element:this.element}),t.extend(this,d),n[this.id]={animating:!1},this.minPixelRatio=this.viewer.minPixelRatio,this.element.tabIndex=0,m=this.element.style,m.marginTop="0px",m.marginRight="0px",m.marginBottom="0px",m.marginLeft="0px",m.left="0px",m.bottom="0px",m.border="0px",m.background="#000",m.position="relative",t.setElementTouchActionNone(this.element),t.setElementOpacity(this.element,.8),this.viewer=v,this.tracker=new t.MouseTracker({userData:"ReferenceStrip.tracker",element:this.element,clickHandler:t.delegate(this,r),dragHandler:t.delegate(this,s),scrollHandler:t.delegate(this,a),enterHandler:t.delegate(this,l),leaveHandler:t.delegate(this,u),keyDownHandler:t.delegate(this,c),keyHandler:t.delegate(this,h),preProcessEventHandler:function(S){S.eventType==="wheel"&&(S.preventDefault=!0)}}),d.width&&d.height?(this.element.style.width=d.width+"px",this.element.style.height=d.height+"px",v.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):d.scroll==="horizontal"?(this.element.style.width=T.x*d.sizeRatio*v.tileSources.length+12*v.tileSources.length+"px",this.element.style.height=T.y*d.sizeRatio+"px",v.addControl(this.element,{anchor:t.ControlAnchor.BOTTOM_LEFT})):(this.element.style.height=T.y*d.sizeRatio*v.tileSources.length+12*v.tileSources.length+"px",this.element.style.width=T.x*d.sizeRatio+"px",v.addControl(this.element,{anchor:t.ControlAnchor.TOP_LEFT})),this.panelWidth=T.x*this.sizeRatio+8,this.panelHeight=T.y*this.sizeRatio+8,this.panels=[],this.miniViewers={},y=0;y<v.tileSources.length;y++)x=t.makeNeutralElement("div"),x.id=this.element.id+"-"+y,x.style.width=w.panelWidth+"px",x.style.height=w.panelHeight+"px",x.style.display="inline",x.style.float="left",x.style.cssFloat="left",x.style.styleFloat="left",x.style.padding="2px",t.setElementTouchActionNone(x),t.setElementPointerEventsNone(x),this.element.appendChild(x),x.activePanel=!1,this.panels.push(x);o(this,this.scroll==="vertical"?T.y:T.x,0),this.setFocus(0)},t.ReferenceStrip.prototype={setFocus:function(d){var w=this.element.querySelector("#"+this.element.id+"-"+d),v=t.getElementSize(this.viewer.canvas),T=Number(this.element.style.width.replace("px","")),x=Number(this.element.style.height.replace("px","")),m=-Number(this.element.style.marginLeft.replace("px","")),y=-Number(this.element.style.marginTop.replace("px","")),S;this.currentSelected!==w&&(this.currentSelected&&(this.currentSelected.style.background="#000"),this.currentSelected=w,this.currentSelected.style.background="#999",this.scroll==="horizontal"?(S=Number(d)*(this.panelWidth+3),S>m+v.x-this.panelWidth?(S=Math.min(S,T-v.x),this.element.style.marginLeft=-S+"px",o(this,v.x,-S)):S<m&&(S=Math.max(0,S-v.x/2),this.element.style.marginLeft=-S+"px",o(this,v.x,-S))):(S=Number(d)*(this.panelHeight+3),S>y+v.y-this.panelHeight?(S=Math.min(S,x-v.y),this.element.style.marginTop=-S+"px",o(this,v.y,-S)):S<y&&(S=Math.max(0,S-v.y/2),this.element.style.marginTop=-S+"px",o(this,v.y,-S))),this.currentPage=d,l.call(this,{eventSource:this.tracker}))},update:function(){return!!n[this.id].animating},destroy:function(){if(this.miniViewers)for(var d in this.miniViewers)this.miniViewers[d].destroy();this.tracker.destroy(),this.element&&this.viewer.removeControl(this.element)}};function r(d){if(d.quick){var w;this.scroll==="horizontal"?w=Math.floor(d.position.x/(this.panelWidth+4)):w=Math.floor(d.position.y/this.panelHeight),this.viewer.goToPage(w)}this.element.focus()}function s(d){if(this.dragging=!0,this.element){var w=Number(this.element.style.marginLeft.replace("px","")),v=Number(this.element.style.marginTop.replace("px","")),T=Number(this.element.style.width.replace("px","")),x=Number(this.element.style.height.replace("px","")),m=t.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?-d.delta.x>0?w>-(T-m.x)&&(this.element.style.marginLeft=w+d.delta.x*2+"px",o(this,m.x,w+d.delta.x*2)):-d.delta.x<0&&w<0&&(this.element.style.marginLeft=w+d.delta.x*2+"px",o(this,m.x,w+d.delta.x*2)):-d.delta.y>0?v>-(x-m.y)&&(this.element.style.marginTop=v+d.delta.y*2+"px",o(this,m.y,v+d.delta.y*2)):-d.delta.y<0&&v<0&&(this.element.style.marginTop=v+d.delta.y*2+"px",o(this,m.y,v+d.delta.y*2))}}function a(d){if(this.element){var w=Number(this.element.style.marginLeft.replace("px","")),v=Number(this.element.style.marginTop.replace("px","")),T=Number(this.element.style.width.replace("px","")),x=Number(this.element.style.height.replace("px","")),m=t.getElementSize(this.viewer.canvas);this.scroll==="horizontal"?d.scroll>0?w>-(T-m.x)&&(this.element.style.marginLeft=w-d.scroll*60+"px",o(this,m.x,w-d.scroll*60)):d.scroll<0&&w<0&&(this.element.style.marginLeft=w-d.scroll*60+"px",o(this,m.x,w-d.scroll*60)):d.scroll<0?v>m.y-x&&(this.element.style.marginTop=v+d.scroll*60+"px",o(this,m.y,v+d.scroll*60)):d.scroll>0&&v<0&&(this.element.style.marginTop=v+d.scroll*60+"px",o(this,m.y,v+d.scroll*60)),d.preventDefault=!0}}function o(d,w,v){var T,x,m,y,S,_;for(d.scroll==="horizontal"?T=d.panelWidth:T=d.panelHeight,x=Math.ceil(w/T)+5,m=Math.ceil((Math.abs(v)+w)/T)+1,x=m-x,x=x<0?0:x,S=x;S<m&&S<d.panels.length;S++)if(_=d.panels[S],!_.activePanel){var b,O=d.viewer.tileSources[S];O.referenceStripThumbnailUrl?b={type:"image",url:O.referenceStripThumbnailUrl}:b=O,y=new t.Viewer({id:_.id,tileSources:[b],element:_,navigatorSizeRatio:d.sizeRatio,showNavigator:!1,mouseNavEnabled:!1,showNavigationControl:!1,showSequenceControl:!1,immediateRender:!0,blendTime:0,animationTime:0,loadTilesWithAjax:d.viewer.loadTilesWithAjax,ajaxHeaders:d.viewer.ajaxHeaders,useCanvas:d.useCanvas}),t.setElementPointerEventsNone(y.canvas),t.setElementPointerEventsNone(y.container),y.innerTracker.setTracking(!1),y.outerTracker.setTracking(!1),d.miniViewers[_.id]=y,_.activePanel=!0}}function l(d){var w=d.eventSource.element;this.scroll==="horizontal"?w.style.marginBottom="0px":w.style.marginLeft="0px"}function u(d){var w=d.eventSource.element;this.scroll==="horizontal"?w.style.marginBottom="-"+t.getElementSize(w).y/2+"px":w.style.marginLeft="-"+t.getElementSize(w).x/2+"px"}function c(d){if(!d.ctrl&&!d.alt&&!d.meta)switch(d.keyCode){case 38:a.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;case 40:a.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 37:a.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 39:a.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;default:d.preventDefault=!1;break}else d.preventDefault=!1}function h(d){if(!d.ctrl&&!d.alt&&!d.meta)switch(d.keyCode){case 61:a.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;case 45:a.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 48:case 119:case 87:a.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;case 115:case 83:a.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 97:a.call(this,{eventSource:this.tracker,position:null,scroll:-1,shift:null}),d.preventDefault=!0;break;case 100:a.call(this,{eventSource:this.tracker,position:null,scroll:1,shift:null}),d.preventDefault=!0;break;default:d.preventDefault=!1;break}else d.preventDefault=!1}}(i),function(t){t.DisplayRect=function(n,r,s,a,o,l){t.Rect.apply(this,[n,r,s,a]),this.minLevel=o,this.maxLevel=l},t.extend(t.DisplayRect.prototype,t.Rect.prototype)}(i),function(t){t.Spring=function(r){var s=arguments;typeof r!="object"&&(r={initial:s.length&&typeof s[0]=="number"?s[0]:void 0,springStiffness:s.length>1?s[1].springStiffness:5,animationTime:s.length>1?s[1].animationTime:1.5}),t.console.assert(typeof r.springStiffness=="number"&&r.springStiffness!==0,"[OpenSeadragon.Spring] options.springStiffness must be a non-zero number"),t.console.assert(typeof r.animationTime=="number"&&r.animationTime>=0,"[OpenSeadragon.Spring] options.animationTime must be a number greater than or equal to 0"),r.exponential&&(this._exponential=!0,delete r.exponential),t.extend(!0,this,r),this.current={value:typeof this.initial=="number"?this.initial:this._exponential?0:1,time:t.now()},t.console.assert(!this._exponential||this.current.value!==0,"[OpenSeadragon.Spring] value must be non-zero for exponential springs"),this.start={value:this.current.value,time:this.current.time},this.target={value:this.current.value,time:this.current.time},this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},t.Spring.prototype={resetTo:function(r){t.console.assert(!this._exponential||r!==0,"[OpenSeadragon.Spring.resetTo] target must be non-zero for exponential springs"),this.start.value=this.target.value=this.current.value=r,this.start.time=this.target.time=this.current.time=t.now(),this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},springTo:function(r){t.console.assert(!this._exponential||r!==0,"[OpenSeadragon.Spring.springTo] target must be non-zero for exponential springs"),this.start.value=this.current.value,this.start.time=this.current.time,this.target.value=r,this.target.time=this.start.time+1e3*this.animationTime,this._exponential&&(this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},shiftBy:function(r){this.start.value+=r,this.target.value+=r,this._exponential&&(t.console.assert(this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.shiftBy] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value))},setExponential:function(r){this._exponential=r,this._exponential&&(t.console.assert(this.current.value!==0&&this.target.value!==0&&this.start.value!==0,"[OpenSeadragon.Spring.setExponential] spring value must be non-zero for exponential springs"),this.start._logValue=Math.log(this.start.value),this.target._logValue=Math.log(this.target.value),this.current._logValue=Math.log(this.current.value))},update:function(){this.current.time=t.now();var r,s;this._exponential?(r=this.start._logValue,s=this.target._logValue):(r=this.start.value,s=this.target.value);var a=this.current.time>=this.target.time?s:r+(s-r)*n(this.springStiffness,(this.current.time-this.start.time)/(this.target.time-this.start.time)),o=this.current.value;return this._exponential?this.current.value=Math.exp(a):this.current.value=a,o!==this.current.value},isAtTargetValue:function(){return this.current.value===this.target.value}};function n(r,s){return(1-Math.exp(r*-s))/(1-Math.exp(-r))}}(i),function(t){t.ImageJob=function(r){t.extend(!0,this,{timeout:t.DEFAULT_SETTINGS.timeout,jobId:null,tries:0},r),this.data=null,this.userData={},this.errorMsg=null},t.ImageJob.prototype={start:function(){this.tries++;var r=this,s=this.abort;this.jobId=window.setTimeout(function(){r.finish(null,null,"Image load exceeded timeout ("+r.timeout+" ms)")},this.timeout),this.abort=function(){r.source.downloadTileAbort(r),typeof s=="function"&&s()},this.source.downloadTileStart(this)},finish:function(r,s,a){this.data=r,this.request=s,this.errorMsg=a,this.jobId&&window.clearTimeout(this.jobId),this.callback(this)}},t.ImageLoader=function(r){t.extend(!0,this,{jobLimit:t.DEFAULT_SETTINGS.imageLoaderLimit,timeout:t.DEFAULT_SETTINGS.timeout,jobQueue:[],failedTiles:[],jobsInProgress:0},r)},t.ImageLoader.prototype={addJob:function(r){if(!r.source){t.console.error("ImageLoader.prototype.addJob() requires [options.source]. TileSource since new API defines how images are fetched. Creating a dummy TileSource.");var s=t.TileSource.prototype;r.source={downloadTileStart:s.downloadTileStart,downloadTileAbort:s.downloadTileAbort}}var a=this,o=function(c){n(a,c,r.callback)},l={src:r.src,tile:r.tile||{},source:r.source,loadWithAjax:r.loadWithAjax,ajaxHeaders:r.loadWithAjax?r.ajaxHeaders:null,crossOriginPolicy:r.crossOriginPolicy,ajaxWithCredentials:r.ajaxWithCredentials,postData:r.postData,callback:o,abort:r.abort,timeout:this.timeout},u=new t.ImageJob(l);!this.jobLimit||this.jobsInProgress<this.jobLimit?(u.start(),this.jobsInProgress++):this.jobQueue.push(u)},clear:function(){for(var r=0;r<this.jobQueue.length;r++){var s=this.jobQueue[r];typeof s.abort=="function"&&s.abort()}this.jobQueue=[]}};function n(r,s,a){s.errorMsg!==""&&(s.data===null||s.data===void 0)&&s.tries<1+r.tileRetryMax&&r.failedTiles.push(s);var o;r.jobsInProgress--,(!r.jobLimit||r.jobsInProgress<r.jobLimit)&&r.jobQueue.length>0&&(o=r.jobQueue.shift(),o.start(),r.jobsInProgress++),r.tileRetryMax>0&&r.jobQueue.length===0&&(!r.jobLimit||r.jobsInProgress<r.jobLimit)&&r.failedTiles.length>0&&(o=r.failedTiles.shift(),setTimeout(function(){o.start()},r.tileRetryDelay),r.jobsInProgress++),a(s.data,s.errorMsg,s.request)}}(i),function(t){t.Tile=function(n,r,s,a,o,l,u,c,h,d,w,v){this.level=n,this.x=r,this.y=s,this.bounds=a,this.sourceBounds=d,this.exists=o,this._url=l,this.postData=w,this.context2D=u,this.loadWithAjax=c,this.ajaxHeaders=h,v===void 0&&(t.console.warn("Tile constructor needs 'cacheKey' variable: creation tile cache in Tile class is deprecated. TileSource.prototype.getTileHashKey will be used."),v=t.TileSource.prototype.getTileHashKey(n,r,s,l,h,w)),this.cacheKey=v,this.loaded=!1,this.loading=!1,this.element=null,this.imgElement=null,this.style=null,this.position=null,this.size=null,this.flipped=!1,this.blendStart=null,this.opacity=null,this.squaredDistance=null,this.visibility=null,this.hasTransparency=!1,this.beingDrawn=!1,this.lastTouchTime=0,this.isRightMost=!1,this.isBottomMost=!1},t.Tile.prototype={toString:function(){return this.level+"/"+this.x+"_"+this.y},_hasTransparencyChannel:function(){return console.warn("Tile.prototype._hasTransparencyChannel() has been deprecated and will be removed in the future. Use TileSource.prototype.hasTransparency() instead."),!!this.context2D||this.getUrl().match(".png")},drawHTML:function(n){if(!this.cacheImageRecord){t.console.warn("[Tile.drawHTML] attempting to draw tile %s when it's not cached",this.toString());return}if(!this.loaded){t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}if(!this.element){var r=this.getImage();if(!r)return;this.element=t.makeNeutralElement("div"),this.imgElement=r.cloneNode(),this.imgElement.style.msInterpolationMode="nearest-neighbor",this.imgElement.style.width="100%",this.imgElement.style.height="100%",this.style=this.element.style,this.style.position="absolute"}this.element.parentNode!==n&&n.appendChild(this.element),this.imgElement.parentNode!==this.element&&this.element.appendChild(this.imgElement),this.style.top=this.position.y+"px",this.style.left=this.position.x+"px",this.style.height=this.size.y+"px",this.style.width=this.size.x+"px",this.flipped&&(this.style.transform="scaleX(-1)"),t.setElementOpacity(this.element,this.opacity)},get image(){return t.console.error("[Tile.image] property has been deprecated. Use [Tile.prototype.getImage] instead."),this.getImage()},get url(){return t.console.error("[Tile.url] property has been deprecated. Use [Tile.prototype.getUrl] instead."),this.getUrl()},getImage:function(){return this.cacheImageRecord.getImage()},getUrl:function(){return typeof this._url=="function"?this._url():this._url},getCanvasContext:function(){return this.context2D||this.cacheImageRecord.getRenderedContext()},drawCanvas:function(n,r,s,a,o,l){var u=this.position.times(t.pixelDensityRatio),c=this.size.times(t.pixelDensityRatio),h;if(!this.context2D&&!this.cacheImageRecord){t.console.warn("[Tile.drawCanvas] attempting to draw tile %s when it's not cached",this.toString());return}if(h=this.getCanvasContext(),!this.loaded||!h){t.console.warn("Attempting to draw tile %s when it's not yet loaded.",this.toString());return}n.save(),n.globalAlpha=this.opacity,typeof s=="number"&&s!==1&&(u=u.times(s),c=c.times(s)),a instanceof t.Point&&(u=u.plus(a)),n.globalAlpha===1&&this.hasTransparency&&(o&&(u.x=Math.round(u.x),u.y=Math.round(u.y),c.x=Math.round(c.x),c.y=Math.round(c.y)),n.clearRect(u.x,u.y,c.x,c.y)),r({context:n,tile:this,rendered:h});var d,w;this.sourceBounds?(d=Math.min(this.sourceBounds.width,h.canvas.width),w=Math.min(this.sourceBounds.height,h.canvas.height)):(d=h.canvas.width,w=h.canvas.height),n.translate(u.x+c.x/2,0),this.flipped&&n.scale(-1,1),n.drawImage(h.canvas,0,0,d,w,-c.x/2,u.y,c.x,c.y),n.restore()},getScaleForEdgeSmoothing:function(){var n;if(this.cacheImageRecord)n=this.cacheImageRecord.getRenderedContext();else if(this.context2D)n=this.context2D;else return t.console.warn("[Tile.drawCanvas] attempting to get tile scale %s when tile's not cached",this.toString()),1;return n.canvas.width/(this.size.x*t.pixelDensityRatio)},getTranslationForEdgeSmoothing:function(n,r,s){var a=Math.max(1,Math.ceil((s.x-r.x)/2)),o=Math.max(1,Math.ceil((s.y-r.y)/2));return new t.Point(a,o).minus(this.position.times(t.pixelDensityRatio).times(n||1).apply(function(l){return l%1}))},unload:function(){this.imgElement&&this.imgElement.parentNode&&this.imgElement.parentNode.removeChild(this.imgElement),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.element=null,this.imgElement=null,this.loaded=!1,this.loading=!1}}}(i),function(t){t.OverlayPlacement=t.Placement,t.OverlayRotationMode=t.freezeObject({NO_ROTATION:1,EXACT:2,BOUNDING_BOX:3}),t.Overlay=function(n,r,s){var a;t.isPlainObject(n)?a=n:a={element:n,location:r,placement:s},this.element=a.element,this.style=a.element.style,this._init(a)},t.Overlay.prototype={_init:function(n){this.location=n.location,this.placement=n.placement===void 0?t.Placement.TOP_LEFT:n.placement,this.onDraw=n.onDraw,this.checkResize=n.checkResize===void 0?!0:n.checkResize,this.width=n.width===void 0?null:n.width,this.height=n.height===void 0?null:n.height,this.rotationMode=n.rotationMode||t.OverlayRotationMode.EXACT,this.location instanceof t.Rect&&(this.width=this.location.width,this.height=this.location.height,this.location=this.location.getTopLeft(),this.placement=t.Placement.TOP_LEFT),this.scales=this.width!==null&&this.height!==null,this.bounds=new t.Rect(this.location.x,this.location.y,this.width,this.height),this.position=this.location},adjust:function(n,r){var s=t.Placement.properties[this.placement];s&&(s.isHorizontallyCentered?n.x-=r.x/2:s.isRight&&(n.x-=r.x),s.isVerticallyCentered?n.y-=r.y/2:s.isBottom&&(n.y-=r.y))},destroy:function(){var n=this.element,r=this.style;n.parentNode&&(n.parentNode.removeChild(n),n.prevElementParent&&(r.display="none",document.body.appendChild(n))),this.onDraw=null,r.top="",r.left="",r.position="",this.width!==null&&(r.width=""),this.height!==null&&(r.height="");var s=t.getCssPropertyWithVendorPrefix("transformOrigin"),a=t.getCssPropertyWithVendorPrefix("transform");s&&a&&(r[s]="",r[a]="")},drawHTML:function(n,r){var s=this.element;s.parentNode!==n&&(s.prevElementParent=s.parentNode,s.prevNextSibling=s.nextSibling,n.appendChild(s),this.style.position="absolute",this.size=t.getElementSize(s));var a=this._getOverlayPositionAndSize(r),o=a.position,l=this.size=a.size,u=a.rotate;if(this.onDraw)this.onDraw(o,l,this.element);else{var c=this.style;c.left=o.x+"px",c.top=o.y+"px",this.width!==null&&(c.width=l.x+"px"),this.height!==null&&(c.height=l.y+"px");var h=t.getCssPropertyWithVendorPrefix("transformOrigin"),d=t.getCssPropertyWithVendorPrefix("transform");h&&d&&(u?(c[h]=this._getTransformOrigin(),c[d]="rotate("+u+"deg)"):(c[h]="",c[d]="")),c.display="block"}},_getOverlayPositionAndSize:function(n){var r=n.pixelFromPoint(this.location,!0),s=this._getSizeInPixels(n);this.adjust(r,s);var a=0;if(n.getRotation(!0)&&this.rotationMode!==t.OverlayRotationMode.NO_ROTATION)if(this.rotationMode===t.OverlayRotationMode.BOUNDING_BOX&&this.width!==null&&this.height!==null){var o=new t.Rect(r.x,r.y,s.x,s.y),l=this._getBoundingBox(o,n.getRotation(!0));r=l.getTopLeft(),s=l.getSize()}else a=n.getRotation(!0);return{position:r,size:s,rotate:a}},_getSizeInPixels:function(n){var r=this.size.x,s=this.size.y;if(this.width!==null||this.height!==null){var a=n.deltaPixelsFromPointsNoRotate(new t.Point(this.width||0,this.height||0),!0);this.width!==null&&(r=a.x),this.height!==null&&(s=a.y)}if(this.checkResize&&(this.width===null||this.height===null)){var o=this.size=t.getElementSize(this.element);this.width===null&&(r=o.x),this.height===null&&(s=o.y)}return new t.Point(r,s)},_getBoundingBox:function(n,r){var s=this._getPlacementPoint(n);return n.rotate(r,s).getBoundingBox()},_getPlacementPoint:function(n){var r=new t.Point(n.x,n.y),s=t.Placement.properties[this.placement];return s&&(s.isHorizontallyCentered?r.x+=n.width/2:s.isRight&&(r.x+=n.width),s.isVerticallyCentered?r.y+=n.height/2:s.isBottom&&(r.y+=n.height)),r},_getTransformOrigin:function(){var n="",r=t.Placement.properties[this.placement];return r&&(r.isLeft?n="left":r.isRight&&(n="right"),r.isTop?n+=" top":r.isBottom&&(n+=" bottom")),n},update:function(n,r){var s=t.isPlainObject(n)?n:{location:n,placement:r};this._init({location:s.location||this.location,placement:s.placement!==void 0?s.placement:this.placement,onDraw:s.onDraw||this.onDraw,checkResize:s.checkResize||this.checkResize,width:s.width!==void 0?s.width:this.width,height:s.height!==void 0?s.height:this.height,rotationMode:s.rotationMode||this.rotationMode})},getBounds:function(n){t.console.assert(n,"A viewport must now be passed to Overlay.getBounds.");var r=this.width,s=this.height;if(r===null||s===null){var a=n.deltaPointsFromPixelsNoRotate(this.size,!0);r===null&&(r=a.x),s===null&&(s=a.y)}var o=this.location.clone();return this.adjust(o,new t.Point(r,s)),this._adjustBoundsForRotation(n,new t.Rect(o.x,o.y,r,s))},_adjustBoundsForRotation:function(n,r){if(!n||n.getRotation(!0)===0||this.rotationMode===t.OverlayRotationMode.EXACT)return r;if(this.rotationMode===t.OverlayRotationMode.BOUNDING_BOX){if(this.width===null||this.height===null)return r;var s=this._getOverlayPositionAndSize(n);return n.viewerElementToViewportRectangle(new t.Rect(s.position.x,s.position.y,s.size.x,s.size.y))}return r.rotate(-n.getRotation(!0),this._getPlacementPoint(r))}}}(i),function(t){t.Drawer=function(n){t.console.assert(n.viewer,"[Drawer] options.viewer is required");var r=arguments;if(t.isPlainObject(n)||(n={source:r[0],viewport:r[1],element:r[2]}),t.console.assert(n.viewport,"[Drawer] options.viewport is required"),t.console.assert(n.element,"[Drawer] options.element is required"),n.source&&t.console.error("[Drawer] options.source is no longer accepted; use TiledImage instead"),this.viewer=n.viewer,this.viewport=n.viewport,this.debugGridColor=typeof n.debugGridColor=="string"?[n.debugGridColor]:n.debugGridColor||t.DEFAULT_SETTINGS.debugGridColor,n.opacity&&t.console.error("[Drawer] options.opacity is no longer accepted; set the opacity on the TiledImage instead"),this.useCanvas=t.supportsCanvas&&(this.viewer?this.viewer.useCanvas:!0),this.container=t.getElement(n.element),this.canvas=t.makeNeutralElement(this.useCanvas?"canvas":"div"),this.context=this.useCanvas?this.canvas.getContext("2d"):null,this.sketchCanvas=null,this.sketchContext=null,this.element=this.container,this.container.dir="ltr",this.useCanvas){var s=this._calculateCanvasSize();this.canvas.width=s.x,this.canvas.height=s.y}this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.position="absolute",t.setElementOpacity(this.canvas,this.opacity,!0),t.setElementPointerEventsNone(this.canvas),t.setElementTouchActionNone(this.canvas),this.container.style.textAlign="left",this.container.appendChild(this.canvas),this._imageSmoothingEnabled=!0},t.Drawer.prototype={addOverlay:function(n,r,s,a){return t.console.error("drawer.addOverlay is deprecated. Use viewer.addOverlay instead."),this.viewer.addOverlay(n,r,s,a),this},updateOverlay:function(n,r,s){return t.console.error("drawer.updateOverlay is deprecated. Use viewer.updateOverlay instead."),this.viewer.updateOverlay(n,r,s),this},removeOverlay:function(n){return t.console.error("drawer.removeOverlay is deprecated. Use viewer.removeOverlay instead."),this.viewer.removeOverlay(n),this},clearOverlays:function(){return t.console.error("drawer.clearOverlays is deprecated. Use viewer.clearOverlays instead."),this.viewer.clearOverlays(),this},viewportCoordToDrawerCoord:function(n){var r=this.viewport.pixelFromPointNoRotate(n,!0);return new t.Point(r.x*t.pixelDensityRatio,r.y*t.pixelDensityRatio)},clipWithPolygons:function(n,r){if(this.useCanvas){var s=this._getContext(r);s.beginPath(),n.forEach(function(a){a.forEach(function(o,l){s[l===0?"moveTo":"lineTo"](o.x,o.y)})}),s.clip()}},setOpacity:function(n){t.console.error("drawer.setOpacity is deprecated. Use tiledImage.setOpacity instead.");for(var r=this.viewer.world,s=0;s<r.getItemCount();s++)r.getItemAt(s).setOpacity(n);return this},getOpacity:function(){t.console.error("drawer.getOpacity is deprecated. Use tiledImage.getOpacity instead.");for(var n=this.viewer.world,r=0,s=0;s<n.getItemCount();s++){var a=n.getItemAt(s).getOpacity();a>r&&(r=a)}return r},needsUpdate:function(){return t.console.error("[Drawer.needsUpdate] this function is deprecated. Use World.needsDraw instead."),this.viewer.world.needsDraw()},numTilesLoaded:function(){return t.console.error("[Drawer.numTilesLoaded] this function is deprecated. Use TileCache.numTilesLoaded instead."),this.viewer.tileCache.numTilesLoaded()},reset:function(){return t.console.error("[Drawer.reset] this function is deprecated. Use World.resetItems instead."),this.viewer.world.resetItems(),this},update:function(){return t.console.error("[Drawer.update] this function is deprecated. Use Drawer.clear and World.draw instead."),this.clear(),this.viewer.world.draw(),this},canRotate:function(){return this.useCanvas},destroy:function(){this.canvas.width=1,this.canvas.height=1,this.sketchCanvas=null,this.sketchContext=null},clear:function(){if(this.canvas.innerHTML="",this.useCanvas){var n=this._calculateCanvasSize();if((this.canvas.width!==n.x||this.canvas.height!==n.y)&&(this.canvas.width=n.x,this.canvas.height=n.y,this._updateImageSmoothingEnabled(this.context),this.sketchCanvas!==null)){var r=this._calculateSketchCanvasSize();this.sketchCanvas.width=r.x,this.sketchCanvas.height=r.y,this._updateImageSmoothingEnabled(this.sketchContext)}this._clear()}},_clear:function(n,r){if(this.useCanvas){var s=this._getContext(n);if(r)s.clearRect(r.x,r.y,r.width,r.height);else{var a=s.canvas;s.clearRect(0,0,a.width,a.height)}}},viewportToDrawerRectangle:function(n){var r=this.viewport.pixelFromPointNoRotate(n.getTopLeft(),!0),s=this.viewport.deltaPixelsFromPointsNoRotate(n.getSize(),!0);return new t.Rect(r.x*t.pixelDensityRatio,r.y*t.pixelDensityRatio,s.x*t.pixelDensityRatio,s.y*t.pixelDensityRatio)},drawTile:function(n,r,s,a,o,l,u){if(t.console.assert(n,"[Drawer.drawTile] tile is required"),t.console.assert(r,"[Drawer.drawTile] drawingHandler is required"),this.useCanvas){var c=this._getContext(s);a=a||1,n.drawCanvas(c,r,a,o,l,u)}else n.drawHTML(this.canvas)},_getContext:function(n){var r=this.context;if(n){if(this.sketchCanvas===null){this.sketchCanvas=document.createElement("canvas");var s=this._calculateSketchCanvasSize();if(this.sketchCanvas.width=s.x,this.sketchCanvas.height=s.y,this.sketchContext=this.sketchCanvas.getContext("2d"),this.viewport.getRotation()===0){var a=this;this.viewer.addHandler("rotate",function o(){if(a.viewport.getRotation()!==0){a.viewer.removeHandler("rotate",o);var l=a._calculateSketchCanvasSize();a.sketchCanvas.width=l.x,a.sketchCanvas.height=l.y}})}this._updateImageSmoothingEnabled(this.sketchContext)}r=this.sketchContext}return r},saveContext:function(n){this.useCanvas&&this._getContext(n).save()},restoreContext:function(n){this.useCanvas&&this._getContext(n).restore()},setClip:function(n,r){if(this.useCanvas){var s=this._getContext(r);s.beginPath(),s.rect(n.x,n.y,n.width,n.height),s.clip()}},drawRectangle:function(n,r,s){if(this.useCanvas){var a=this._getContext(s);a.save(),a.fillStyle=r,a.fillRect(n.x,n.y,n.width,n.height),a.restore()}},blendSketch:function(n,r,s,a){var o=n;if(t.isPlainObject(o)||(o={opacity:n,scale:r,translate:s,compositeOperation:a}),!(!this.useCanvas||!this.sketchCanvas)){n=o.opacity,a=o.compositeOperation;var l=o.bounds;if(this.context.save(),this.context.globalAlpha=n,a&&(this.context.globalCompositeOperation=a),l)l.x<0&&(l.width+=l.x,l.x=0),l.x+l.width>this.canvas.width&&(l.width=this.canvas.width-l.x),l.y<0&&(l.height+=l.y,l.y=0),l.y+l.height>this.canvas.height&&(l.height=this.canvas.height-l.y),this.context.drawImage(this.sketchCanvas,l.x,l.y,l.width,l.height,l.x,l.y,l.width,l.height);else{r=o.scale||1,s=o.translate;var u=s instanceof t.Point?s:new t.Point(0,0),c=0,h=0;if(s){var d=this.sketchCanvas.width-this.canvas.width,w=this.sketchCanvas.height-this.canvas.height;c=Math.round(d/2),h=Math.round(w/2)}this.context.drawImage(this.sketchCanvas,u.x-c*r,u.y-h*r,(this.canvas.width+2*c)*r,(this.canvas.height+2*h)*r,-c,-h,this.canvas.width+2*c,this.canvas.height+2*h)}this.context.restore()}},drawDebugInfo:function(n,r,s,a){if(this.useCanvas){var o=this.viewer.world.getIndexOfItem(a)%this.debugGridColor.length,l=this.context;l.save(),l.lineWidth=2*t.pixelDensityRatio,l.font="small-caps bold "+13*t.pixelDensityRatio+"px arial",l.strokeStyle=this.debugGridColor[o],l.fillStyle=this.debugGridColor[o],this.viewport.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:this.viewport.getRotation(!0)}),a.getRotation(!0)%360!==0&&this._offsetForRotation({degrees:a.getRotation(!0),point:a.viewport.pixelFromPointNoRotate(a._getRotationPoint(!0),!0)}),a.viewport.getRotation(!0)%360===0&&a.getRotation(!0)%360===0&&a._drawer.viewer.viewport.getFlip()&&a._drawer._flip(),l.strokeRect(n.position.x*t.pixelDensityRatio,n.position.y*t.pixelDensityRatio,n.size.x*t.pixelDensityRatio,n.size.y*t.pixelDensityRatio);var u=(n.position.x+n.size.x/2)*t.pixelDensityRatio,c=(n.position.y+n.size.y/2)*t.pixelDensityRatio;l.translate(u,c),l.rotate(Math.PI/180*-this.viewport.getRotation(!0)),l.translate(-u,-c),n.x===0&&n.y===0&&(l.fillText("Zoom: "+this.viewport.getZoom(),n.position.x*t.pixelDensityRatio,(n.position.y-30)*t.pixelDensityRatio),l.fillText("Pan: "+this.viewport.getBounds().toString(),n.position.x*t.pixelDensityRatio,(n.position.y-20)*t.pixelDensityRatio)),l.fillText("Level: "+n.level,(n.position.x+10)*t.pixelDensityRatio,(n.position.y+20)*t.pixelDensityRatio),l.fillText("Column: "+n.x,(n.position.x+10)*t.pixelDensityRatio,(n.position.y+30)*t.pixelDensityRatio),l.fillText("Row: "+n.y,(n.position.x+10)*t.pixelDensityRatio,(n.position.y+40)*t.pixelDensityRatio),l.fillText("Order: "+s+" of "+r,(n.position.x+10)*t.pixelDensityRatio,(n.position.y+50)*t.pixelDensityRatio),l.fillText("Size: "+n.size.toString(),(n.position.x+10)*t.pixelDensityRatio,(n.position.y+60)*t.pixelDensityRatio),l.fillText("Position: "+n.position.toString(),(n.position.x+10)*t.pixelDensityRatio,(n.position.y+70)*t.pixelDensityRatio),this.viewport.getRotation(!0)%360!==0&&this._restoreRotationChanges(),a.getRotation(!0)%360!==0&&this._restoreRotationChanges(),a.viewport.getRotation(!0)%360===0&&a.getRotation(!0)%360===0&&a._drawer.viewer.viewport.getFlip()&&a._drawer._flip(),l.restore()}},debugRect:function(n){if(this.useCanvas){var r=this.context;r.save(),r.lineWidth=2*t.pixelDensityRatio,r.strokeStyle=this.debugGridColor[0],r.fillStyle=this.debugGridColor[0],r.strokeRect(n.x*t.pixelDensityRatio,n.y*t.pixelDensityRatio,n.width*t.pixelDensityRatio,n.height*t.pixelDensityRatio),r.restore()}},setImageSmoothingEnabled:function(n){this.useCanvas&&(this._imageSmoothingEnabled=n,this._updateImageSmoothingEnabled(this.context),this.viewer.forceRedraw())},_updateImageSmoothingEnabled:function(n){n.msImageSmoothingEnabled=this._imageSmoothingEnabled,n.imageSmoothingEnabled=this._imageSmoothingEnabled},getCanvasSize:function(n){var r=this._getContext(n).canvas;return new t.Point(r.width,r.height)},getCanvasCenter:function(){return new t.Point(this.canvas.width/2,this.canvas.height/2)},_offsetForRotation:function(n){var r=n.point?n.point.times(t.pixelDensityRatio):this.getCanvasCenter(),s=this._getContext(n.useSketch);s.save(),s.translate(r.x,r.y),this.viewer.viewport.flipped?(s.rotate(Math.PI/180*-n.degrees),s.scale(-1,1)):s.rotate(Math.PI/180*n.degrees),s.translate(-r.x,-r.y)},_flip:function(n){n=n||{};var r=n.point?n.point.times(t.pixelDensityRatio):this.getCanvasCenter(),s=this._getContext(n.useSketch);s.translate(r.x,0),s.scale(-1,1),s.translate(-r.x,0)},_restoreRotationChanges:function(n){var r=this._getContext(n);r.restore()},_calculateCanvasSize:function(){var n=t.pixelDensityRatio,r=this.viewport.getContainerSize();return{x:Math.round(r.x*n),y:Math.round(r.y*n)}},_calculateSketchCanvasSize:function(){var n=this._calculateCanvasSize();if(this.viewport.getRotation()===0)return n;var r=Math.ceil(Math.sqrt(n.x*n.x+n.y*n.y));return{x:r,y:r}}}}(i),function(t){t.Viewport=function(n){var r=arguments;r.length&&r[0]instanceof t.Point&&(n={containerSize:r[0],contentSize:r[1],config:r[2]}),n.config&&(t.extend(!0,n,n.config),delete n.config),this._margins=t.extend({left:0,top:0,right:0,bottom:0},n.margins||{}),delete n.margins,n.initialDegrees=n.degrees,delete n.degrees,t.extend(!0,this,{containerSize:null,contentSize:null,zoomPoint:null,rotationPivot:null,viewer:null,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,maxZoomPixelRatio:t.DEFAULT_SETTINGS.maxZoomPixelRatio,visibilityRatio:t.DEFAULT_SETTINGS.visibilityRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,defaultZoomLevel:t.DEFAULT_SETTINGS.defaultZoomLevel,minZoomLevel:t.DEFAULT_SETTINGS.minZoomLevel,maxZoomLevel:t.DEFAULT_SETTINGS.maxZoomLevel,initialDegrees:t.DEFAULT_SETTINGS.degrees,flipped:t.DEFAULT_SETTINGS.flipped,homeFillsViewer:t.DEFAULT_SETTINGS.homeFillsViewer,silenceMultiImageWarnings:t.DEFAULT_SETTINGS.silenceMultiImageWarnings},n),this._updateContainerInnerSize(),this.centerSpringX=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.centerSpringY=new t.Spring({initial:0,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.zoomSpring=new t.Spring({exponential:!0,initial:1,springStiffness:this.springStiffness,animationTime:this.animationTime}),this.degreesSpring=new t.Spring({initial:n.initialDegrees,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,this._setContentBounds(new t.Rect(0,0,1,1),1),this.goHome(!0),this.update()},t.Viewport.prototype={get degrees(){return t.console.warn("Accessing [Viewport.degrees] is deprecated. Use viewport.getRotation instead."),this.getRotation()},set degrees(n){t.console.warn("Setting [Viewport.degrees] is deprecated. Use viewport.rotateTo, viewport.rotateBy, or viewport.setRotation instead."),this.rotateTo(n)},resetContentSize:function(n){return t.console.assert(n,"[Viewport.resetContentSize] contentSize is required"),t.console.assert(n instanceof t.Point,"[Viewport.resetContentSize] contentSize must be an OpenSeadragon.Point"),t.console.assert(n.x>0,"[Viewport.resetContentSize] contentSize.x must be greater than 0"),t.console.assert(n.y>0,"[Viewport.resetContentSize] contentSize.y must be greater than 0"),this._setContentBounds(new t.Rect(0,0,1,n.y/n.x),n.x),this},setHomeBounds:function(n,r){t.console.error("[Viewport.setHomeBounds] this function is deprecated; The content bounds should not be set manually."),this._setContentBounds(n,r)},_setContentBounds:function(n,r){t.console.assert(n,"[Viewport._setContentBounds] bounds is required"),t.console.assert(n instanceof t.Rect,"[Viewport._setContentBounds] bounds must be an OpenSeadragon.Rect"),t.console.assert(n.width>0,"[Viewport._setContentBounds] bounds.width must be greater than 0"),t.console.assert(n.height>0,"[Viewport._setContentBounds] bounds.height must be greater than 0"),this._contentBoundsNoRotate=n.clone(),this._contentSizeNoRotate=this._contentBoundsNoRotate.getSize().times(r),this._contentBounds=n.rotate(this.getRotation()).getBoundingBox(),this._contentSize=this._contentBounds.getSize().times(r),this._contentAspectRatio=this._contentSize.x/this._contentSize.y,this.viewer&&this.viewer.raiseEvent("reset-size",{contentSize:this._contentSizeNoRotate.clone(),contentFactor:r,homeBounds:this._contentBoundsNoRotate.clone(),contentBounds:this._contentBounds.clone()})},getHomeZoom:function(){if(this.defaultZoomLevel)return this.defaultZoomLevel;var n=this._contentAspectRatio/this.getAspectRatio(),r;return this.homeFillsViewer?r=n>=1?n:1:r=n>=1?1:n,r/this._contentBounds.width},getHomeBounds:function(){return this.getHomeBoundsNoRotate().rotate(-this.getRotation())},getHomeBoundsNoRotate:function(){var n=this._contentBounds.getCenter(),r=1/this.getHomeZoom(),s=r/this.getAspectRatio();return new t.Rect(n.x-r/2,n.y-s/2,r,s)},goHome:function(n){return this.viewer&&this.viewer.raiseEvent("home",{immediately:n}),this.fitBounds(this.getHomeBounds(),n)},getMinZoom:function(){var n=this.getHomeZoom(),r=this.minZoomLevel?this.minZoomLevel:this.minZoomImageRatio*n;return r},getMaxZoom:function(){var n=this.maxZoomLevel;return n||(n=this._contentSize.x*this.maxZoomPixelRatio/this._containerInnerSize.x,n/=this._contentBounds.width),Math.max(n,this.getHomeZoom())},getAspectRatio:function(){return this._containerInnerSize.x/this._containerInnerSize.y},getContainerSize:function(){return new t.Point(this.containerSize.x,this.containerSize.y)},getMargins:function(){return t.extend({},this._margins)},setMargins:function(n){t.console.assert(t.type(n)==="object","[Viewport.setMargins] margins must be an object"),this._margins=t.extend({left:0,top:0,right:0,bottom:0},n),this._updateContainerInnerSize(),this.viewer&&this.viewer.forceRedraw()},getBounds:function(n){return this.getBoundsNoRotate(n).rotate(-this.getRotation(n))},getBoundsNoRotate:function(n){var r=this.getCenter(n),s=1/this.getZoom(n),a=s/this.getAspectRatio();return new t.Rect(r.x-s/2,r.y-a/2,s,a)},getBoundsWithMargins:function(n){return this.getBoundsNoRotateWithMargins(n).rotate(-this.getRotation(n),this.getCenter(n))},getBoundsNoRotateWithMargins:function(n){var r=this.getBoundsNoRotate(n),s=this._containerInnerSize.x*this.getZoom(n);return r.x-=this._margins.left/s,r.y-=this._margins.top/s,r.width+=(this._margins.left+this._margins.right)/s,r.height+=(this._margins.top+this._margins.bottom)/s,r},getCenter:function(n){var r=new t.Point(this.centerSpringX.current.value,this.centerSpringY.current.value),s=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value),a,o,l,u,c,h,d,w;return n?r:this.zoomPoint?(a=this.pixelFromPoint(this.zoomPoint,!0),o=this.getZoom(),l=1/o,u=l/this.getAspectRatio(),c=new t.Rect(r.x-l/2,r.y-u/2,l,u),h=this._pixelFromPoint(this.zoomPoint,c),d=h.minus(a).rotate(-this.getRotation(!0)),w=d.divide(this._containerInnerSize.x*o),s.plus(w)):s},getZoom:function(n){return n?this.zoomSpring.current.value:this.zoomSpring.target.value},_applyZoomConstraints:function(n){return Math.max(Math.min(n,this.getMaxZoom()),this.getMinZoom())},_applyBoundaryConstraints:function(n){var r=this.viewportToViewerElementRectangle(n).getBoundingBox(),s=this.viewportToViewerElementRectangle(this._contentBoundsNoRotate).getBoundingBox(),a=!1,o=!1;if(!this.wrapHorizontal){var l=r.x+r.width,u=s.x+s.width,c,h,d;r.width>s.width?c=this.visibilityRatio*s.width:c=this.visibilityRatio*r.width,h=s.x-l+c,d=u-r.x-c,c>s.width?(r.x+=(h+d)/2,a=!0):d<0?(r.x+=d,a=!0):h>0&&(r.x+=h,a=!0)}if(!this.wrapVertical){var w=r.y+r.height,v=s.y+s.height,T,x,m;r.height>s.height?T=this.visibilityRatio*s.height:T=this.visibilityRatio*r.height,x=s.y-w+T,m=v-r.y-T,T>s.height?(r.y+=(x+m)/2,o=!0):m<0?(r.y+=m,o=!0):x>0&&(r.y+=x,o=!0)}var y=a||o,S=y?this.viewerElementToViewportRectangle(r):n.clone();return S.xConstrained=a,S.yConstrained=o,S.constraintApplied=y,S},_raiseConstraintsEvent:function(n){this.viewer&&this.viewer.raiseEvent("constrain",{immediately:n})},applyConstraints:function(n){var r=this.getZoom(),s=this._applyZoomConstraints(r);r!==s&&this.zoomTo(s,this.zoomPoint,n);var a=this.getConstrainedBounds(!1);return a.constraintApplied&&(this.fitBounds(a,n),this._raiseConstraintsEvent(n)),this},ensureVisible:function(n){return this.applyConstraints(n)},_fitBounds:function(n,r){r=r||{};var s=r.immediately||!1,a=r.constraints||!1,o=this.getAspectRatio(),l=n.getCenter(),u=new t.Rect(n.x,n.y,n.width,n.height,n.degrees+this.getRotation()).getBoundingBox();u.getAspectRatio()>=o?u.height=u.width/o:u.width=u.height*o,u.x=l.x-u.width/2,u.y=l.y-u.height/2;var c=1/u.width;if(s)return this.panTo(l,!0),this.zoomTo(c,null,!0),a&&this.applyConstraints(!0),this;var h=this.getCenter(!0),d=this.getZoom(!0);this.panTo(h,!0),this.zoomTo(d,null,!0);var w=this.getBounds(),v=this.getZoom();if(v===0||Math.abs(c/v-1)<1e-8)return this.zoomTo(c,null,!0),this.panTo(l,s),a&&this.applyConstraints(!1),this;if(a){this.panTo(l,!1),c=this._applyZoomConstraints(c),this.zoomTo(c,null,!1);var T=this.getConstrainedBounds();this.panTo(h,!0),this.zoomTo(d,null,!0),this.fitBounds(T)}else{var x=u.rotate(-this.getRotation()),m=x.getTopLeft().times(c).minus(w.getTopLeft().times(v)).divide(c-v);this.zoomTo(c,m,s)}return this},fitBounds:function(n,r){return this._fitBounds(n,{immediately:r,constraints:!1})},fitBoundsWithConstraints:function(n,r){return this._fitBounds(n,{immediately:r,constraints:!0})},fitVertically:function(n){var r=new t.Rect(this._contentBounds.x+this._contentBounds.width/2,this._contentBounds.y,0,this._contentBounds.height);return this.fitBounds(r,n)},fitHorizontally:function(n){var r=new t.Rect(this._contentBounds.x,this._contentBounds.y+this._contentBounds.height/2,this._contentBounds.width,0);return this.fitBounds(r,n)},getConstrainedBounds:function(n){var r,s;return r=this.getBounds(n),s=this._applyBoundaryConstraints(r),s},panBy:function(n,r){var s=new t.Point(this.centerSpringX.target.value,this.centerSpringY.target.value);return this.panTo(s.plus(n),r)},panTo:function(n,r){return r?(this.centerSpringX.resetTo(n.x),this.centerSpringY.resetTo(n.y)):(this.centerSpringX.springTo(n.x),this.centerSpringY.springTo(n.y)),this.viewer&&this.viewer.raiseEvent("pan",{center:n,immediately:r}),this},zoomBy:function(n,r,s){return this.zoomTo(this.zoomSpring.target.value*n,r,s)},zoomTo:function(n,r,s){var a=this;return this.zoomPoint=r instanceof t.Point&&!isNaN(r.x)&&!isNaN(r.y)?r:null,s?this._adjustCenterSpringsForZoomPoint(function(){a.zoomSpring.resetTo(n)}):this.zoomSpring.springTo(n),this.viewer&&this.viewer.raiseEvent("zoom",{zoom:n,refPoint:r,immediately:s}),this},setRotation:function(n,r){return this.rotateTo(n,null,r)},getRotation:function(n){return n?this.degreesSpring.current.value:this.degreesSpring.target.value},setRotationWithPivot:function(n,r,s){return this.rotateTo(n,r,s)},rotateTo:function(n,r,s){if(!this.viewer||!this.viewer.drawer.canRotate())return this;if(this.degreesSpring.target.value===n&&this.degreesSpring.isAtTargetValue())return this;if(this.rotationPivot=r instanceof t.Point&&!isNaN(r.x)&&!isNaN(r.y)?r:null,s)if(this.rotationPivot){var a=n-this._oldDegrees;if(!a)return this.rotationPivot=null,this;this._rotateAboutPivot(n)}else this.degreesSpring.resetTo(n);else{var o=t.positiveModulo(this.degreesSpring.current.value,360),l=t.positiveModulo(n,360),u=l-o;u>180?l-=360:u<-180&&(l+=360);var c=o-l;this.degreesSpring.resetTo(n+c),this.degreesSpring.springTo(n)}return this._setContentBounds(this.viewer.world.getHomeBounds(),this.viewer.world.getContentFactor()),this.viewer.forceRedraw(),this.viewer.raiseEvent("rotate",{degrees:n,immediately:!!s,pivot:this.rotationPivot||this.getCenter()}),this},rotateBy:function(n,r,s){return this.rotateTo(this.degreesSpring.target.value+n,r,s)},resize:function(n,r){var s=this.getBoundsNoRotate(),a=s,o;this.containerSize.x=n.x,this.containerSize.y=n.y,this._updateContainerInnerSize(),r&&(o=n.x/this.containerSize.x,a.width=s.width*o,a.height=a.width/this.getAspectRatio()),this.viewer&&this.viewer.raiseEvent("resize",{newContainerSize:n,maintain:r});var l=this.fitBounds(a,!0);return this.viewer&&this.viewer.raiseEvent("after-resize",{newContainerSize:n,maintain:r}),l},_updateContainerInnerSize:function(){this._containerInnerSize=new t.Point(Math.max(1,this.containerSize.x-(this._margins.left+this._margins.right)),Math.max(1,this.containerSize.y-(this._margins.top+this._margins.bottom)))},update:function(){var n=this;this._adjustCenterSpringsForZoomPoint(function(){n.zoomSpring.update()}),this.degreesSpring.isAtTargetValue()&&(this.rotationPivot=null),this.centerSpringX.update(),this.centerSpringY.update(),this.rotationPivot?this._rotateAboutPivot(!0):this.degreesSpring.update();var r=this.centerSpringX.current.value!==this._oldCenterX||this.centerSpringY.current.value!==this._oldCenterY||this.zoomSpring.current.value!==this._oldZoom||this.degreesSpring.current.value!==this._oldDegrees;return this._oldCenterX=this.centerSpringX.current.value,this._oldCenterY=this.centerSpringY.current.value,this._oldZoom=this.zoomSpring.current.value,this._oldDegrees=this.degreesSpring.current.value,r},_rotateAboutPivot:function(n){var r=n===!0,s=this.rotationPivot.minus(this.getCenter());this.centerSpringX.shiftBy(s.x),this.centerSpringY.shiftBy(s.y),r?this.degreesSpring.update():this.degreesSpring.resetTo(n);var a=this.degreesSpring.current.value-this._oldDegrees,o=s.rotate(a*-1).times(-1);this.centerSpringX.shiftBy(o.x),this.centerSpringY.shiftBy(o.y)},_adjustCenterSpringsForZoomPoint:function(n){if(this.zoomPoint){var r=this.pixelFromPoint(this.zoomPoint,!0);n();var s=this.pixelFromPoint(this.zoomPoint,!0),a=s.minus(r),o=this.deltaPointsFromPixels(a,!0);this.centerSpringX.shiftBy(o.x),this.centerSpringY.shiftBy(o.y),this.zoomSpring.isAtTargetValue()&&(this.zoomPoint=null)}else n()},deltaPixelsFromPointsNoRotate:function(n,r){return n.times(this._containerInnerSize.x*this.getZoom(r))},deltaPixelsFromPoints:function(n,r){return this.deltaPixelsFromPointsNoRotate(n.rotate(this.getRotation(r)),r)},deltaPointsFromPixelsNoRotate:function(n,r){return n.divide(this._containerInnerSize.x*this.getZoom(r))},deltaPointsFromPixels:function(n,r){return this.deltaPointsFromPixelsNoRotate(n,r).rotate(-this.getRotation(r))},pixelFromPointNoRotate:function(n,r){return this._pixelFromPointNoRotate(n,this.getBoundsNoRotate(r))},pixelFromPoint:function(n,r){return this._pixelFromPoint(n,this.getBoundsNoRotate(r))},_pixelFromPointNoRotate:function(n,r){return n.minus(r.getTopLeft()).times(this._containerInnerSize.x/r.width).plus(new t.Point(this._margins.left,this._margins.top))},_pixelFromPoint:function(n,r){return this._pixelFromPointNoRotate(n.rotate(this.getRotation(!0),this.getCenter(!0)),r)},pointFromPixelNoRotate:function(n,r){var s=this.getBoundsNoRotate(r);return n.minus(new t.Point(this._margins.left,this._margins.top)).divide(this._containerInnerSize.x/s.width).plus(s.getTopLeft())},pointFromPixel:function(n,r){return this.pointFromPixelNoRotate(n,r).rotate(-this.getRotation(r),this.getCenter(r))},_viewportToImageDelta:function(n,r){var s=this._contentBoundsNoRotate.width;return new t.Point(n*this._contentSizeNoRotate.x/s,r*this._contentSizeNoRotate.x/s)},viewportToImageCoordinates:function(n,r){if(n instanceof t.Point)return this.viewportToImageCoordinates(n.x,n.y);if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.viewportToImageCoordinates] is not accurate with multi-image; use TiledImage.viewportToImageCoordinates instead.");else if(s===1){var a=this.viewer.world.getItemAt(0);return a.viewportToImageCoordinates(n,r,!0)}}return this._viewportToImageDelta(n-this._contentBoundsNoRotate.x,r-this._contentBoundsNoRotate.y)},_imageToViewportDelta:function(n,r){var s=this._contentBoundsNoRotate.width;return new t.Point(n/this._contentSizeNoRotate.x*s,r/this._contentSizeNoRotate.x*s)},imageToViewportCoordinates:function(n,r){if(n instanceof t.Point)return this.imageToViewportCoordinates(n.x,n.y);if(this.viewer){var s=this.viewer.world.getItemCount();if(s>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.imageToViewportCoordinates] is not accurate with multi-image; use TiledImage.imageToViewportCoordinates instead.");else if(s===1){var a=this.viewer.world.getItemAt(0);return a.imageToViewportCoordinates(n,r,!0)}}var o=this._imageToViewportDelta(n,r);return o.x+=this._contentBoundsNoRotate.x,o.y+=this._contentBoundsNoRotate.y,o},imageToViewportRectangle:function(n,r,s,a){var o=n;if(o instanceof t.Rect||(o=new t.Rect(n,r,s,a)),this.viewer){var l=this.viewer.world.getItemCount();if(l>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.imageToViewportRectangle] is not accurate with multi-image; use TiledImage.imageToViewportRectangle instead.");else if(l===1){var u=this.viewer.world.getItemAt(0);return u.imageToViewportRectangle(n,r,s,a,!0)}}var c=this.imageToViewportCoordinates(o.x,o.y),h=this._imageToViewportDelta(o.width,o.height);return new t.Rect(c.x,c.y,h.x,h.y,o.degrees)},viewportToImageRectangle:function(n,r,s,a){var o=n;if(o instanceof t.Rect||(o=new t.Rect(n,r,s,a)),this.viewer){var l=this.viewer.world.getItemCount();if(l>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.viewportToImageRectangle] is not accurate with multi-image; use TiledImage.viewportToImageRectangle instead.");else if(l===1){var u=this.viewer.world.getItemAt(0);return u.viewportToImageRectangle(n,r,s,a,!0)}}var c=this.viewportToImageCoordinates(o.x,o.y),h=this._viewportToImageDelta(o.width,o.height);return new t.Rect(c.x,c.y,h.x,h.y,o.degrees)},viewerElementToImageCoordinates:function(n){var r=this.pointFromPixel(n,!0);return this.viewportToImageCoordinates(r)},imageToViewerElementCoordinates:function(n){var r=this.imageToViewportCoordinates(n);return this.pixelFromPoint(r,!0)},windowToImageCoordinates:function(n){t.console.assert(this.viewer,"[Viewport.windowToImageCoordinates] the viewport must have a viewer.");var r=n.minus(t.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(r)},imageToWindowCoordinates:function(n){t.console.assert(this.viewer,"[Viewport.imageToWindowCoordinates] the viewport must have a viewer.");var r=this.imageToViewerElementCoordinates(n);return r.plus(t.getElementPosition(this.viewer.element))},viewerElementToViewportCoordinates:function(n){return this.pointFromPixel(n,!0)},viewportToViewerElementCoordinates:function(n){return this.pixelFromPoint(n,!0)},viewerElementToViewportRectangle:function(n){return t.Rect.fromSummits(this.pointFromPixel(n.getTopLeft(),!0),this.pointFromPixel(n.getTopRight(),!0),this.pointFromPixel(n.getBottomLeft(),!0))},viewportToViewerElementRectangle:function(n){return t.Rect.fromSummits(this.pixelFromPoint(n.getTopLeft(),!0),this.pixelFromPoint(n.getTopRight(),!0),this.pixelFromPoint(n.getBottomLeft(),!0))},windowToViewportCoordinates:function(n){t.console.assert(this.viewer,"[Viewport.windowToViewportCoordinates] the viewport must have a viewer.");var r=n.minus(t.getElementPosition(this.viewer.element));return this.viewerElementToViewportCoordinates(r)},viewportToWindowCoordinates:function(n){t.console.assert(this.viewer,"[Viewport.viewportToWindowCoordinates] the viewport must have a viewer.");var r=this.viewportToViewerElementCoordinates(n);return r.plus(t.getElementPosition(this.viewer.element))},viewportToImageZoom:function(n){if(this.viewer){var r=this.viewer.world.getItemCount();if(r>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.viewportToImageZoom] is not accurate with multi-image.");else if(r===1){var s=this.viewer.world.getItemAt(0);return s.viewportToImageZoom(n)}}var a=this._contentSizeNoRotate.x,o=this._containerInnerSize.x,l=this._contentBoundsNoRotate.width,u=o/a*l;return n*u},imageToViewportZoom:function(n){if(this.viewer){var r=this.viewer.world.getItemCount();if(r>1)this.silenceMultiImageWarnings||t.console.error("[Viewport.imageToViewportZoom] is not accurate with multi-image.");else if(r===1){var s=this.viewer.world.getItemAt(0);return s.imageToViewportZoom(n)}}var a=this._contentSizeNoRotate.x,o=this._containerInnerSize.x,l=this._contentBoundsNoRotate.width,u=a/o/l;return n*u},toggleFlip:function(){return this.setFlip(!this.getFlip()),this},getFlip:function(){return this.flipped},setFlip:function(n){return this.flipped===n?this:(this.flipped=n,this.viewer.navigator&&this.viewer.navigator.setFlip(this.getFlip()),this.viewer.forceRedraw(),this.viewer.raiseEvent("flip",{flipped:n}),this)}}}(i),function(t){t.TiledImage=function(o){var l=this;t.console.assert(o.tileCache,"[TiledImage] options.tileCache is required"),t.console.assert(o.drawer,"[TiledImage] options.drawer is required"),t.console.assert(o.viewer,"[TiledImage] options.viewer is required"),t.console.assert(o.imageLoader,"[TiledImage] options.imageLoader is required"),t.console.assert(o.source,"[TiledImage] options.source is required"),t.console.assert(!o.clip||o.clip instanceof t.Rect,"[TiledImage] options.clip must be an OpenSeadragon.Rect if present"),t.EventSource.call(this),this._tileCache=o.tileCache,delete o.tileCache,this._drawer=o.drawer,delete o.drawer,this._imageLoader=o.imageLoader,delete o.imageLoader,o.clip instanceof t.Rect&&(this._clip=o.clip.clone()),delete o.clip;var u=o.x||0;delete o.x;var c=o.y||0;delete o.y,this.normHeight=o.source.dimensions.y/o.source.dimensions.x,this.contentAspectX=o.source.dimensions.x/o.source.dimensions.y;var h=1;o.width?(h=o.width,delete o.width,o.height&&(t.console.error("specifying both width and height to a tiledImage is not supported"),delete o.height)):o.height&&(h=o.height/this.normHeight,delete o.height);var d=o.fitBounds;delete o.fitBounds;var w=o.fitBoundsPlacement||i.Placement.CENTER;delete o.fitBoundsPlacement;var v=o.degrees||0;delete o.degrees;var T=o.ajaxHeaders;delete o.ajaxHeaders,t.extend(!0,this,{viewer:null,tilesMatrix:{},coverage:{},loadingCoverage:{},lastDrawn:[],lastResetTime:0,_midDraw:!1,_needsDraw:!0,_hasOpaqueTile:!1,_tilesLoading:0,springStiffness:t.DEFAULT_SETTINGS.springStiffness,animationTime:t.DEFAULT_SETTINGS.animationTime,minZoomImageRatio:t.DEFAULT_SETTINGS.minZoomImageRatio,wrapHorizontal:t.DEFAULT_SETTINGS.wrapHorizontal,wrapVertical:t.DEFAULT_SETTINGS.wrapVertical,immediateRender:t.DEFAULT_SETTINGS.immediateRender,blendTime:t.DEFAULT_SETTINGS.blendTime,alwaysBlend:t.DEFAULT_SETTINGS.alwaysBlend,minPixelRatio:t.DEFAULT_SETTINGS.minPixelRatio,smoothTileEdgesMinZoom:t.DEFAULT_SETTINGS.smoothTileEdgesMinZoom,iOSDevice:t.DEFAULT_SETTINGS.iOSDevice,debugMode:t.DEFAULT_SETTINGS.debugMode,crossOriginPolicy:t.DEFAULT_SETTINGS.crossOriginPolicy,ajaxWithCredentials:t.DEFAULT_SETTINGS.ajaxWithCredentials,placeholderFillStyle:t.DEFAULT_SETTINGS.placeholderFillStyle,opacity:t.DEFAULT_SETTINGS.opacity,preload:t.DEFAULT_SETTINGS.preload,compositeOperation:t.DEFAULT_SETTINGS.compositeOperation,subPixelRoundingForTransparency:t.DEFAULT_SETTINGS.subPixelRoundingForTransparency},o),this._preload=this.preload,delete this.preload,this._fullyLoaded=!1,this._xSpring=new t.Spring({initial:u,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._ySpring=new t.Spring({initial:c,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._scaleSpring=new t.Spring({initial:h,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._degreesSpring=new t.Spring({initial:v,springStiffness:this.springStiffness,animationTime:this.animationTime}),this._updateForScale(),d&&this.fitBounds(d,w,!0),this._drawingHandler=function(x){l.viewer.raiseEvent("tile-drawing",t.extend({tiledImage:l},x))},this._ownAjaxHeaders={},this.setAjaxHeaders(T,!1)},t.extend(t.TiledImage.prototype,t.EventSource.prototype,{needsDraw:function(){return this._needsDraw},getFullyLoaded:function(){return this._fullyLoaded},_setFullyLoaded:function(o){o!==this._fullyLoaded&&(this._fullyLoaded=o,this.raiseEvent("fully-loaded-change",{fullyLoaded:this._fullyLoaded}))},reset:function(){this._tileCache.clearTilesFor(this),this.lastResetTime=t.now(),this._needsDraw=!0},update:function(){var o=this._xSpring.update(),l=this._ySpring.update(),u=this._scaleSpring.update(),c=this._degreesSpring.update();return o||l||u||c?(this._updateForScale(),this._needsDraw=!0,!0):!1},draw:function(){this.opacity!==0||this._preload?(this._midDraw=!0,this._updateViewport(),this._midDraw=!1):this._needsDraw=!1},destroy:function(){this.reset(),this.source.destroy&&this.source.destroy()},getBounds:function(o){return this.getBoundsNoRotate(o).rotate(this.getRotation(o),this._getRotationPoint(o))},getBoundsNoRotate:function(o){return o?new t.Rect(this._xSpring.current.value,this._ySpring.current.value,this._worldWidthCurrent,this._worldHeightCurrent):new t.Rect(this._xSpring.target.value,this._ySpring.target.value,this._worldWidthTarget,this._worldHeightTarget)},getWorldBounds:function(){return t.console.error("[TiledImage.getWorldBounds] is deprecated; use TiledImage.getBounds instead"),this.getBounds()},getClippedBounds:function(o){var l=this.getBoundsNoRotate(o);if(this._clip){var u=o?this._worldWidthCurrent:this._worldWidthTarget,c=u/this.source.dimensions.x,h=this._clip.times(c);l=new t.Rect(l.x+h.x,l.y+h.y,h.width,h.height)}return l.rotate(this.getRotation(o),this._getRotationPoint(o))},getTileBounds:function(o,l,u){var c=this.source.getNumTiles(o),h=(c.x+l%c.x)%c.x,d=(c.y+u%c.y)%c.y,w=this.source.getTileBounds(o,h,d);return this.getFlip()&&(w.x=1-w.x-w.width),w.x+=(l-h)/c.x,w.y+=this._worldHeightCurrent/this._worldWidthCurrent*((u-d)/c.y),w},getContentSize:function(){return new t.Point(this.source.dimensions.x,this.source.dimensions.y)},getSizeInWindowCoordinates:function(){var o=this.imageToWindowCoordinates(new t.Point(0,0)),l=this.imageToWindowCoordinates(this.getContentSize());return new t.Point(l.x-o.x,l.y-o.y)},_viewportToImageDelta:function(o,l,u){var c=u?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t.Point(o*(this.source.dimensions.x/c),l*(this.source.dimensions.y*this.contentAspectX/c))},viewportToImageCoordinates:function(o,l,u){var c;return o instanceof t.Point?(u=l,c=o):c=new t.Point(o,l),c=c.rotate(-this.getRotation(u),this._getRotationPoint(u)),u?this._viewportToImageDelta(c.x-this._xSpring.current.value,c.y-this._ySpring.current.value):this._viewportToImageDelta(c.x-this._xSpring.target.value,c.y-this._ySpring.target.value)},_imageToViewportDelta:function(o,l,u){var c=u?this._scaleSpring.current.value:this._scaleSpring.target.value;return new t.Point(o/this.source.dimensions.x*c,l/this.source.dimensions.y/this.contentAspectX*c)},imageToViewportCoordinates:function(o,l,u){o instanceof t.Point&&(u=l,l=o.y,o=o.x);var c=this._imageToViewportDelta(o,l);return u?(c.x+=this._xSpring.current.value,c.y+=this._ySpring.current.value):(c.x+=this._xSpring.target.value,c.y+=this._ySpring.target.value),c.rotate(this.getRotation(u),this._getRotationPoint(u))},imageToViewportRectangle:function(o,l,u,c,h){var d=o;d instanceof t.Rect?h=l:d=new t.Rect(o,l,u,c);var w=this.imageToViewportCoordinates(d.getTopLeft(),h),v=this._imageToViewportDelta(d.width,d.height,h);return new t.Rect(w.x,w.y,v.x,v.y,d.degrees+this.getRotation(h))},viewportToImageRectangle:function(o,l,u,c,h){var d=o;o instanceof t.Rect?h=l:d=new t.Rect(o,l,u,c);var w=this.viewportToImageCoordinates(d.getTopLeft(),h),v=this._viewportToImageDelta(d.width,d.height,h);return new t.Rect(w.x,w.y,v.x,v.y,d.degrees-this.getRotation(h))},viewerElementToImageCoordinates:function(o){var l=this.viewport.pointFromPixel(o,!0);return this.viewportToImageCoordinates(l)},imageToViewerElementCoordinates:function(o){var l=this.imageToViewportCoordinates(o);return this.viewport.pixelFromPoint(l,!0)},windowToImageCoordinates:function(o){var l=o.minus(i.getElementPosition(this.viewer.element));return this.viewerElementToImageCoordinates(l)},imageToWindowCoordinates:function(o){var l=this.imageToViewerElementCoordinates(o);return l.plus(i.getElementPosition(this.viewer.element))},_viewportToTiledImageRectangle:function(o){var l=this._scaleSpring.current.value;return o=o.rotate(-this.getRotation(!0),this._getRotationPoint(!0)),new t.Rect((o.x-this._xSpring.current.value)/l,(o.y-this._ySpring.current.value)/l,o.width/l,o.height/l,o.degrees)},viewportToImageZoom:function(o){var l=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return l*o},imageToViewportZoom:function(o){var l=this._scaleSpring.current.value*this.viewport._containerInnerSize.x/this.source.dimensions.x;return o/l},setPosition:function(o,l){var u=this._xSpring.target.value===o.x&&this._ySpring.target.value===o.y;if(l){if(u&&this._xSpring.current.value===o.x&&this._ySpring.current.value===o.y)return;this._xSpring.resetTo(o.x),this._ySpring.resetTo(o.y),this._needsDraw=!0}else{if(u)return;this._xSpring.springTo(o.x),this._ySpring.springTo(o.y),this._needsDraw=!0}u||this._raiseBoundsChange()},setWidth:function(o,l){this._setScale(o,l)},setHeight:function(o,l){this._setScale(o/this.normHeight,l)},setCroppingPolygons:function(o){var l=function(c){return c instanceof t.Point||typeof c.x=="number"&&typeof c.y=="number"},u=function(c){return c.map(function(h){try{if(l(h))return{x:h.x,y:h.y};throw new Error}catch{throw new Error("A Provided cropping polygon point is not supported")}})};try{if(!t.isArray(o))throw new Error("Provided cropping polygon is not an array");this._croppingPolygons=o.map(function(c){return u(c)})}catch(c){t.console.error("[TiledImage.setCroppingPolygons] Cropping polygon format not supported"),t.console.error(c),this._croppingPolygons=null}},resetCroppingPolygons:function(){this._croppingPolygons=null},fitBounds:function(o,l,u){l=l||t.Placement.CENTER;var c=t.Placement.properties[l],h=this.contentAspectX,d=0,w=0,v=1,T=1;if(this._clip&&(h=this._clip.getAspectRatio(),v=this._clip.width/this.source.dimensions.x,T=this._clip.height/this.source.dimensions.y,o.getAspectRatio()>h?(d=this._clip.x/this._clip.height*o.height,w=this._clip.y/this._clip.height*o.height):(d=this._clip.x/this._clip.width*o.width,w=this._clip.y/this._clip.width*o.width)),o.getAspectRatio()>h){var x=o.height/T,m=0;c.isHorizontallyCentered?m=(o.width-o.height*h)/2:c.isRight&&(m=o.width-o.height*h),this.setPosition(new t.Point(o.x-d+m,o.y-w),u),this.setHeight(x,u)}else{var y=o.width/v,S=0;c.isVerticallyCentered?S=(o.height-o.width/h)/2:c.isBottom&&(S=o.height-o.width/h),this.setPosition(new t.Point(o.x-d,o.y-w+S),u),this.setWidth(y,u)}},getClip:function(){return this._clip?this._clip.clone():null},setClip:function(o){t.console.assert(!o||o instanceof t.Rect,"[TiledImage.setClip] newClip must be an OpenSeadragon.Rect or null"),o instanceof t.Rect?this._clip=o.clone():this._clip=null,this._needsDraw=!0,this.raiseEvent("clip-change")},getFlip:function(){return!!this.flipped},setFlip:function(o){this.flipped=!!o,this._needsDraw=!0,this._raiseBoundsChange()},getOpacity:function(){return this.opacity},setOpacity:function(o){o!==this.opacity&&(this.opacity=o,this._needsDraw=!0,this.raiseEvent("opacity-change",{opacity:this.opacity}))},getPreload:function(){return this._preload},setPreload:function(o){this._preload=!!o,this._needsDraw=!0},getRotation:function(o){return o?this._degreesSpring.current.value:this._degreesSpring.target.value},setRotation:function(o,l){this._degreesSpring.target.value===o&&this._degreesSpring.isAtTargetValue()||(l?this._degreesSpring.resetTo(o):this._degreesSpring.springTo(o),this._needsDraw=!0,this._raiseBoundsChange())},_getRotationPoint:function(o){return this.getBoundsNoRotate(o).getCenter()},getCompositeOperation:function(){return this.compositeOperation},setCompositeOperation:function(o){o!==this.compositeOperation&&(this.compositeOperation=o,this._needsDraw=!0,this.raiseEvent("composite-operation-change",{compositeOperation:this.compositeOperation}))},setAjaxHeaders:function(o,l){if(o===null&&(o={}),!t.isPlainObject(o)){console.error("[TiledImage.setAjaxHeaders] Ignoring invalid headers, must be a plain object");return}this._ownAjaxHeaders=o,this._updateAjaxHeaders(l)},_updateAjaxHeaders:function(o){if(o===void 0&&(o=!0),t.isPlainObject(this.viewer.ajaxHeaders)?this.ajaxHeaders=t.extend({},this.viewer.ajaxHeaders,this._ownAjaxHeaders):this.ajaxHeaders=this._ownAjaxHeaders,o){var l,u,c,h;for(var d in this.tilesMatrix){l=this.source.getNumTiles(d);for(var w in this.tilesMatrix[d]){u=(l.x+w%l.x)%l.x;for(var v in this.tilesMatrix[d][w])if(c=(l.y+v%l.y)%l.y,h=this.tilesMatrix[d][w][v],h.loadWithAjax=this.loadTilesWithAjax,h.loadWithAjax){var T=this.source.getTileAjaxHeaders(d,u,c);h.ajaxHeaders=t.extend({},this.ajaxHeaders,T)}else h.ajaxHeaders=null}}for(var x=0;x<this._imageLoader.jobQueue.length;x++){var m=this._imageLoader.jobQueue[x];m.loadWithAjax=m.tile.loadWithAjax,m.ajaxHeaders=m.tile.loadWithAjax?m.tile.ajaxHeaders:null}}},_setScale:function(o,l){var u=this._scaleSpring.target.value===o;if(l){if(u&&this._scaleSpring.current.value===o)return;this._scaleSpring.resetTo(o),this._updateForScale(),this._needsDraw=!0}else{if(u)return;this._scaleSpring.springTo(o),this._updateForScale(),this._needsDraw=!0}u||this._raiseBoundsChange()},_updateForScale:function(){this._worldWidthTarget=this._scaleSpring.target.value,this._worldHeightTarget=this.normHeight*this._scaleSpring.target.value,this._worldWidthCurrent=this._scaleSpring.current.value,this._worldHeightCurrent=this.normHeight*this._scaleSpring.current.value},_raiseBoundsChange:function(){this.raiseEvent("bounds-change")},_isBottomItem:function(){return this.viewer.world.getItemAt(0)===this},_getLevelsInterval:function(){var o=Math.max(this.source.minLevel,Math.floor(Math.log(this.minZoomImageRatio)/Math.log(2))),l=this.viewport.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(0),!0).x*this._scaleSpring.current.value,u=Math.min(Math.abs(this.source.maxLevel),Math.abs(Math.floor(Math.log(l/this.minPixelRatio)/Math.log(2))));return u=Math.max(u,this.source.minLevel||0),o=Math.min(o,u),{lowestLevel:o,highestLevel:u}},_updateViewport:function(){for(this._needsDraw=!1,this._tilesLoading=0,this.loadingCoverage={};this.lastDrawn.length>0;){var o=this.lastDrawn.pop();o.beingDrawn=!1}var l=this.viewport,u=this._viewportToTiledImageRectangle(l.getBoundsWithMargins(!0));if(!this.wrapHorizontal&&!this.wrapVertical){var c=this._viewportToTiledImageRectangle(this.getClippedBounds(!0));if(u=u.intersection(c),u===null)return}for(var h=this._getLevelsInterval(),d=h.lowestLevel,w=h.highestLevel,v=null,T=!1,x=t.now(),m=w;m>=d;m--){var y=!1,S=l.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(m),!0).x*this._scaleSpring.current.value;if(m===d||!T&&S>=this.minPixelRatio)y=!0,T=!0;else if(!T)continue;var _=l.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(m),!1).x*this._scaleSpring.current.value,b=l.deltaPixelsFromPointsNoRotate(this.source.getPixelRatio(Math.max(this.source.getClosestLevel(),0)),!1).x*this._scaleSpring.current.value,O=this.immediateRender?1:b,z=Math.min(1,(S-.5)/.5),M=O/Math.abs(O-_);if(v=this._updateLevel(T,y,m,z,M,u,x,v),this._providesCoverage(this.coverage,m))break}this._drawTiles(this.lastDrawn),v&&!v.context2D?(this._loadTile(v,x),this._needsDraw=!0,this._setFullyLoaded(!1)):this._setFullyLoaded(this._tilesLoading===0)},_getCornerTiles:function(o,l,u){var c,h;this.wrapHorizontal?(c=t.positiveModulo(l.x,1),h=t.positiveModulo(u.x,1)):(c=Math.max(0,l.x),h=Math.min(1,u.x));var d,w,v=1/this.source.aspectRatio;this.wrapVertical?(d=t.positiveModulo(l.y,v),w=t.positiveModulo(u.y,v)):(d=Math.max(0,l.y),w=Math.min(v,u.y));var T=this.source.getTileAtPoint(o,new t.Point(c,d)),x=this.source.getTileAtPoint(o,new t.Point(h,w)),m=this.source.getNumTiles(o);return this.wrapHorizontal&&(T.x+=m.x*Math.floor(l.x),x.x+=m.x*Math.floor(u.x)),this.wrapVertical&&(T.y+=m.y*Math.floor(l.y/v),x.y+=m.y*Math.floor(u.y/v)),{topLeft:T,bottomRight:x}},_updateLevel:function(o,l,u,c,h,d,w,v){var T=d.getBoundingBox().getTopLeft(),x=d.getBoundingBox().getBottomRight();this.viewer&&this.viewer.raiseEvent("update-level",{tiledImage:this,havedrawn:o,level:u,opacity:c,visibility:h,drawArea:d,topleft:T,bottomright:x,currenttime:w,best:v}),this._resetCoverage(this.coverage,u),this._resetCoverage(this.loadingCoverage,u);var m=this._getCornerTiles(u,T,x),y=m.topLeft,S=m.bottomRight,_=this.source.getNumTiles(u),b=this.viewport.pixelFromPoint(this.viewport.getCenter());this.getFlip()&&(S.x+=1,this.wrapHorizontal||(S.x=Math.min(S.x,_.x-1)));for(var O=y.x;O<=S.x;O++)for(var z=y.y;z<=S.y;z++){var M;if(this.getFlip()){var U=(_.x+O%_.x)%_.x;M=O+_.x-U-U-1}else M=O;d.intersection(this.getTileBounds(u,M,z))!==null&&(v=this._updateTile(l,o,M,z,u,c,h,b,_,w,v))}return v},_updateTile:function(o,l,u,c,h,d,w,v,T,x,m){var y=this._getTile(u,c,h,x,T,this._worldWidthCurrent,this._worldHeightCurrent),S=l;this.viewer&&this.viewer.raiseEvent("update-tile",{tiledImage:this,tile:y}),this._setCoverage(this.coverage,h,u,c,!1);var _=y.loaded||y.loading||this._isCovered(this.loadingCoverage,h,u,c);if(this._setCoverage(this.loadingCoverage,h,u,c,_),!y.exists||(o&&!S&&(this._isCovered(this.coverage,h,u,c)?this._setCoverage(this.coverage,h,u,c,!0):S=!0),!S))return m;if(this._positionTile(y,this.source.tileOverlap,this.viewport,v,w),!y.loaded)if(y.context2D)this._setTileLoaded(y);else{var b=this._tileCache.getImageRecord(y.cacheKey);b&&this._setTileLoaded(y,b.getData())}if(y.loaded){var O=this._blendTile(y,u,c,h,d,x);O&&(this._needsDraw=!0)}else y.loading?this._tilesLoading++:_||(m=this._compareTiles(m,y));return m},_getTile:function(o,l,u,c,h,d,w){var v,T,x,m,y,S,_,b,O,z,M=this.tilesMatrix,U=this.source;return M[u]||(M[u]={}),M[u][o]||(M[u][o]={}),(!M[u][o][l]||!M[u][o][l].flipped!=!this.flipped)&&(v=(h.x+o%h.x)%h.x,T=(h.y+l%h.y)%h.y,x=this.getTileBounds(u,o,l),m=U.getTileBounds(u,v,T,!0),y=U.tileExists(u,v,T),S=U.getTileUrl(u,v,T),_=U.getTilePostData(u,v,T),this.loadTilesWithAjax?(b=U.getTileAjaxHeaders(u,v,T),t.isPlainObject(this.ajaxHeaders)&&(b=t.extend({},this.ajaxHeaders,b))):b=null,O=U.getContext2D?U.getContext2D(u,v,T):void 0,z=new t.Tile(u,o,l,x,y,S,O,this.loadTilesWithAjax,b,m,_,U.getTileHashKey(u,v,T,S,b,_)),this.getFlip()?v===0&&(z.isRightMost=!0):v===h.x-1&&(z.isRightMost=!0),T===h.y-1&&(z.isBottomMost=!0),z.flipped=this.flipped,M[u][o][l]=z),z=M[u][o][l],z.lastTouchTime=c,z},_loadTile:function(o,l){var u=this;o.loading=!0,this._imageLoader.addJob({src:o.getUrl(),tile:o,source:this.source,postData:o.postData,loadWithAjax:o.loadWithAjax,ajaxHeaders:o.ajaxHeaders,crossOriginPolicy:this.crossOriginPolicy,ajaxWithCredentials:this.ajaxWithCredentials,callback:function(c,h,d){u._onTileLoad(o,l,c,h,d)},abort:function(){o.loading=!1}})},_onTileLoad:function(o,l,u,c,h){if(u)o.exists=!0;else{t.console.error("Tile %s failed to load: %s - error: %s",o,o.getUrl(),c),this.viewer.raiseEvent("tile-load-failed",{tile:o,tiledImage:this,time:l,message:c,tileRequest:h}),o.loading=!1,o.exists=!1;return}if(l<this.lastResetTime){t.console.warn("Ignoring tile %s loaded before reset: %s",o,o.getUrl()),o.loading=!1;return}var d=this,w=function(){var v=d.source,T=v.getClosestLevel();d._setTileLoaded(o,u,T,h)};this._midDraw?window.setTimeout(w,1):w()},_setTileLoaded:function(o,l,u,c){var h=0,d=!1,w=this;function v(){return d&&t.console.error("Event 'tile-loaded' argument getCompletionCallback must be called synchronously. Its return value should be called asynchronously."),h++,T}function T(){h--,h===0&&(o.loading=!1,o.loaded=!0,o.hasTransparency=w.source.hasTransparency(o.context2D,o.getUrl(),o.ajaxHeaders,o.postData),o.context2D||w._tileCache.cacheTile({data:l,tile:o,cutoff:u,tiledImage:w}),w._needsDraw=!0)}var x=v();this.viewer.raiseEvent("tile-loaded",{tile:o,tiledImage:this,tileRequest:c,get image(){return t.console.error("[tile-loaded] event 'image' has been deprecated. Use 'data' property instead."),l},data:l,getCompletionCallback:v}),d=!0,x()},_positionTile:function(o,l,u,c,h){var d=o.bounds.getTopLeft();d.x*=this._scaleSpring.current.value,d.y*=this._scaleSpring.current.value,d.x+=this._xSpring.current.value,d.y+=this._ySpring.current.value;var w=o.bounds.getSize();w.x*=this._scaleSpring.current.value,w.y*=this._scaleSpring.current.value;var v=u.pixelFromPointNoRotate(d,!0),T=u.pixelFromPointNoRotate(d,!1),x=u.deltaPixelsFromPointsNoRotate(w,!0),m=u.deltaPixelsFromPointsNoRotate(w,!1),y=T.plus(m.divide(2)),S=c.squaredDistanceTo(y);l||(x=x.plus(new t.Point(1,1))),o.isRightMost&&this.wrapHorizontal&&(x.x+=.75),o.isBottomMost&&this.wrapVertical&&(x.y+=.75),o.position=v,o.size=x,o.squaredDistance=S,o.visibility=h},_blendTile:function(o,l,u,c,h,d){var w=1e3*this.blendTime,v,T;if(o.blendStart||(o.blendStart=d),v=d-o.blendStart,T=w?Math.min(1,v/w):1,this.alwaysBlend&&(T*=h),o.opacity=T,this.lastDrawn.push(o),T===1)this._setCoverage(this.coverage,c,l,u,!0),this._hasOpaqueTile=!0;else if(v<w)return!0;return!1},_compareTiles:function(o,l){return!o||l.visibility>o.visibility||l.visibility===o.visibility&&l.squaredDistance<o.squaredDistance?l:o},_drawTiles:function(o){if(!(this.opacity===0||o.length===0&&!this.placeholderFillStyle)){var l=o[0],u;l&&(u=this.opacity<1||this.compositeOperation&&this.compositeOperation!=="source-over"||!this._isBottomItem()&&this.source.hasTransparency(l.context2D,l.getUrl(),l.ajaxHeaders,l.postData));var c,h,d=this.viewport.getZoom(!0),w=this.viewportToImageZoom(d);o.length>1&&w>this.smoothTileEdgesMinZoom&&!this.iOSDevice&&this.getRotation(!0)%360===0&&t.supportsCanvas&&this.viewer.useCanvas&&(u=!0,c=l.getScaleForEdgeSmoothing(),h=l.getTranslationForEdgeSmoothing(c,this._drawer.getCanvasSize(!1),this._drawer.getCanvasSize(!0)));var v;u&&(c||(v=this.viewport.viewportToViewerElementRectangle(this.getClippedBounds(!0)).getIntegerBoundingBox(),this._drawer.viewer.viewport.getFlip()&&(this.viewport.getRotation(!0)%360!==0||this.getRotation(!0)%360!==0)&&(v.x=this._drawer.viewer.container.clientWidth-(v.x+v.width)),v=v.times(t.pixelDensityRatio)),this._drawer._clear(!0,v)),c||(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:u}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:u}),this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip());var T=!1;if(this._clip){this._drawer.saveContext(u);var x=this.imageToViewportRectangle(this._clip,!0);x=x.rotate(-this.getRotation(!0),this._getRotationPoint(!0));var m=this._drawer.viewportToDrawerRectangle(x);c&&(m=m.times(c)),h&&(m=m.translate(h)),this._drawer.setClip(m,u),T=!0}if(this._croppingPolygons){var y=this;this._drawer.saveContext(u);try{var S=this._croppingPolygons.map(function(W){return W.map(function(te){var ne=y.imageToViewportCoordinates(te.x,te.y,!0).rotate(-y.getRotation(!0),y._getRotationPoint(!0)),de=y._drawer.viewportCoordToDrawerCoord(ne);return c&&(de=de.times(c)),h&&(de=de.plus(h)),de})});this._drawer.clipWithPolygons(S,u)}catch(W){t.console.error(W)}T=!0}if(this.placeholderFillStyle&&this._hasOpaqueTile===!1){var _=this._drawer.viewportToDrawerRectangle(this.getBounds(!0));c&&(_=_.times(c)),h&&(_=_.translate(h));var b=null;typeof this.placeholderFillStyle=="function"?b=this.placeholderFillStyle(this,this._drawer.context):b=this.placeholderFillStyle,this._drawer.drawRectangle(_,b,u)}var O=a(this.subPixelRoundingForTransparency),z=!1;if(O===t.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS)z=!0;else if(O===t.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST){var M=this.viewer&&this.viewer.isAnimating();z=!M}for(var U=o.length-1;U>=0;U--)l=o[U],this._drawer.drawTile(l,this._drawingHandler,u,c,h,z,this.source),l.beingDrawn=!0,this.viewer&&this.viewer.raiseEvent("tile-drawn",{tiledImage:this,tile:l});T&&this._drawer.restoreContext(u),c||(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(u),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(u)),u&&(c&&(this.viewport.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.viewport.getRotation(!0),useSketch:!1}),this.getRotation(!0)%360!==0&&this._drawer._offsetForRotation({degrees:this.getRotation(!0),point:this.viewport.pixelFromPointNoRotate(this._getRotationPoint(!0),!0),useSketch:!1})),this._drawer.blendSketch({opacity:this.opacity,scale:c,translate:h,compositeOperation:this.compositeOperation,bounds:v}),c&&(this.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1),this.viewport.getRotation(!0)%360!==0&&this._drawer._restoreRotationChanges(!1))),c||this.viewport.getRotation(!0)%360===0&&this.getRotation(!0)%360===0&&this._drawer.viewer.viewport.getFlip()&&this._drawer._flip(),this._drawDebugInfo(o)}},_drawDebugInfo:function(o){if(this.debugMode)for(var l=o.length-1;l>=0;l--){var u=o[l];try{this._drawer.drawDebugInfo(u,o.length,l,this)}catch(c){t.console.error(c)}}},_providesCoverage:function(o,l,u,c){var h,d,w,v;if(!o[l])return!1;if(u===void 0||c===void 0){h=o[l];for(w in h)if(Object.prototype.hasOwnProperty.call(h,w)){d=h[w];for(v in d)if(Object.prototype.hasOwnProperty.call(d,v)&&!d[v])return!1}return!0}return o[l][u]===void 0||o[l][u][c]===void 0||o[l][u][c]===!0},_isCovered:function(o,l,u,c){return u===void 0||c===void 0?this._providesCoverage(o,l+1):this._providesCoverage(o,l+1,2*u,2*c)&&this._providesCoverage(o,l+1,2*u,2*c+1)&&this._providesCoverage(o,l+1,2*u+1,2*c)&&this._providesCoverage(o,l+1,2*u+1,2*c+1)},_setCoverage:function(o,l,u,c,h){if(!o[l]){t.console.warn("Setting coverage for a tile before its level's coverage has been reset: %s",l);return}o[l][u]||(o[l][u]={}),o[l][u][c]=h},_resetCoverage:function(o,l){o[l]={}}});var n=t.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER;function r(o){return o!==t.SUBPIXEL_ROUNDING_OCCURRENCES.ALWAYS&&o!==t.SUBPIXEL_ROUNDING_OCCURRENCES.ONLY_AT_REST&&o!==t.SUBPIXEL_ROUNDING_OCCURRENCES.NEVER}function s(o){return r(o)?n:o}function a(o){if(typeof o=="number")return s(o);if(!o||!t.Browser)return n;var l=o[t.Browser.vendor];return r(l)&&(l=o["*"]),s(l)}}(i),function(t){var n=function(s){t.console.assert(s,"[TileCache.cacheTile] options is required"),t.console.assert(s.tile,"[TileCache.cacheTile] options.tile is required"),t.console.assert(s.tiledImage,"[TileCache.cacheTile] options.tiledImage is required"),this.tile=s.tile,this.tiledImage=s.tiledImage},r=function(s){t.console.assert(s,"[ImageRecord] options is required"),t.console.assert(s.data,"[ImageRecord] options.data is required"),this._tiles=[],s.create.apply(null,[this,s.data,s.ownerTile]),this._destroyImplementation=s.destroy.bind(null,this),this.getImage=s.getImage.bind(null,this),this.getData=s.getData.bind(null,this),this.getRenderedContext=s.getRenderedContext.bind(null,this)};r.prototype={destroy:function(){this._destroyImplementation(),this._tiles=null},addTile:function(s){t.console.assert(s,"[ImageRecord.addTile] tile is required"),this._tiles.push(s)},removeTile:function(s){for(var a=0;a<this._tiles.length;a++)if(this._tiles[a]===s){this._tiles.splice(a,1);return}t.console.warn("[ImageRecord.removeTile] trying to remove unknown tile",s)},getTileCount:function(){return this._tiles.length}},t.TileCache=function(s){s=s||{},this._maxImageCacheCount=s.maxImageCacheCount||t.DEFAULT_SETTINGS.maxImageCacheCount,this._tilesLoaded=[],this._imagesLoaded=[],this._imagesLoadedCount=0},t.TileCache.prototype={numTilesLoaded:function(){return this._tilesLoaded.length},cacheTile:function(s){t.console.assert(s,"[TileCache.cacheTile] options is required"),t.console.assert(s.tile,"[TileCache.cacheTile] options.tile is required"),t.console.assert(s.tile.cacheKey,"[TileCache.cacheTile] options.tile.cacheKey is required"),t.console.assert(s.tiledImage,"[TileCache.cacheTile] options.tiledImage is required");var a=s.cutoff||0,o=this._tilesLoaded.length,l=this._imagesLoaded[s.tile.cacheKey];if(l||(s.data||(t.console.error("[TileCache.cacheTile] options.image was renamed to options.data. '.image' attribute has been deprecated and will be removed in the future."),s.data=s.image),t.console.assert(s.data,"[TileCache.cacheTile] options.data is required to create an ImageRecord"),l=this._imagesLoaded[s.tile.cacheKey]=new r({data:s.data,ownerTile:s.tile,create:s.tiledImage.source.createTileCache,destroy:s.tiledImage.source.destroyTileCache,getImage:s.tiledImage.source.getTileCacheDataAsImage,getData:s.tiledImage.source.getTileCacheData,getRenderedContext:s.tiledImage.source.getTileCacheDataAsContext2D}),this._imagesLoadedCount++),l.addTile(s.tile),s.tile.cacheImageRecord=l,this._imagesLoadedCount>this._maxImageCacheCount){for(var u=null,c=-1,h=null,d,w,v,T,x,m,y=this._tilesLoaded.length-1;y>=0;y--)if(m=this._tilesLoaded[y],d=m.tile,!(d.level<=a||d.beingDrawn)){if(!u){u=d,c=y,h=m;continue}T=d.lastTouchTime,w=u.lastTouchTime,x=d.level,v=u.level,(T<w||T===w&&x>v)&&(u=d,c=y,h=m)}u&&c>=0&&(this._unloadTile(h),o=c)}this._tilesLoaded[o]=new n({tile:s.tile,tiledImage:s.tiledImage})},clearTilesFor:function(s){t.console.assert(s,"[TileCache.clearTilesFor] tiledImage is required");for(var a,o=0;o<this._tilesLoaded.length;++o)a=this._tilesLoaded[o],a.tiledImage===s&&(this._unloadTile(a),this._tilesLoaded.splice(o,1),o--)},getImageRecord:function(s){return t.console.assert(s,"[TileCache.getImageRecord] cacheKey is required"),this._imagesLoaded[s]},_unloadTile:function(s){t.console.assert(s,"[TileCache._unloadTile] tileRecord is required");var a=s.tile,o=s.tiledImage;a.unload(),a.cacheImageRecord=null;var l=this._imagesLoaded[a.cacheKey];l.removeTile(a),l.getTileCount()||(l.destroy(),delete this._imagesLoaded[a.cacheKey],this._imagesLoadedCount--),o.viewer.raiseEvent("tile-unloaded",{tile:a,tiledImage:o})}}}(i),function(t){t.World=function(n){var r=this;t.console.assert(n.viewer,"[World] options.viewer is required"),t.EventSource.call(this),this.viewer=n.viewer,this._items=[],this._needsDraw=!1,this._autoRefigureSizes=!0,this._needsSizesFigured=!1,this._delegatedFigureSizes=function(s){r._autoRefigureSizes?r._figureSizes():r._needsSizesFigured=!0},this._figureSizes()},t.extend(t.World.prototype,t.EventSource.prototype,{addItem:function(n,r){if(t.console.assert(n,"[World.addItem] item is required"),t.console.assert(n instanceof t.TiledImage,"[World.addItem] only TiledImages supported at this time"),r=r||{},r.index!==void 0){var s=Math.max(0,Math.min(this._items.length,r.index));this._items.splice(s,0,n)}else this._items.push(n);this._autoRefigureSizes?this._figureSizes():this._needsSizesFigured=!0,this._needsDraw=!0,n.addHandler("bounds-change",this._delegatedFigureSizes),n.addHandler("clip-change",this._delegatedFigureSizes),this.raiseEvent("add-item",{item:n})},getItemAt:function(n){return t.console.assert(n!==void 0,"[World.getItemAt] index is required"),this._items[n]},getIndexOfItem:function(n){return t.console.assert(n,"[World.getIndexOfItem] item is required"),t.indexOf(this._items,n)},getItemCount:function(){return this._items.length},setItemIndex:function(n,r){t.console.assert(n,"[World.setItemIndex] item is required"),t.console.assert(r!==void 0,"[World.setItemIndex] index is required");var s=this.getIndexOfItem(n);if(r>=this._items.length)throw new Error("Index bigger than number of layers.");r===s||s===-1||(this._items.splice(s,1),this._items.splice(r,0,n),this._needsDraw=!0,this.raiseEvent("item-index-change",{item:n,previousIndex:s,newIndex:r}))},removeItem:function(n){t.console.assert(n,"[World.removeItem] item is required");var r=t.indexOf(this._items,n);r!==-1&&(n.removeHandler("bounds-change",this._delegatedFigureSizes),n.removeHandler("clip-change",this._delegatedFigureSizes),n.destroy(),this._items.splice(r,1),this._figureSizes(),this._needsDraw=!0,this._raiseRemoveItem(n))},removeAll:function(){this.viewer._cancelPendingImages();var n,r;for(r=0;r<this._items.length;r++)n=this._items[r],n.removeHandler("bounds-change",this._delegatedFigureSizes),n.removeHandler("clip-change",this._delegatedFigureSizes),n.destroy();var s=this._items;for(this._items=[],this._figureSizes(),this._needsDraw=!0,r=0;r<s.length;r++)n=s[r],this._raiseRemoveItem(n)},resetItems:function(){for(var n=0;n<this._items.length;n++)this._items[n].reset()},update:function(){for(var n=!1,r=0;r<this._items.length;r++)n=this._items[r].update()||n;return n},draw:function(){for(var n=0;n<this._items.length;n++)this._items[n].draw();this._needsDraw=!1},needsDraw:function(){for(var n=0;n<this._items.length;n++)if(this._items[n].needsDraw())return!0;return this._needsDraw},getHomeBounds:function(){return this._homeBounds.clone()},getContentFactor:function(){return this._contentFactor},setAutoRefigureSizes:function(n){this._autoRefigureSizes=n,n&this._needsSizesFigured&&(this._figureSizes(),this._needsSizesFigured=!1)},arrange:function(n){n=n||{};var r=n.immediately||!1,s=n.layout||t.DEFAULT_SETTINGS.collectionLayout,a=n.rows||t.DEFAULT_SETTINGS.collectionRows,o=n.columns||t.DEFAULT_SETTINGS.collectionColumns,l=n.tileSize||t.DEFAULT_SETTINGS.collectionTileSize,u=n.tileMargin||t.DEFAULT_SETTINGS.collectionTileMargin,c=l+u,h;!n.rows&&o?h=o:h=Math.ceil(this._items.length/a);var d=0,w=0,v,T,x,m,y;this.setAutoRefigureSizes(!1);for(var S=0;S<this._items.length;S++)S&&S%h===0&&(s==="horizontal"?(w+=c,d=0):(d+=c,w=0)),v=this._items[S],T=v.getBounds(),T.width>T.height?x=l:x=l*(T.width/T.height),m=x*(T.height/T.width),y=new t.Point(d+(l-x)/2,w+(l-m)/2),v.setPosition(y,r),v.setWidth(x,r),s==="horizontal"?d+=c:w+=c;this.setAutoRefigureSizes(!0)},_figureSizes:function(){var n=this._homeBounds?this._homeBounds.clone():null,r=this._contentSize?this._contentSize.clone():null,s=this._contentFactor||0;if(!this._items.length)this._homeBounds=new t.Rect(0,0,1,1),this._contentSize=new t.Point(1,1),this._contentFactor=1;else{var a=this._items[0],o=a.getBounds();this._contentFactor=a.getContentSize().x/o.width;for(var l=a.getClippedBounds().getBoundingBox(),u=l.x,c=l.y,h=l.x+l.width,d=l.y+l.height,w=1;w<this._items.length;w++)a=this._items[w],o=a.getBounds(),this._contentFactor=Math.max(this._contentFactor,a.getContentSize().x/o.width),l=a.getClippedBounds().getBoundingBox(),u=Math.min(u,l.x),c=Math.min(c,l.y),h=Math.max(h,l.x+l.width),d=Math.max(d,l.y+l.height);this._homeBounds=new t.Rect(u,c,h-u,d-c),this._contentSize=new t.Point(this._homeBounds.width*this._contentFactor,this._homeBounds.height*this._contentFactor)}(this._contentFactor!==s||!this._homeBounds.equals(n)||!this._contentSize.equals(r))&&this.raiseEvent("metrics-change",{})},_raiseRemoveItem:function(n){this.raiseEvent("remove-item",{item:n})}})}(i)})(xd);var gv=xd.exports;const vv=Iu(gv);function yv({dziUrl:e,downloadUrl:i,onReset:t,onChangeTarget:n,allowDuplicates:r,allowTinting:s,nineXDetail:a,onRegenerateWithSettings:o,isRegenerating:l,tileCount:u=0}){const c=X.useRef(null),h=X.useRef(null),[d,w]=X.useState(!0),[v,T]=X.useState(0),[x,m]=X.useState(!1),[y,S]=X.useState(r),[_,b]=X.useState(s),[O,z]=X.useState(a),[M,U]=X.useState(!1),W=y!==r||_!==s||O!==a;X.useEffect(()=>{if(!c.current||!e)return;h.current&&h.current.destroy(),w(!0);const L=vv({element:c.current,tileSources:e,prefixUrl:"https://cdnjs.cloudflare.com/ajax/libs/openseadragon/4.1.0/images/",showNavigator:!0,navigatorPosition:"BOTTOM_RIGHT",navigatorSizeRatio:.15,navigatorMaintainSizeRatio:!0,navigatorAutoFade:!0,showNavigationControl:!1,animationTime:.3,blendTime:.1,constrainDuringPan:!0,maxZoomPixelRatio:4,minZoomImageRatio:.8,visibilityRatio:.5,springStiffness:10,gestureSettingsMouse:{scrollToZoom:!0,clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25},gestureSettingsTouch:{pinchToZoom:!0,flickEnabled:!0,flickMinSpeed:120,flickMomentum:.25}});return L.addHandler("open",()=>{w(!1)}),L.addHandler("open-failed",()=>{w(!1),console.error("Failed to load DZI")}),L.addHandler("zoom",V=>{const q=V.zoom,$=L.viewport.getMinZoom(),re=L.viewport.getMaxZoom(),K=(q-$)/(re-$);T(Math.round(K*100))}),h.current=L,()=>{L.destroy()}},[e]);const te=()=>{if(h.current){const L=h.current.viewport.getZoom();h.current.viewport.zoomTo(L*1.5)}},ne=()=>{if(h.current){const L=h.current.viewport.getZoom();h.current.viewport.zoomTo(L/1.5)}},de=()=>{h.current&&h.current.viewport.goHome()},Te=()=>{h.current&&h.current.setFullScreen(!h.current.isFullPage())},st=()=>{const L=document.createElement("a");L.href=i,L.download="mosaic.jpg",document.body.appendChild(L),L.click(),document.body.removeChild(L)},ce=()=>{W&&U(!0)},ke=()=>{U(!1),o&&o({allowDuplicates:O?!0:y,allowTinting:_,nineXDetail:O})};return P.jsxs("div",{className:"relative w-full h-full min-h-[500px] bg-gray-900 rounded-lg overflow-hidden",children:[(d||l)&&P.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/80 z-30",children:P.jsxs("div",{className:"flex flex-col items-center gap-3",children:[P.jsx(yd,{className:"w-10 h-10 text-blue-400 animate-spin"}),P.jsx("p",{className:"text-gray-400",children:l?"Regenerating mosaic...":"Loading mosaic..."})]})}),M&&P.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/70 z-40",children:P.jsxs("div",{className:"bg-gray-800 rounded-xl p-6 max-w-md mx-4 shadow-2xl",children:[P.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Regenerate Mosaic?"}),P.jsx("p",{className:"text-gray-400 mb-4",children:"Are you sure you want to generate a new mosaic? Your current mosaic will be lost."}),P.jsxs("div",{className:"flex gap-3 justify-end",children:[P.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white transition-colors",children:"Cancel"}),P.jsx("button",{onClick:ke,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white transition-colors",children:"Yes, Regenerate"})]})]})}),P.jsx("div",{ref:c,className:"w-full h-full"}),P.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2 z-20",children:[P.jsx("button",{onClick:te,className:"p-2 bg-gray-800/90 hover:bg-gray-700 rounded-lg text-white transition-colors",title:"Zoom in",children:P.jsx(av,{className:"w-5 h-5"})}),P.jsx("button",{onClick:ne,className:"p-2 bg-gray-800/90 hover:bg-gray-700 rounded-lg text-white transition-colors",title:"Zoom out",children:P.jsx(uv,{className:"w-5 h-5"})}),P.jsx("button",{onClick:de,className:"p-2 bg-gray-800/90 hover:bg-gray-700 rounded-lg text-white transition-colors",title:"Reset view",children:P.jsx(ev,{className:"w-5 h-5"})}),P.jsx("button",{onClick:Te,className:"p-2 bg-gray-800/90 hover:bg-gray-700 rounded-lg text-white transition-colors",title:"Fullscreen",children:P.jsx(Qg,{className:"w-5 h-5"})}),P.jsx("div",{className:"w-full h-px bg-gray-600 my-1"}),P.jsx("button",{onClick:()=>m(!x),className:`p-2 rounded-lg text-white transition-colors ${x?"bg-blue-600 hover:bg-blue-700":"bg-gray-800/90 hover:bg-gray-700"}`,title:"Settings",children:P.jsx(wd,{className:"w-5 h-5"})})]}),x&&P.jsxs("div",{className:"absolute top-4 left-16 bg-gray-800/95 rounded-lg p-4 z-20 min-w-[250px] shadow-xl",children:[P.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Mosaic Settings"}),P.jsxs("div",{className:"space-y-3",children:[P.jsxs("label",{className:`flex items-center justify-between cursor-pointer ${O?"opacity-50":""}`,children:[P.jsx("span",{className:"text-sm text-gray-300",children:"Allow Duplicate Tiles"}),P.jsx("input",{type:"checkbox",checked:O?!0:y,onChange:L=>S(L.target.checked),disabled:O,className:"w-5 h-5 rounded bg-gray-700 border-gray-600 text-blue-500 focus:ring-blue-500 disabled:opacity-50"})]}),P.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[P.jsx("span",{className:"text-sm text-gray-300",children:"Color Tinting"}),P.jsx("input",{type:"checkbox",checked:_,onChange:L=>b(L.target.checked),className:"w-5 h-5 rounded bg-gray-700 border-gray-600 text-blue-500 focus:ring-blue-500"})]}),P.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[P.jsxs("div",{children:[P.jsx("span",{className:"text-sm text-purple-300",children:"9x Detail Mode"}),P.jsx("p",{className:"text-xs text-purple-400",children:"Each tile becomes 9 sub-tiles (3x3)"})]}),P.jsx("input",{type:"checkbox",checked:O,onChange:L=>{z(L.target.checked),L.target.checked&&S(!0)},className:"w-5 h-5 rounded bg-gray-700 border-gray-600 text-purple-500 focus:ring-purple-500"})]}),W&&P.jsxs("button",{onClick:ce,disabled:l,className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 rounded-lg text-white text-sm font-medium transition-colors mt-2",children:[P.jsx($g,{className:"w-4 h-4"}),"Apply & Regenerate"]})]})]}),P.jsxs("div",{className:"absolute top-4 right-4 bg-gray-800/90 rounded-lg px-3 py-1 text-sm text-gray-300 z-20",children:["Zoom: ",v,"%"]}),P.jsx("div",{className:"absolute bottom-4 left-4 z-20",children:P.jsxs("button",{onClick:st,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 rounded-lg text-white font-medium transition-colors",children:[P.jsx(Wg,{className:"w-4 h-4"}),"Download Mosaic"]})}),P.jsxs("div",{className:"absolute bottom-4 right-4 z-20 flex gap-2",children:[n&&u>0&&P.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-medium transition-colors",title:"Keep your uploaded tiles and change just the target image",children:[P.jsx(Gg,{className:"w-4 h-4"}),"Change Target"]}),t&&P.jsx("button",{onClick:t,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-white font-medium transition-colors",children:"Start New Mosaic"})]}),P.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800/80 rounded-lg px-3 py-1 text-xs text-gray-400 z-20",children:"Scroll to zoom  Drag to pan  Double-click to zoom in"})]})}function zu({message:e,onDismiss:i}){return P.jsx("div",{className:"fixed top-4 right-4 max-w-md bg-red-900/90 border border-red-700 rounded-lg p-4 shadow-lg z-50 animate-in slide-in-from-right",children:P.jsxs("div",{className:"flex items-start gap-3",children:[P.jsx(Mg,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),P.jsxs("div",{className:"flex-1",children:[P.jsx("h4",{className:"font-medium text-red-200",children:"Error"}),P.jsx("p",{className:"text-sm text-red-300 mt-1",children:e})]}),P.jsx("button",{onClick:i,className:"text-red-400 hover:text-red-300",children:P.jsx(lv,{className:"w-5 h-5"})})]})})}const wv=["Target Image","Upload Tiles","Settings","View Mosaic"];function xv(){const{state:e,uploadTarget:i,setManualMode:t,setDimensions:n,uploadTiles:r,clearTiles:s,updateSettings:a,setResolution:o,setUseAllTiles:l,setNineXDetail:u,generateMosaic:c,getDziUrl:h,getDownloadUrl:d,reset:w,changeTarget:v,clearError:T}=Lg(),m=(()=>{if(e.manualMode&&e.requirements)switch(e.selectedResolution){case"low":return e.requirements.low;case"medium":return e.requirements.medium;case"high":return e.requirements.high}else if(e.imageAnalysis)return e.imageAnalysis.recommendedTiles[e.selectedResolution];return 0})(),y=async S=>{await a(S),u(S.nineXDetail),c()};return e.hasMosaic&&e.dziMetadata?P.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.error&&P.jsx(zu,{message:e.error,onDismiss:T}),P.jsx("header",{className:"bg-gray-800/50 border-b border-gray-700 px-6 py-4",children:P.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx(Lu,{className:"w-8 h-8 text-blue-400"}),P.jsx("h1",{className:"text-xl font-bold",children:"Photo Mosaic Generator"})]}),P.jsxs("div",{className:"text-sm text-gray-400",children:[e.dziMetadata.width," x ",e.dziMetadata.height," px"]})]})}),P.jsx("main",{className:"h-[calc(100vh-73px)]",children:P.jsx(yv,{dziUrl:h(),downloadUrl:d(),onReset:w,onChangeTarget:v,tileCount:e.tileCount,allowDuplicates:e.allowDuplicates,allowTinting:e.allowTinting,nineXDetail:e.nineXDetail,onRegenerateWithSettings:y,isRegenerating:e.isGenerating})})]}):P.jsxs("div",{className:"min-h-screen bg-gray-900 text-white",children:[e.error&&P.jsx(zu,{message:e.error,onDismiss:T}),P.jsx("header",{className:"bg-gray-800/50 border-b border-gray-700 px-6 py-4",children:P.jsxs("div",{className:"max-w-4xl mx-auto flex items-center gap-3",children:[P.jsx(Lu,{className:"w-8 h-8 text-blue-400"}),P.jsx("h1",{className:"text-xl font-bold",children:"Photo Mosaic Generator"})]})}),P.jsxs("main",{className:"max-w-4xl mx-auto px-6 py-8",children:[P.jsx(cv,{currentStep:e.step,steps:wv}),P.jsxs("div",{className:"space-y-8",children:[P.jsxs("section",{className:"bg-gray-800/30 rounded-xl p-6",children:[P.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[P.jsx("span",{className:"w-6 h-6 rounded-full bg-blue-500 text-sm flex items-center justify-center",children:"1"}),"Upload Target Image"]}),P.jsx(hv,{onUpload:i,preview:e.targetImagePreview,dimensions:e.targetImageDimensions,isLoading:e.isUploadingTarget}),e.imageAnalysis&&P.jsxs("div",{className:"mt-4 p-4 bg-gray-800/50 rounded-lg",children:[P.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[P.jsx(ov,{className:"w-4 h-4 text-purple-400"}),P.jsx("span",{className:"text-sm font-medium text-purple-300",children:"Image Analysis"})]}),P.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[P.jsxs("div",{children:[P.jsx("span",{className:"text-gray-400",children:"Complexity:"}),P.jsxs("span",{className:"ml-2 text-white",children:[e.imageAnalysis.complexity,"/100"]}),P.jsx("div",{className:"mt-1 h-2 bg-gray-700 rounded-full overflow-hidden",children:P.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 via-yellow-500 to-red-500",style:{width:`${e.imageAnalysis.complexity}%`}})})]}),P.jsxs("div",{className:"text-right",children:[P.jsx("span",{className:"text-gray-400",children:"Recommended tiles:"}),P.jsxs("div",{className:"text-xs mt-1 space-x-3",children:[P.jsxs("span",{className:"text-yellow-400",children:["Low: ",e.imageAnalysis.recommendedTiles.low]}),P.jsxs("span",{className:"text-blue-400",children:["Med: ",e.imageAnalysis.recommendedTiles.medium]}),P.jsxs("span",{className:"text-green-400",children:["High: ",e.imageAnalysis.recommendedTiles.high]})]})]})]})]})]}),e.step>=2&&P.jsxs("section",{className:"bg-gray-800/30 rounded-xl p-6",children:[P.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[P.jsx("span",{className:"w-6 h-6 rounded-full bg-blue-500 text-sm flex items-center justify-center",children:"2"}),"Upload Tile Images"]}),P.jsx(fv,{onUpload:r,onClear:s,tileCount:e.tileCount,previews:e.tilePreviews,requiredCount:m})]}),e.step>=2&&e.tileCount>0&&P.jsxs("section",{className:"bg-gray-800/30 rounded-xl p-6",children:[P.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[P.jsx("span",{className:"w-6 h-6 rounded-full bg-blue-500 text-sm flex items-center justify-center",children:"3"}),"Settings & Generate"]}),P.jsxs("div",{className:"space-y-6",children:[P.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg",children:[P.jsxs("div",{className:"flex items-center gap-3",children:[P.jsx(wd,{className:"w-5 h-5 text-gray-400"}),P.jsxs("div",{children:[P.jsx("div",{className:"text-sm font-medium text-gray-300",children:"Advanced Settings"}),P.jsx("div",{className:"text-xs text-gray-500",children:"Customize output dimensions and tile calculations"})]})]}),P.jsx("button",{onClick:()=>t(!e.manualMode),className:"flex items-center gap-1 text-blue-400 hover:text-blue-300 text-sm",children:e.manualMode?P.jsxs(P.Fragment,{children:["Hide ",P.jsx(Bg,{className:"w-4 h-4"})]}):P.jsxs(P.Fragment,{children:["Show ",P.jsx(jg,{className:"w-4 h-4"})]})})]}),e.manualMode&&P.jsxs("div",{className:"p-4 bg-gray-800/30 rounded-lg border border-gray-700",children:[P.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Output Dimensions"}),P.jsx(dv,{initialWidth:e.desiredWidth,initialHeight:e.desiredHeight,originalDimensions:e.targetImageDimensions,requirements:e.requirements,onSubmit:n})]}),P.jsx(pv,{allowDuplicates:e.allowDuplicates,allowTinting:e.allowTinting,nineXDetail:e.nineXDetail,selectedResolution:e.selectedResolution,requirements:e.manualMode?e.requirements:null,imageAnalysis:e.manualMode?null:e.imageAnalysis,tileCount:e.tileCount,useAllTiles:e.useAllTiles,manualMode:e.manualMode,onDuplicatesChange:S=>a({allowDuplicates:S}),onTintingChange:S=>a({allowTinting:S}),onNineXDetailChange:u,onResolutionChange:o,onUseAllTilesChange:l}),P.jsx(mv,{onClick:c,isGenerating:e.isGenerating,disabled:!e.sessionId,tileCount:e.tileCount,selectedResolution:e.selectedResolution,recommendedCount:m,allowDuplicates:e.allowDuplicates,useAllTiles:e.useAllTiles,manualMode:e.manualMode})]})]}),P.jsxs("div",{className:"bg-blue-900/20 border border-blue-800/50 rounded-xl p-4 flex items-start gap-3",children:[P.jsx(qg,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),P.jsxs("div",{className:"text-sm text-gray-300 space-y-2",children:[P.jsxs("p",{children:[P.jsx("strong",{children:"Smart Analysis:"})," The system analyzes your target image complexity and recommends the optimal number of tiles for each quality level."]}),P.jsxs("p",{children:[P.jsx("strong",{children:"High Quality Bonus:"})," When you select High quality and upload more tiles than needed, all tiles will be used for maximum detail."]}),P.jsxs("p",{children:[P.jsx("strong",{children:"Memory-only storage:"})," All data is stored only in memory. Closing or refreshing the page will delete everything."]})]})]})]})]}),P.jsx("footer",{className:"border-t border-gray-800 px-6 py-4 mt-8",children:P.jsx("div",{className:"max-w-4xl mx-auto text-center text-sm text-gray-500",children:"Photo Mosaic Generator  All data stored in memory only"})})]})}oo.createRoot(document.getElementById("root")).render(P.jsx(Fd.StrictMode,{children:P.jsx(xv,{})}));
